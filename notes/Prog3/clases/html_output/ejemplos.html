<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ejemplos</title>
    <style>
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #F00 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #04D } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #00F; font-weight: bold } /* Name.Class */
.highlight .no { color: #800 } /* Name.Constant */
.highlight .nd { color: #A2F } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #00F } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #00F; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #A2F; font-weight: bold } /* Operator.Word */
.highlight .w { color: #BBB } /* Text.Whitespace */
.highlight .mb { color: #666 } /* Literal.Number.Bin */
.highlight .mf { color: #666 } /* Literal.Number.Float */
.highlight .mh { color: #666 } /* Literal.Number.Hex */
.highlight .mi { color: #666 } /* Literal.Number.Integer */
.highlight .mo { color: #666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #00F } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666 } /* Literal.Number.Integer.Long */
    </style>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0 auto; padding: 20px; }
        .main-title-block { background-color: #2e2e2e; color: #f0f0f0; padding: 18px; border-radius: 10px; border: 1px solid #444; box-shadow: 0 2px 5px rgba(0,0,0,0.2); font-size: 1.8em; font-weight: bold; margin-bottom: 20px; text-align: center; }
        pre:not(.highlight pre) { background-color: #fef6e4; color: #2e2e2e; padding: 12px; border-radius: 5px; overflow-x: auto; border: 1px solid #f0e6d4; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin: 15px 0; }
        code { font-family: "Courier New", Courier, monospace; }
        .highlight { padding: 0; border-radius: 5px; margin: 15px 0; background-color: #fef6e4 !important; border: 1px solid #f0e6d4; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .highlight pre { background: none; border: none; box-shadow: none; padding: 12px; margin: 0; border-radius: 0; }
        .highlight .c, .highlight .c1, .highlight .cm { color: #9a8052 !important; font-style: italic; }
        .highlight .k, .highlight .kd, .highlight .kn { color: #8250df !important; font-weight: normal; }
        .highlight .s, .highlight .s1, .highlight .s2, .highlight .sb, .highlight .si { color: #327d41 !important; }
        .highlight .m, .highlight .mi, .highlight .mf { color: #606060 !important; }
        .highlight .o, .highlight .ow { color: #666666 !important; font-weight: normal; }
        .highlight .kc, .highlight .no { color: #9a5b13 !important; }
        .highlight .nf, .highlight .nb, .highlight .nx { color: #606060 !important; font-weight: normal; }
        .highlight .p { color: #666666 !important; font-weight: normal; }
        .language-jsx .highlight .k, .language-jsx .highlight .kd, .language-jsx .highlight .kr { color: #af00db !important; font-weight: normal; background: none !important; border: none !important; }
        .language-jsx .highlight .nx, .language-jsx .highlight .nf { color: #0969da !important; background: none !important; border: none !important; }
        .language-jsx .highlight .nt { color: #116329 !important; background:none !important; border:none !important; box-shadow:none !important; outline:none !important; }
        .language-jsx .highlight .nc { color: #116329 !important; background:none !important; border:none !important; box-shadow:none !important; outline:none !important; }
        .language-jsx .highlight .o  { color: #666666 !important; background:none !important; border:none !important; box-shadow:none !important; outline:none !important; }
        .language-jsx .highlight .p  { color: #666666 !important; background:none !important; border:none !important; box-shadow:none !important; outline:none !important; }
        .language-jsx .highlight .na { color: #0969da !important; background: none !important; border: none !important; }
        .language-jsx .highlight .s, .language-jsx .highlight .s1, .language-jsx .highlight .s2 { color: #0a3069 !important; background: none !important; border: none !important; }
        .language-jsx .highlight .c, .language-jsx .highlight .c1, .language-jsx .highlight .cm { color: #656d76 !important; font-style: italic; background: none !important; border: none !important; }
        .language-jsx .highlight .m, .language-jsx .highlight .mi, .language-jsx .highlight .mf { color: #0969da !important; background: none !important; border: none !important; }
        .language-react .highlight .k, .language-react .highlight .kd, .language-react .highlight .kr { color: #af00db !important; font-weight: normal; background: none !important; border: none !important; }
        .language-react .highlight .nx, .language-react .highlight .nf { color: #0969da !important; background: none !important; border: none !important; }
        .language-react .highlight .nt { color: #116329 !important; background:none !important; border:none !important; box-shadow:none !important; outline:none !important; }
        .language-react .highlight .nc { color: #116329 !important; background:none !important; border:none !important; box-shadow:none !important; outline:none !important; }
        .language-react .highlight .o  { color: #666666 !important; background:none !important; border:none !important; box-shadow:none !important; outline:none !important; }
        .language-react .highlight .p  { color: #666666 !important; background:none !important; border:none !important; box-shadow:none !important; outline:none !important; }
        .language-react .highlight .na { color: #0969da !important; background: none !important; border: none !important; }
        .language-react .highlight .s, .language-react .highlight .s1, .language-react .highlight .s2 { color: #0a3069 !important; background: none !important; border: none !important; }
        .language-react .highlight .c, .language-react .highlight .c1, .language-react .highlight .cm { color: #656d76 !important; font-style: italic; background: none !important; border: none !important; }
        .language-react .highlight .m, .language-react .highlight .mi, .language-react .highlight .mf { color: #0969da !important; background: none !important; border: none !important; }
        .language-tsx .highlight .k, .language-tsx .highlight .kd, .language-tsx .highlight .kr { color: #af00db !important; font-weight: normal; background: none !important; border: none !important; }
        .language-tsx .highlight .nx, .language-tsx .highlight .nf { color: #0969da !important; background: none !important; border: none !important; }
        .language-tsx .highlight .nt { color: #116329 !important; background:none !important; border:none !important; box-shadow:none !important; outline:none !important; }
        .language-tsx .highlight .nc { color: #116329 !important; background:none !important; border:none !important; box-shadow:none !important; outline:none !important; }
        .language-tsx .highlight .o  { color: #666666 !important; background:none !important; border:none !important; box-shadow:none !important; outline:none !important; }
        .language-tsx .highlight .p  { color: #666666 !important; background:none !important; border:none !important; box-shadow:none !important; outline:none !important; }
        .language-tsx .highlight .na { color: #0969da !important; background: none !important; border: none !important; }
        .language-tsx .highlight .s, .language-tsx .highlight .s1, .language-tsx .highlight .s2 { color: #0a3069 !important; background: none !important; border: none !important; }
        .language-tsx .highlight .c, .language-tsx .highlight .c1, .language-tsx .highlight .cm { color: #656d76 !important; font-style: italic; background: none !important; border: none !important; }
        .language-tsx .highlight .m, .language-tsx .highlight .mi, .language-tsx .highlight .mf { color: #0969da !important; background: none !important; border: none !important; }
        .language-tsx .highlight .kt { color: #0969da !important; background: none !important; border: none !important; }
        .language-javascript .highlight .err { color: #116329 !important; background: none !important; border: none !important; }
        .language-js .highlight .err { color: #116329 !important; background: none !important; border: none !important; }
        .highlight span { background: none !important; border: none !important; box-shadow: none !important; text-decoration: none !important; outline: none !important; }
        .empty-code-block { background-color: #fef6e4; color: #2e2e2e; padding: 12px; border-radius: 5px; margin: 15px 0; font-family: monospace; border: 1px solid #f0e6d4; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .highlight-error { background-color: #fef6e4; color: #000080; padding: 12px; border-radius: 5px; margin: 15px 0; font-family: monospace; border: 1px solid #f0e6d4; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        img { max-width: 100%; height: auto; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        .chapter-container { background-color: #f9f9f9; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .chapter-container h2 { margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px; color: #444; }
    </style>
    <style>
        /* CSS from sintax.css */
/* custom-code-style-complete.css */
/* Estilos completos para ajustar el contraste y usar tonos de gris en el resaltado de sintaxis */
h1 {
    background-color: #4b0404;
    color: #e38735;
    padding: 18px;
    border-radius: 10px;
    border: 1px solid #444;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    font-size: 1.8em;
    font-weight: bold;
    margin-bottom: 20px;
    text-align: center;
}

    </style>
</head>
<body>
<h1 id="ejemplos-de-programacion-orientada-a-objetos-en-javascript">Ejemplos de Programación Orientada a Objetos en JavaScript</h1>
<div class="chapter-container"><h2 id="1-relaciones-entre-objetos">1. Relaciones entre Objetos</h2>
<h3 id="11-asociacion">1.1 Asociación</h3>
<p>La asociación es una relación en la que un objeto utiliza o interactúa con otro, pero ambos pueden existir independientemente.</p>
<div class="highlight language-javascript"><pre><span></span><span class="c1">// Asociación: Un profesor puede estar asociado a varios cursos</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Profesor</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span><span class="w"> </span><span class="nx">especialidad</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nombre</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">especialidad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">especialidad</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">cursos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"> </span><span class="c1">// Referencias a cursos que enseña</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">asignarCurso</span><span class="p">(</span><span class="nx">curso</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">cursos</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">curso</span><span class="p">);</span>
<span class="w">    </span><span class="nx">curso</span><span class="p">.</span><span class="nx">asignarProfesor</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">listarCursos</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">cursos</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">curso</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">curso</span><span class="p">.</span><span class="nx">nombre</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Curso</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span><span class="w"> </span><span class="nx">codigo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nombre</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">codigo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">codigo</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">profesor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w"> </span><span class="c1">// Referencia al profesor</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">asignarProfesor</span><span class="p">(</span><span class="nx">profesor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">profesor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">profesor</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">getInfoCurso</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">codigo</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="si">}</span><span class="sb"> - Profesor: </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">profesor</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">profesor</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Sin asignar&#39;</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Uso</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">profJuan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Profesor</span><span class="p">(</span><span class="s1">&#39;Juan Pérez&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Programación&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">cursoJS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Curso</span><span class="p">(</span><span class="s1">&#39;JavaScript Avanzado&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;JS101&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">cursoPython</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Curso</span><span class="p">(</span><span class="s1">&#39;Python Básico&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;PY101&#39;</span><span class="p">);</span>

<span class="nx">profJuan</span><span class="p">.</span><span class="nx">asignarCurso</span><span class="p">(</span><span class="nx">cursoJS</span><span class="p">);</span>
<span class="nx">profJuan</span><span class="p">.</span><span class="nx">asignarCurso</span><span class="p">(</span><span class="nx">cursoPython</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">profJuan</span><span class="p">.</span><span class="nx">listarCursos</span><span class="p">());</span><span class="w"> </span><span class="c1">// [&#39;JavaScript Avanzado&#39;, &#39;Python Básico&#39;]</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">cursoJS</span><span class="p">.</span><span class="nx">getInfoCurso</span><span class="p">());</span><span class="w"> </span><span class="c1">// &#39;JS101: JavaScript Avanzado - Profesor: Juan Pérez&#39;</span>
</pre></div>

<h3 id="12-agregacion">1.2 Agregación</h3>
<p>En la agregación, un objeto contiene otros objetos, pero éstos pueden existir de forma independiente.</p>
<div class="highlight language-javascript"><pre><span></span><span class="c1">// Agregación: Un equipo contiene jugadores, pero los jugadores pueden existir sin el equipo</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Jugador</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span><span class="w"> </span><span class="nx">posicion</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nombre</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">posicion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">posicion</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">getInfo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="si">}</span><span class="sb"> (</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">posicion</span><span class="si">}</span><span class="sb">)`</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Equipo</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">nombre</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nombre</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">jugadores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"> </span><span class="c1">// Agregación: el equipo tiene jugadores</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">agregarJugador</span><span class="p">(</span><span class="nx">jugador</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">jugadores</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">jugador</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">quitarJugador</span><span class="p">(</span><span class="nx">nombreJugador</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">jugadores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">jugadores</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">j</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">nombreJugador</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">listarJugadores</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">jugadores</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">j</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">());</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Uso</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">leo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Jugador</span><span class="p">(</span><span class="s1">&#39;Leo Messi&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Delantero&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">cristiano</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Jugador</span><span class="p">(</span><span class="s1">&#39;Cristiano Ronaldo&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Delantero&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">neymar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Jugador</span><span class="p">(</span><span class="s1">&#39;Neymar Jr&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Extremo&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">barcelona</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Equipo</span><span class="p">(</span><span class="s1">&#39;FC Barcelona&#39;</span><span class="p">);</span>
<span class="nx">barcelona</span><span class="p">.</span><span class="nx">agregarJugador</span><span class="p">(</span><span class="nx">leo</span><span class="p">);</span>
<span class="nx">barcelona</span><span class="p">.</span><span class="nx">agregarJugador</span><span class="p">(</span><span class="nx">neymar</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">juventus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Equipo</span><span class="p">(</span><span class="s1">&#39;Juventus&#39;</span><span class="p">);</span>
<span class="nx">juventus</span><span class="p">.</span><span class="nx">agregarJugador</span><span class="p">(</span><span class="nx">cristiano</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">barcelona</span><span class="p">.</span><span class="nx">listarJugadores</span><span class="p">());</span><span class="w"> </span><span class="c1">// [&#39;Leo Messi (Delantero)&#39;, &#39;Neymar Jr (Extremo)&#39;]</span>

<span class="c1">// Si el Barcelona &quot;libera&quot; a Neymar, éste sigue existiendo</span>
<span class="nx">barcelona</span><span class="p">.</span><span class="nx">quitarJugador</span><span class="p">(</span><span class="s1">&#39;Neymar Jr&#39;</span><span class="p">);</span>
<span class="c1">// Neymar podría unirse a otro equipo</span>
<span class="nx">juventus</span><span class="p">.</span><span class="nx">agregarJugador</span><span class="p">(</span><span class="nx">neymar</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">juventus</span><span class="p">.</span><span class="nx">listarJugadores</span><span class="p">());</span><span class="w"> </span><span class="c1">// [&#39;Cristiano Ronaldo (Delantero)&#39;, &#39;Neymar Jr (Extremo)&#39;]</span>
</pre></div>

<h3 id="13-composicion">1.3 Composición</h3>
<p>En la composición, un objeto está compuesto por otros objetos que dependen de él, y si el objeto contenedor se destruye, también lo hacen sus componentes.</p>
<div class="highlight language-javascript"><pre><span></span><span class="c1">// Composición: Un automóvil está compuesto por motor y ruedas. Si el automóvil &quot;muere&quot;, sus partes también</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Motor</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">tipo</span><span class="p">,</span><span class="w"> </span><span class="nx">potencia</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">tipo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tipo</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">potencia</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">potencia</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">encendido</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">encender</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">encendido</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="sb">`Motor </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">tipo</span><span class="si">}</span><span class="sb"> encendido`</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">apagar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">encendido</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="sb">`Motor </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">tipo</span><span class="si">}</span><span class="sb"> apagado`</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Rueda</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">posicion</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">posicion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">posicion</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">presion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2.2</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">inflar</span><span class="p">(</span><span class="nx">presion</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">presion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">presion</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="sb">`Rueda </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">posicion</span><span class="si">}</span><span class="sb"> inflada a </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">presion</span><span class="si">}</span><span class="sb"> bar`</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Automovil</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">marca</span><span class="p">,</span><span class="w"> </span><span class="nx">modelo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">marca</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">marca</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">modelo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">modelo</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// Composición: las partes son creadas por el automóvil</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">motor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Motor</span><span class="p">(</span><span class="s2">&quot;V6&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">300</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">ruedas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="ow">new</span><span class="w"> </span><span class="nx">Rueda</span><span class="p">(</span><span class="s2">&quot;delantera-izquierda&quot;</span><span class="p">),</span>
<span class="w">      </span><span class="ow">new</span><span class="w"> </span><span class="nx">Rueda</span><span class="p">(</span><span class="s2">&quot;delantera-derecha&quot;</span><span class="p">),</span>
<span class="w">      </span><span class="ow">new</span><span class="w"> </span><span class="nx">Rueda</span><span class="p">(</span><span class="s2">&quot;trasera-izquierda&quot;</span><span class="p">),</span>
<span class="w">      </span><span class="ow">new</span><span class="w"> </span><span class="nx">Rueda</span><span class="p">(</span><span class="s2">&quot;trasera-derecha&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">];</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">encender</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">marca</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">modelo</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">motor</span><span class="p">.</span><span class="nx">encender</span><span class="p">()</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">apagar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">marca</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">modelo</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">motor</span><span class="p">.</span><span class="nx">apagar</span><span class="p">()</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">inflarRuedas</span><span class="p">(</span><span class="nx">presion</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">ruedas</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">rueda</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">rueda</span><span class="p">.</span><span class="nx">inflar</span><span class="p">(</span><span class="nx">presion</span><span class="p">));</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Uso</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">miAuto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Automovil</span><span class="p">(</span><span class="s2">&quot;Toyota&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Corolla&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">miAuto</span><span class="p">.</span><span class="nx">encender</span><span class="p">());</span><span class="w"> </span><span class="c1">// &#39;Toyota Corolla: Motor V6 encendido&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">miAuto</span><span class="p">.</span><span class="nx">inflarRuedas</span><span class="p">(</span><span class="mf">2.4</span><span class="p">));</span><span class="w"> </span><span class="c1">// [&#39;Rueda delantera-izquierda inflada a 2.4 bar&#39;, ...]</span>

<span class="c1">// Si el auto se destruye (por ejemplo, se elimina la referencia)</span>
<span class="c1">// el motor y las ruedas también desaparecen ya que no tienen existencia independiente</span>
</pre></div>

</div><div class="chapter-container"><h2 id="2-buenas-practicas-en-poo">2. Buenas Prácticas en POO</h2>
<h3 id="21-principio-de-responsabilidad-unica-srp">2.1 Principio de Responsabilidad Única (SRP)</h3>
<p>Cada clase debe tener una única razón para cambiar.</p>
<div class="highlight language-javascript"><pre><span></span><span class="c1">// MAL: Clase con múltiples responsabilidades</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">UsuarioMal</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nombre</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">email</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">carrito</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Responsabilidad: gestión de usuario</span>
<span class="w">  </span><span class="nx">actualizarPerfil</span><span class="p">(</span><span class="nx">nuevoNombre</span><span class="p">,</span><span class="w"> </span><span class="nx">nuevoEmail</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nuevoNombre</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nuevoEmail</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Responsabilidad: autenticación</span>
<span class="w">  </span><span class="nx">verificarCredenciales</span><span class="p">(</span><span class="nx">password</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// lógica de autenticación</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;contraseña123&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Responsabilidad: gestión de carrito</span>
<span class="w">  </span><span class="nx">agregarAlCarrito</span><span class="p">(</span><span class="nx">producto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">carrito</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">producto</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">calcularTotalCarrito</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">carrito</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">total</span><span class="p">,</span><span class="w"> </span><span class="nx">producto</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">total</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">producto</span><span class="p">.</span><span class="nx">precio</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Responsabilidad: envío de emails</span>
<span class="w">  </span><span class="nx">enviarEmailConfirmacion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Enviando email a </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">email</span><span class="si">}</span><span class="sb">...`</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// lógica para enviar email</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// BIEN: Clases con responsabilidades únicas</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Usuario</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nombre</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">email</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">actualizarPerfil</span><span class="p">(</span><span class="nx">nuevoNombre</span><span class="p">,</span><span class="w"> </span><span class="nx">nuevoEmail</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nuevoNombre</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nuevoEmail</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Autenticador</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">verificarCredenciales</span><span class="p">(</span><span class="nx">usuario</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// lógica de autenticación</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;contraseña123&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Carrito</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">usuario</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">usuario</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">usuario</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">productos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">agregarProducto</span><span class="p">(</span><span class="nx">producto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">productos</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">producto</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">calcularTotal</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">productos</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">total</span><span class="p">,</span><span class="w"> </span><span class="nx">producto</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">total</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">producto</span><span class="p">.</span><span class="nx">precio</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">NotificadorEmail</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="nx">enviarConfirmacion</span><span class="p">(</span><span class="nx">usuario</span><span class="p">,</span><span class="w"> </span><span class="nx">mensaje</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Enviando email a </span><span class="si">${</span><span class="nx">usuario</span><span class="p">.</span><span class="nx">email</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">mensaje</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// lógica para enviar email</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Uso</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">usuario</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Usuario</span><span class="p">(</span><span class="s2">&quot;Ana&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ana@ejemplo.com&quot;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">carrito</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Carrito</span><span class="p">(</span><span class="nx">usuario</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">autenticador</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Autenticador</span><span class="p">();</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">autenticador</span><span class="p">.</span><span class="nx">verificarCredenciales</span><span class="p">(</span><span class="nx">usuario</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;contraseña123&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">carrito</span><span class="p">.</span><span class="nx">agregarProducto</span><span class="p">({</span><span class="nx">nombre</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Laptop&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">precio</span><span class="o">:</span><span class="w"> </span><span class="mf">1200</span><span class="p">});</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Total: $</span><span class="si">${</span><span class="nx">carrito</span><span class="p">.</span><span class="nx">calcularTotal</span><span class="p">()</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="nx">NotificadorEmail</span><span class="p">.</span><span class="nx">enviarConfirmacion</span><span class="p">(</span><span class="nx">usuario</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Su compra fue realizada con éxito&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<h3 id="22-ley-de-demeter-principio-de-menor-conocimiento">2.2 Ley de Demeter (Principio de Menor Conocimiento)</h3>
<p>Un objeto sólo debe hablar con sus "amigos cercanos" y no con extraños.</p>
<div class="highlight language-javascript"><pre><span></span><span class="c1">// MAL: Violación de la Ley de Demeter</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Cartera</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">dinero</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">dinero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dinero</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">getDinero</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">dinero</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">extraerDinero</span><span class="p">(</span><span class="nx">cantidad</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">cantidad</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">dinero</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">dinero</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="nx">cantidad</span><span class="p">;</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">cantidad</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">PersonaMal</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span><span class="w"> </span><span class="nx">dinero</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nombre</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">cartera</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Cartera</span><span class="p">(</span><span class="nx">dinero</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">getCartera</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">cartera</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">ComercianteMal</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">venderProducto</span><span class="p">(</span><span class="nx">persona</span><span class="p">,</span><span class="w"> </span><span class="nx">precioProducto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Viola la Ley de Demeter: accede a un objeto a través de otro</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">persona</span><span class="p">.</span><span class="nx">getCartera</span><span class="p">().</span><span class="nx">getDinero</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">precioProducto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">persona</span><span class="p">.</span><span class="nx">getCartera</span><span class="p">().</span><span class="nx">extraerDinero</span><span class="p">(</span><span class="nx">precioProducto</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="sb">`Producto vendido a </span><span class="si">${</span><span class="nx">persona</span><span class="p">.</span><span class="nx">nombre</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">persona</span><span class="p">.</span><span class="nx">nombre</span><span class="si">}</span><span class="sb"> no tiene suficiente dinero`</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// BIEN: Respetando la Ley de Demeter</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">CarteraBien</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">dinero</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">dinero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dinero</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">tieneSuficiente</span><span class="p">(</span><span class="nx">cantidad</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">dinero</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">cantidad</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">extraer</span><span class="p">(</span><span class="nx">cantidad</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tieneSuficiente</span><span class="p">(</span><span class="nx">cantidad</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">dinero</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="nx">cantidad</span><span class="p">;</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">cantidad</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">PersonaBien</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span><span class="w"> </span><span class="nx">dinero</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nombre</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">cartera</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CarteraBien</span><span class="p">(</span><span class="nx">dinero</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">tieneSuficienteDinero</span><span class="p">(</span><span class="nx">cantidad</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">cartera</span><span class="p">.</span><span class="nx">tieneSuficiente</span><span class="p">(</span><span class="nx">cantidad</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">pagar</span><span class="p">(</span><span class="nx">cantidad</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">cartera</span><span class="p">.</span><span class="nx">extraer</span><span class="p">(</span><span class="nx">cantidad</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">ComercianteBien</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">venderProducto</span><span class="p">(</span><span class="nx">persona</span><span class="p">,</span><span class="w"> </span><span class="nx">precioProducto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Respeta la Ley de Demeter: solo habla con el objeto persona</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">persona</span><span class="p">.</span><span class="nx">tieneSuficienteDinero</span><span class="p">(</span><span class="nx">precioProducto</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">persona</span><span class="p">.</span><span class="nx">pagar</span><span class="p">(</span><span class="nx">precioProducto</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="sb">`Producto vendido a </span><span class="si">${</span><span class="nx">persona</span><span class="p">.</span><span class="nx">nombre</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">persona</span><span class="p">.</span><span class="nx">nombre</span><span class="si">}</span><span class="sb"> no tiene suficiente dinero`</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Uso</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">maria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">PersonaBien</span><span class="p">(</span><span class="s2">&quot;María&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">500</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">comerciante</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ComercianteBien</span><span class="p">();</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">comerciante</span><span class="p">.</span><span class="nx">venderProducto</span><span class="p">(</span><span class="nx">maria</span><span class="p">,</span><span class="w"> </span><span class="mf">300</span><span class="p">));</span><span class="w"> </span><span class="c1">// &#39;Producto vendido a María&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">comerciante</span><span class="p">.</span><span class="nx">venderProducto</span><span class="p">(</span><span class="nx">maria</span><span class="p">,</span><span class="w"> </span><span class="mf">300</span><span class="p">));</span><span class="w"> </span><span class="c1">// &#39;María no tiene suficiente dinero&#39;</span>
</pre></div>

<h3 id="23-interfaces-e-implementacion">2.3 Interfaces e Implementación</h3>
<p>JavaScript no tiene interfaces nativas, pero podemos simularlas.</p>
<div class="highlight language-javascript"><pre><span></span><span class="c1">// Simulación de una interfaz usando una clase abstracta</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">FormaGeometrica</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="kr">constructor</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">FormaGeometrica</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;No se puede instanciar una clase abstracta&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">calcularArea</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Método abstracto &#39;calcularArea()&#39; debe ser implementado&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">calcularPerimetro</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Método abstracto &#39;calcularPerimetro()&#39; debe ser implementado&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Implementaciones concretas</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Rectangulo</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">FormaGeometrica</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">ancho</span><span class="p">,</span><span class="w"> </span><span class="nx">alto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">super</span><span class="p">();</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">ancho</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ancho</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">alto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">alto</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">calcularArea</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">ancho</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">alto</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">calcularPerimetro</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ancho</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">alto</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Circulo</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">FormaGeometrica</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">radio</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">super</span><span class="p">();</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">radio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">radio</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">calcularArea</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">radio</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">radio</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">calcularPerimetro</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">radio</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Función que trabaja con la &quot;interfaz&quot; FormaGeometrica</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">imprimirInfoForma</span><span class="p">(</span><span class="nx">forma</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">forma</span><span class="w"> </span><span class="ow">instanceof</span><span class="w"> </span><span class="nx">FormaGeometrica</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;El parámetro debe implementar FormaGeometrica&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Área: </span><span class="si">${</span><span class="nx">forma</span><span class="p">.</span><span class="nx">calcularArea</span><span class="p">()</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Perímetro: </span><span class="si">${</span><span class="nx">forma</span><span class="p">.</span><span class="nx">calcularPerimetro</span><span class="p">()</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Uso</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">rectangulo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Rectangulo</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">circulo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Circulo</span><span class="p">(</span><span class="mf">4</span><span class="p">);</span>

<span class="nx">imprimirInfoForma</span><span class="p">(</span><span class="nx">rectangulo</span><span class="p">);</span>
<span class="c1">// Área: 15</span>
<span class="c1">// Perímetro: 16</span>

<span class="nx">imprimirInfoForma</span><span class="p">(</span><span class="nx">circulo</span><span class="p">);</span>
<span class="c1">// Área: 50.26548245743669</span>
<span class="c1">// Perímetro: 25.132741228718345</span>

<span class="c1">// Esto daría error:</span>
<span class="c1">// const formaInvalida = new FormaGeometrica();</span>
<span class="c1">// imprimirInfoForma(formaInvalida);</span>
</pre></div>

</div><div class="chapter-container"><h2 id="3-patrones-de-diseno-comunes-en-poo">3. Patrones de Diseño Comunes en POO</h2>
<h3 id="31-singleton">3.1 Singleton</h3>
<p>Garantiza que una clase tenga una única instancia y proporciona un punto de acceso global a ella.</p>
<div class="highlight language-javascript"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nx">Configuracion</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Si ya existe una instancia, devuélvela</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">Configuracion</span><span class="p">.</span><span class="nx">instancia</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">Configuracion</span><span class="p">.</span><span class="nx">instancia</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// Configuración por defecto</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">tema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;claro&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">notificaciones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">idioma</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;es&quot;</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">    </span><span class="c1">// Guardar la instancia</span>
<span class="w">    </span><span class="nx">Configuracion</span><span class="p">.</span><span class="nx">instancia</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">getConfig</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Devolvemos una copia para evitar modificaciones directas</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">      </span><span class="nx">tema</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">tema</span><span class="p">,</span><span class="w"> </span>
<span class="w">      </span><span class="nx">notificaciones</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">notificaciones</span><span class="p">,</span><span class="w"> </span>
<span class="w">      </span><span class="nx">idioma</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">idioma</span><span class="w"> </span>
<span class="w">    </span><span class="p">};</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">setConfig</span><span class="p">(</span><span class="nx">clave</span><span class="p">,</span><span class="w"> </span><span class="nx">valor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">clave</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">this</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">[</span><span class="nx">clave</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">valor</span><span class="p">;</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Uso</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">config1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Configuracion</span><span class="p">();</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">config2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Configuracion</span><span class="p">();</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">config1</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">config2</span><span class="p">);</span><span class="w"> </span><span class="c1">// true, ambas variables apuntan a la misma instancia</span>

<span class="nx">config1</span><span class="p">.</span><span class="nx">setConfig</span><span class="p">(</span><span class="s2">&quot;tema&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;oscuro&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">config2</span><span class="p">.</span><span class="nx">getConfig</span><span class="p">().</span><span class="nx">tema</span><span class="p">);</span><span class="w"> </span><span class="c1">// &quot;oscuro&quot;, la modificación se refleja en todas las referencias</span>
</pre></div>

<h3 id="32-factory-method">3.2 Factory Method</h3>
<p>Define una interfaz para crear objetos, permitiendo a las subclases decidir qué clase instanciar.</p>
<div class="highlight language-javascript"><pre><span></span><span class="c1">// Producto abstracto</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Notificacion</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="kr">constructor</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">Notificacion</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Clase abstracta Notificacion no puede ser instanciada&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">enviar</span><span class="p">(</span><span class="nx">mensaje</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Método abstracto enviar() debe ser implementado&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Productos concretos</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">NotificacionEmail</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Notificacion</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">destinatario</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">super</span><span class="p">();</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">destinatario</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">destinatario</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">enviar</span><span class="p">(</span><span class="nx">mensaje</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="sb">`Enviando correo a </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">destinatario</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">mensaje</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">NotificacionSMS</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Notificacion</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">telefono</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">super</span><span class="p">();</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">telefono</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">telefono</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">enviar</span><span class="p">(</span><span class="nx">mensaje</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="sb">`Enviando SMS a </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">telefono</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">mensaje</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">NotificacionPush</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Notificacion</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">deviceId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">super</span><span class="p">();</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">deviceId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">deviceId</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">enviar</span><span class="p">(</span><span class="nx">mensaje</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="sb">`Enviando notificación push a dispositivo </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">deviceId</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">mensaje</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Creador abstracto</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">CreadorNotificacion</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="kr">constructor</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">CreadorNotificacion</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Clase abstracta CreadorNotificacion no puede ser instanciada&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Factory method</span>
<span class="w">  </span><span class="nx">crearNotificacion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Método abstracto crearNotificacion() debe ser implementado&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Método que usa el factory method</span>
<span class="w">  </span><span class="nx">enviarNotificacion</span><span class="p">(</span><span class="nx">mensaje</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">notificacion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">crearNotificacion</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">notificacion</span><span class="p">.</span><span class="nx">enviar</span><span class="p">(</span><span class="nx">mensaje</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Creadores concretos</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">CreadorNotificacionEmail</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">CreadorNotificacion</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">destinatario</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">super</span><span class="p">();</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">destinatario</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">destinatario</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">crearNotificacion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">NotificacionEmail</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">destinatario</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">CreadorNotificacionSMS</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">CreadorNotificacion</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">telefono</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">super</span><span class="p">();</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">telefono</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">telefono</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">crearNotificacion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">NotificacionSMS</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">telefono</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">CreadorNotificacionPush</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">CreadorNotificacion</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">deviceId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">super</span><span class="p">();</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">deviceId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">deviceId</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">crearNotificacion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">NotificacionPush</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">deviceId</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Función que selecciona el tipo de notificación según preferencias del usuario</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">notificadorFactory</span><span class="p">(</span><span class="nx">usuario</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">usuario</span><span class="p">.</span><span class="nx">preferenciaNotificacion</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;email&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CreadorNotificacionEmail</span><span class="p">(</span><span class="nx">usuario</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">usuario</span><span class="p">.</span><span class="nx">preferenciaNotificacion</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;sms&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CreadorNotificacionSMS</span><span class="p">(</span><span class="nx">usuario</span><span class="p">.</span><span class="nx">telefono</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CreadorNotificacionPush</span><span class="p">(</span><span class="nx">usuario</span><span class="p">.</span><span class="nx">deviceId</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Uso</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">usuario1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">nombre</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Juan&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;juan@ejemplo.com&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">preferenciaNotificacion</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;email&quot;</span>
<span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">usuario2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">nombre</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;María&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">telefono</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;+1234567890&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">preferenciaNotificacion</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;sms&quot;</span>
<span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">notificador1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">notificadorFactory</span><span class="p">(</span><span class="nx">usuario1</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">notificador2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">notificadorFactory</span><span class="p">(</span><span class="nx">usuario2</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">notificador1</span><span class="p">.</span><span class="nx">enviarNotificacion</span><span class="p">(</span><span class="s2">&quot;Nuevo mensaje&quot;</span><span class="p">));</span><span class="w"> </span>
<span class="c1">// &#39;Enviando correo a juan@ejemplo.com: Nuevo mensaje&#39;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">notificador2</span><span class="p">.</span><span class="nx">enviarNotificacion</span><span class="p">(</span><span class="s2">&quot;Nuevo mensaje&quot;</span><span class="p">));</span><span class="w"> </span>
<span class="c1">// &#39;Enviando SMS a +1234567890: Nuevo mensaje&#39;</span>
</pre></div>

<h3 id="33-observer-observador">3.3 Observer (Observador)</h3>
<p>Define una dependencia uno-a-muchos entre objetos, de modo que cuando un objeto cambia de estado, todos sus dependientes son notificados y actualizados automáticamente.</p>
<div class="highlight language-javascript"><pre><span></span><span class="c1">// Observable (Sujeto)</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Tienda</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">nombre</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nombre</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">observadores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">productos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">suscribir</span><span class="p">(</span><span class="nx">observador</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">observadores</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">observador</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">desuscribir</span><span class="p">(</span><span class="nx">observador</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">observadores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">observadores</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">obs</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">obs</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">observador</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">notificar</span><span class="p">(</span><span class="nx">datos</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">observador</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">observadores</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">observador</span><span class="p">.</span><span class="nx">actualizar</span><span class="p">(</span><span class="nx">datos</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">agregarProducto</span><span class="p">(</span><span class="nx">producto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">productos</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">producto</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">notificar</span><span class="p">({</span>
<span class="w">      </span><span class="nx">tienda</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="p">,</span>
<span class="w">      </span><span class="nx">evento</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;nuevo_producto&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">producto</span><span class="o">:</span><span class="w"> </span><span class="nx">producto</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">cambiarPrecio</span><span class="p">(</span><span class="nx">productoId</span><span class="p">,</span><span class="w"> </span><span class="nx">nuevoPrecio</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">producto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">productos</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">productoId</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">producto</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">precioAnterior</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">producto</span><span class="p">.</span><span class="nx">precio</span><span class="p">;</span>
<span class="w">      </span><span class="nx">producto</span><span class="p">.</span><span class="nx">precio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nuevoPrecio</span><span class="p">;</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">notificar</span><span class="p">({</span>
<span class="w">        </span><span class="nx">tienda</span><span class="o">:</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="p">,</span>
<span class="w">        </span><span class="nx">evento</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cambio_precio&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">producto</span><span class="o">:</span><span class="w"> </span><span class="nx">producto</span><span class="p">,</span>
<span class="w">        </span><span class="nx">precioAnterior</span><span class="o">:</span><span class="w"> </span><span class="nx">precioAnterior</span><span class="p">,</span>
<span class="w">        </span><span class="nx">precioNuevo</span><span class="o">:</span><span class="w"> </span><span class="nx">nuevoPrecio</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Interfaz Observer</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Observer</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="kr">constructor</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">Observer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Clase abstracta Observer no puede ser instanciada&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">actualizar</span><span class="p">(</span><span class="nx">datos</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Método abstracto actualizar() debe ser implementado&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Observadores concretos</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">ClienteObservador</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Observer</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">nombre</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">super</span><span class="p">();</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nombre</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">actualizar</span><span class="p">(</span><span class="nx">datos</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">datos</span><span class="p">.</span><span class="nx">evento</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;nuevo_producto&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Hola </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="si">}</span><span class="sb">, hay un nuevo producto en </span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">tienda</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">producto</span><span class="p">.</span><span class="nx">nombre</span><span class="si">}</span><span class="sb"> por $</span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">producto</span><span class="p">.</span><span class="nx">precio</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">datos</span><span class="p">.</span><span class="nx">evento</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;cambio_precio&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">datos</span><span class="p">.</span><span class="nx">precioNuevo</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">datos</span><span class="p">.</span><span class="nx">precioAnterior</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`¡</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="si">}</span><span class="sb">! El precio de </span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">producto</span><span class="p">.</span><span class="nx">nombre</span><span class="si">}</span><span class="sb"> en </span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">tienda</span><span class="si">}</span><span class="sb"> ha bajado de $</span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">precioAnterior</span><span class="si">}</span><span class="sb"> a $</span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">precioNuevo</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">ProveedorObservador</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Observer</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">nombreEmpresa</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">super</span><span class="p">();</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">nombreEmpresa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nombreEmpresa</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="w">  </span><span class="nx">actualizar</span><span class="p">(</span><span class="nx">datos</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">datos</span><span class="p">.</span><span class="nx">evento</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;nuevo_producto&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`[</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">nombreEmpresa</span><span class="si">}</span><span class="sb">] Nuevo producto agregado a </span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">tienda</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">producto</span><span class="p">.</span><span class="nx">nombre</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">datos</span><span class="p">.</span><span class="nx">evento</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;cambio_precio&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`[</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">nombreEmpresa</span><span class="si">}</span><span class="sb">] </span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">tienda</span><span class="si">}</span><span class="sb"> ha cambiado el precio de </span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">producto</span><span class="p">.</span><span class="nx">nombre</span><span class="si">}</span><span class="sb"> de $</span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">precioAnterior</span><span class="si">}</span><span class="sb"> a $</span><span class="si">${</span><span class="nx">datos</span><span class="p">.</span><span class="nx">precioNuevo</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Uso</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">tienda</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Tienda</span><span class="p">(</span><span class="s2">&quot;TechStore&quot;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">cliente1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ClienteObservador</span><span class="p">(</span><span class="s2">&quot;Ana&quot;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">cliente2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ClienteObservador</span><span class="p">(</span><span class="s2">&quot;Carlos&quot;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">proveedor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ProveedorObservador</span><span class="p">(</span><span class="s2">&quot;TechSupplies Inc&quot;</span><span class="p">);</span>

<span class="nx">tienda</span><span class="p">.</span><span class="nx">suscribir</span><span class="p">(</span><span class="nx">cliente1</span><span class="p">);</span>
<span class="nx">tienda</span><span class="p">.</span><span class="nx">suscribir</span><span class="p">(</span><span class="nx">cliente2</span><span class="p">);</span>
<span class="nx">tienda</span><span class="p">.</span><span class="nx">suscribir</span><span class="p">(</span><span class="nx">proveedor</span><span class="p">);</span>

<span class="c1">// Agregar un nuevo producto</span>
<span class="nx">tienda</span><span class="p">.</span><span class="nx">agregarProducto</span><span class="p">({</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="nx">nombre</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Smartphone XYZ&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">precio</span><span class="o">:</span><span class="w"> </span><span class="mf">599</span>
<span class="p">});</span>

<span class="c1">// Cambiar el precio (descuento)</span>
<span class="nx">tienda</span><span class="p">.</span><span class="nx">cambiarPrecio</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">499</span><span class="p">);</span>

<span class="c1">// Ana ya no quiere recibir notificaciones</span>
<span class="nx">tienda</span><span class="p">.</span><span class="nx">desuscribir</span><span class="p">(</span><span class="nx">cliente1</span><span class="p">);</span>

<span class="c1">// Otro cambio de precio</span>
<span class="nx">tienda</span><span class="p">.</span><span class="nx">cambiarPrecio</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">549</span><span class="p">);</span>
</pre></div></div>
</body>
</html>
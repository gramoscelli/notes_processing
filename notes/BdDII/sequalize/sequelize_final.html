<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>sequelize</title>



<style>.code-block-toggle:hover { background-color: #4a4a65; }
.code-block-content.collapsed::after { content: "..."; position: absolute; bottom: 0; left: 0; width: 100%; background: linear-gradient(transparent, #1a1a35); text-align: center; padding: 20px 0 5px 0; color: #f8f8f2; }
.toc a:hover { color: #f78e25; background-color: #e4f8f7; text-decoration: none; }</style><style>
    [data-block-id] { 
        transition: max-height 0.5s ease-out; 
        overflow: hidden; 
    }
    [data-block-id][data-collapsed="true"] { 
        max-height: 150px !important; 
        position: relative; 
        overflow: hidden; 
    }
    [data-block-id][data-collapsed="false"] {
        max-height: 100% !important;
        overflow: visible;
    }
    [data-block-id][data-collapsed="true"]::after { 
        content: "..."; 
        position: absolute; 
        bottom: 0; 
        left: 0; 
        width: 100%; 
        background: linear-gradient(transparent, #1a1a35); 
        text-align: center; 
        padding: 20px 0 5px 0; 
        color: #f8f8f2; 
    }
    button[data-target] {
        background-color: #3a3a55; 
        color: #f8f8f2; 
        border: none; 
        border-radius: 3px; 
        padding: 2px 8px; 
        cursor: pointer; 
        font-size: 0.85em;
    }
    button[data-target]:hover {
        background-color: #4a4a65;
    }
    div[style*="justify-content: flex-end"] {
        display: flex; 
        justify-content: flex-end; 
        background-color: #2a2a45; 
        color: #f8f8f2; 
        padding: 4px 8px; 
        font-family: monospace;
    }
    a[href^="#"] {
        display: block;
        transition: color 0.2s ease;
        text-decoration: none;
    }
    a[href^="#"]:hover {
        color: #f78e25;
        background-color: #e4f8f7;
        text-decoration: none;
    }
    </style></head>
<body style="font-family: Century Gothic, Arial, Helvetica, sans-serif; line-height: 1.5; margin: 0 auto; padding: 20px; color: #333; max-width: none">
<h1 id="sequelize-orm-para-bases-de-datos-relacionales" style="display: block; background-color: #333; color: #f78e25; font-size: 3em; padding: 20px; margin-top: 20px; margin-bottom: 25px; text-align: center; font-weight: bold; border-bottom: none; border-radius: 20px">Sequelize: ORM para bases de datos relacionales</h1>
<div id="table-of-contents" style="background-color: #e0e0ff; border-radius: 12px; padding: 20px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); margin: 30px 0; border: 1px solid #e9ecef">
<h2 id="contents-header" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px; text-align: center">Tabla de contenidos</h2>
<ul style="list-style: none; padding-left: 10px">
<li style="list-style: none; padding-left: 10px"><a href="#introduccion-a-orm" style="display: block; transition: color 0.2s ease; text-decoration: none">Introducción a ORM</a>
<ul style="list-style: none; padding-left: 10px">
<li style="list-style: none; padding-left: 10px"><a href="#ventajas-de-usar-un-orm" style="display: block; transition: color 0.2s ease; text-decoration: none">Ventajas de usar un ORM:</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#desventajas" style="display: block; transition: color 0.2s ease; text-decoration: none">Desventajas:</a></li>
</ul>
</li>
<li style="list-style: none; padding-left: 10px"><a href="#sequelize-orm-para-nodejs" style="display: block; transition: color 0.2s ease; text-decoration: none">Sequelize: ORM para Node.js</a>
<ul style="list-style: none; padding-left: 10px">
<li style="list-style: none; padding-left: 10px"><a href="#instalacion" style="display: block; transition: color 0.2s ease; text-decoration: none">Instalación</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#conexion-a-bases-de-datos-especificas" style="display: block; transition: color 0.2s ease; text-decoration: none">Conexión a Bases de Datos Específicas</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#conexion-a-mysql" style="display: block; transition: color 0.2s ease; text-decoration: none">Conexión a MySQL</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#conexion-a-sqlite" style="display: block; transition: color 0.2s ease; text-decoration: none">Conexión a SQLite</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#practicas-recomendadas-para-conexiones-a-bases-de-datos" style="display: block; transition: color 0.2s ease; text-decoration: none">Prácticas Recomendadas para Conexiones a Bases de Datos</a></li>
</ul>
</li>
<li style="list-style: none; padding-left: 10px"><a href="#definicion-de-modelos" style="display: block; transition: color 0.2s ease; text-decoration: none">Definición de Modelos</a>
<ul style="list-style: none; padding-left: 10px">
<li style="list-style: none; padding-left: 10px"><a href="#tipos-de-datos-comunes" style="display: block; transition: color 0.2s ease; text-decoration: none">Tipos de Datos Comunes</a></li>
</ul>
</li>
<li style="list-style: none; padding-left: 10px"><a href="#sincronizacion-con-la-base-de-datos" style="display: block; transition: color 0.2s ease; text-decoration: none">Sincronización con la Base de Datos</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#relaciones-entre-modelos" style="display: block; transition: color 0.2s ease; text-decoration: none">Relaciones entre Modelos</a>
<ul style="list-style: none; padding-left: 10px">
<li style="list-style: none; padding-left: 10px"><a href="#one-to-one-uno-a-uno" style="display: block; transition: color 0.2s ease; text-decoration: none">One-To-One (Uno a Uno)</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#one-to-many-uno-a-muchos" style="display: block; transition: color 0.2s ease; text-decoration: none">One-To-Many (Uno a Muchos)</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#many-to-many-muchos-a-muchos" style="display: block; transition: color 0.2s ease; text-decoration: none">Many-To-Many (Muchos a Muchos)</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#opciones-avanzadas-para-relaciones" style="display: block; transition: color 0.2s ease; text-decoration: none">Opciones Avanzadas para Relaciones</a></li>
</ul>
</li>
<li style="list-style: none; padding-left: 10px"><a href="#operaciones-crud" style="display: block; transition: color 0.2s ease; text-decoration: none">Operaciones CRUD</a>
<ul style="list-style: none; padding-left: 10px">
<li style="list-style: none; padding-left: 10px"><a href="#create-crear" style="display: block; transition: color 0.2s ease; text-decoration: none">Create (Crear)</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#read-leer" style="display: block; transition: color 0.2s ease; text-decoration: none">Read (Leer)</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#update-actualizar" style="display: block; transition: color 0.2s ease; text-decoration: none">Update (Actualizar)</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#delete-eliminar" style="display: block; transition: color 0.2s ease; text-decoration: none">Delete (Eliminar)</a></li>
</ul>
</li>
<li style="list-style: none; padding-left: 10px"><a href="#consultas-avanzadas" style="display: block; transition: color 0.2s ease; text-decoration: none">Consultas Avanzadas</a>
<ul style="list-style: none; padding-left: 10px">
<li style="list-style: none; padding-left: 10px"><a href="#operadores-comunes" style="display: block; transition: color 0.2s ease; text-decoration: none">Operadores Comunes</a></li>
</ul>
</li>
<li style="list-style: none; padding-left: 10px"><a href="#transacciones" style="display: block; transition: color 0.2s ease; text-decoration: none">Transacciones</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#hooks-ganchos" style="display: block; transition: color 0.2s ease; text-decoration: none">Hooks (Ganchos)</a>
<ul style="list-style: none; padding-left: 10px">
<li style="list-style: none; padding-left: 10px"><a href="#implementacion-de-hooks" style="display: block; transition: color 0.2s ease; text-decoration: none">Implementación de Hooks</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#casos-de-uso-comunes-para-hooks" style="display: block; transition: color 0.2s ease; text-decoration: none">Casos de uso comunes para hooks</a></li>
</ul>
</li>
<li style="list-style: none; padding-left: 10px"><a href="#migraciones" style="display: block; transition: color 0.2s ease; text-decoration: none">Migraciones</a>
<ul style="list-style: none; padding-left: 10px">
<li style="list-style: none; padding-left: 10px"><a href="#estructura-de-un-archivo-de-migracion" style="display: block; transition: color 0.2s ease; text-decoration: none">Estructura de un Archivo de Migración</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#ejecutar-migraciones" style="display: block; transition: color 0.2s ease; text-decoration: none">Ejecutar Migraciones</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#operaciones-comunes-en-migraciones" style="display: block; transition: color 0.2s ease; text-decoration: none">Operaciones Comunes en Migraciones</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#semillas-seeds" style="display: block; transition: color 0.2s ease; text-decoration: none">Semillas (Seeds)</a></li>
</ul>
</li>
<li style="list-style: none; padding-left: 10px"><a href="#arquitectura-de-una-aplicacion-con-sequelize" style="display: block; transition: color 0.2s ease; text-decoration: none">Arquitectura de una Aplicación con Sequelize</a>
<ul style="list-style: none; padding-left: 10px">
<li style="list-style: none; padding-left: 10px"><a href="#estructura-de-carpetas-recomendada" style="display: block; transition: color 0.2s ease; text-decoration: none">Estructura de Carpetas Recomendada</a></li>
</ul>
</li>
<li style="list-style: none; padding-left: 10px"><a href="#generacion-de-codigo-con-sequelize-cli" style="display: block; transition: color 0.2s ease; text-decoration: none">Generación de Código con Sequelize CLI</a>
<ul style="list-style: none; padding-left: 10px">
<li style="list-style: none; padding-left: 10px"><a href="#instalacion-de-sequelize-cli" style="display: block; transition: color 0.2s ease; text-decoration: none">Instalación de Sequelize CLI</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#generacion-de-modelos-y-migraciones" style="display: block; transition: color 0.2s ease; text-decoration: none">Generación de Modelos y Migraciones</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#generacion-de-seeders" style="display: block; transition: color 0.2s ease; text-decoration: none">Generación de Seeders</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#estructura-del-archivo-generado" style="display: block; transition: color 0.2s ease; text-decoration: none">Estructura del Archivo Generado</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#completando-el-seeder" style="display: block; transition: color 0.2s ease; text-decoration: none">Completando el Seeder</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#configuracion-en-packagejson" style="display: block; transition: color 0.2s ease; text-decoration: none">Configuración en package.json</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#herramientas-de-terceros" style="display: block; transition: color 0.2s ease; text-decoration: none">Herramientas de Terceros</a></li>
</ul>
</li>
<li style="list-style: none; padding-left: 10px"><a href="#flujo-de-datos" style="display: block; transition: color 0.2s ease; text-decoration: none">Flujo de Datos</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#patrones-de-diseno-comunes" style="display: block; transition: color 0.2s ease; text-decoration: none">Patrones de Diseño Comunes</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#buenas-practicas" style="display: block; transition: color 0.2s ease; text-decoration: none">Buenas Prácticas</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#implementacion-en-una-aplicacion-express" style="display: block; transition: color 0.2s ease; text-decoration: none">Implementación en una Aplicación Express</a>
<ul style="list-style: none; padding-left: 10px">
<li style="list-style: none; padding-left: 10px"><a href="#configuracion-de-la-base-de-datos-configdatabasejs" style="display: block; transition: color 0.2s ease; text-decoration: none">Configuración de la Base de Datos (config/database.js)</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#modelo-de-cliente-modelsclientjs" style="display: block; transition: color 0.2s ease; text-decoration: none">Modelo de Cliente (models/client.js)</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#indice-de-modelos-modelsindexjs" style="display: block; transition: color 0.2s ease; text-decoration: none">Índice de Modelos (models/index.js)</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#controlador-de-clientes-controllersclientcontrollerjs" style="display: block; transition: color 0.2s ease; text-decoration: none">Controlador de Clientes (controllers/clientController.js)</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#rutas-para-clientes-routesclientroutesjs" style="display: block; transition: color 0.2s ease; text-decoration: none">Rutas para Clientes (routes/clientRoutes.js)</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#aplicacion-express-appjs" style="display: block; transition: color 0.2s ease; text-decoration: none">Aplicación Express (app.js)</a></li>
</ul>
</li>
<li style="list-style: none; padding-left: 10px"><a href="#conclusion" style="display: block; transition: color 0.2s ease; text-decoration: none">Conclusión</a></li>
<li style="list-style: none; padding-left: 10px"><a href="#recursos-adicionales" style="display: block; transition: color 0.2s ease; text-decoration: none">Recursos Adicionales</a></li>
</ul>
</div>
<h2 id="introduccion-a-orm" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Introducción a ORM</h2>
<p>Un <strong>ORM (Object-Relational Mapping)</strong> es una técnica de programación que permite convertir datos entre sistemas de tipos incompatibles en lenguajes de programación orientados a objetos. En términos simples, un ORM permite a los desarrolladores trabajar con bases de datos relacionales utilizando objetos de programación, eliminando la necesidad de escribir consultas SQL directamente.</p>
<p><a href="https://sequelize.org/docs/v6/">Documentación oficial de Sequelize versión 6</a></p>
<h3 id="ventajas-de-usar-un-orm" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Ventajas de usar un ORM:</h3>
<ul>
<li><strong>Abstracción de la base de datos</strong>: Permite cambiar el motor de base de datos con cambios mínimos en el código.</li>
<li><strong>Seguridad</strong>: Ayuda a prevenir ataques de inyección SQL.</li>
<li><strong>Productividad</strong>: Reduce el código repetitivo y acelera el desarrollo.</li>
<li><strong>Mantenibilidad</strong>: El código es más limpio y fácil de mantener.</li>
<li><strong>Mapeo de objetos</strong>: Conversión automática entre tipos de datos de la base de datos y del lenguaje de programación.</li>
</ul>
<h3 id="desventajas" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Desventajas:</h3>
<ul>
<li><strong>Rendimiento</strong>: Puede ser menos eficiente que SQL optimizado manualmente.</li>
<li><strong>Curva de aprendizaje</strong>: Requiere tiempo para dominar el ORM específico.</li>
<li><strong>Complejidad</strong>: Algunas consultas complejas pueden ser difíciles de expresar a través del ORM.</li>
</ul>
<h2 id="sequelize-orm-para-nodejs" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Sequelize: ORM para Node.js</h2>
<p><strong>Sequelize</strong> es un ORM basado en promesas para Node.js que soporta PostgreSQL, MySQL, SQLite y MSSQL. Proporciona una abstracción sólida de la base de datos y facilita tareas comunes como la migración de esquemas y la validación de datos.</p>
<h3 id="instalacion" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Instalación</h3>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4"># Instalación básica</span>
npm install sequelize

<span style="color: #6272a4"># Instalar el driver para la base de datos</span>
npm install pg pg-hstore <span style="color: #6272a4"># PostgreSQL</span>
npm install mysql2       <span style="color: #6272a4"># MySQL</span>
npm install sqlite3      <span style="color: #6272a4"># SQLite</span>
npm install tedious      <span style="color: #6272a4"># Microsoft SQL Server</span>
</pre></div>
<h3 id="conexion-a-bases-de-datos-especificas" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Conexión a Bases de Datos Específicas</h3>
<h3 id="conexion-a-mysql" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Conexión a MySQL</h3>
<p>MySQL es uno de los sistemas de gestión de bases de datos relacionales más populares. Para conectarse a una base de datos MySQL con Sequelize, debes seguir estos pasos:</p>
<ol>
<li><strong>Instalar los paquetes necesarios</strong>:</li>
</ol>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span>npm install sequelize mysql2
</pre></div>
<ol start="2">
<li><strong>Configurar la conexión</strong>:</li>
</ol>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-0" onclick="toggleCodeBlock('content-0')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-0" data-collapsed="true" data-height="auto" id="code-block-2" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">Sequelize</span> <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'sequelize'</span><span style="color: #f8f8f2">);</span>

<span style="color: #6272a4">// Opción 1: Parámetros separados</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'nombre_db'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'usuario'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'contraseña'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">host</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'localhost'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'mysql'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">port</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">3306</span><span style="color: #f8f8f2">,</span> <span style="color: #6272a4">// Puerto por defecto de MySQL</span>
  <span style="color: #f8f8f2">pool</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">max</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">5</span><span style="color: #f8f8f2">,</span>       <span style="color: #6272a4">// Máximo número de conexiones en el pool</span>
    <span style="color: #f8f8f2">min</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">0</span><span style="color: #f8f8f2">,</span>       <span style="color: #6272a4">// Mínimo número de conexiones en el pool</span>
    <span style="color: #f8f8f2">acquire</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">30000</span><span style="color: #f8f8f2">,</span> <span style="color: #6272a4">// Tiempo máximo (ms) para adquirir una conexión</span>
    <span style="color: #f8f8f2">idle</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">10000</span>   <span style="color: #6272a4">// Tiempo máximo (ms) que una conexión puede estar inactiva</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">timezone</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'+00:00'</span> <span style="color: #6272a4">// Establecer zona horaria UTC (ajustar según necesidades)</span>
<span style="color: #f8f8f2">});</span>

<span style="color: #6272a4">// Opción 2: URI de conexión</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'mysql://usuario:contraseña@localhost:3306/nombre_db'</span><span style="color: #f8f8f2">);</span>
</pre></div>
</div>
</div>
<ol start="3">
<li><strong>Verificar la conexión</strong>:</li>
</ol>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span> <span style="color: #f8f8f2">testMySQLConnection</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">authenticate</span><span style="color: #f8f8f2">();</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Conexión a MySQL establecida correctamente.'</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Error al conectar con MySQL:'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">testMySQLConnection</span><span style="color: #f8f8f2">();</span>
</pre></div>
<ol start="4">
<li><strong>Opciones específicas para MySQL</strong>:</li>
</ol>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-1" onclick="toggleCodeBlock('content-1')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-1" data-collapsed="true" data-height="auto" id="code-block-4" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'nombre_db'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'usuario'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'contraseña'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">host</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'localhost'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'mysql'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">dialectOptions</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">charset</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'utf8mb4'</span><span style="color: #f8f8f2">,</span> <span style="color: #6272a4">// Soporte para caracteres especiales y emojis</span>
    <span style="color: #f8f8f2">collate</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'utf8mb4_unicode_ci'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #6272a4">// Para conexiones SSL:</span>
    <span style="color: #f8f8f2">ssl</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">key</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">fs</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">readFileSync</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'./client-key.pem'</span><span style="color: #f8f8f2">),</span>
      <span style="color: #f8f8f2">cert</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">fs</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">readFileSync</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'./client-cert.pem'</span><span style="color: #f8f8f2">),</span>
      <span style="color: #f8f8f2">ca</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">fs</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">readFileSync</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'./ca-cert.pem'</span><span style="color: #f8f8f2">),</span>
      <span style="color: #f8f8f2">rejectUnauthorized</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span>
    <span style="color: #f8f8f2">},</span>
    <span style="color: #6272a4">// Opciones para consultas</span>
    <span style="color: #f8f8f2">multipleStatements</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span><span style="color: #f8f8f2">,</span> <span style="color: #6272a4">// Permitir múltiples consultas en una sola sentencia</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
</div>
</div>
<h3 id="conexion-a-sqlite" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Conexión a SQLite</h3>
<p>SQLite es una base de datos SQL contenida en un único archivo, lo que la hace ideal para desarrollo, pruebas o aplicaciones pequeñas. Para usar SQLite con Sequelize:</p>
<ol>
<li><strong>Instalar los paquetes necesarios</strong>:</li>
</ol>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span>npm install sequelize sqlite3
</pre></div>
<ol start="2">
<li><strong>Configurar la conexión</strong>:</li>
</ol>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-2" onclick="toggleCodeBlock('content-2')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-2" data-collapsed="true" data-height="auto" id="code-block-6" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">Sequelize</span> <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'sequelize'</span><span style="color: #f8f8f2">);</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">path</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'path'</span><span style="color: #f8f8f2">);</span>

<span style="color: #6272a4">// Opción 1: Conexión a un archivo SQLite</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">({</span>
  <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'sqlite'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">storage</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">path</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">join</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">__dirname</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'database.sqlite'</span><span style="color: #f8f8f2">),</span> <span style="color: #6272a4">// Ruta al archivo</span>
  <span style="color: #f8f8f2">logging</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">,</span> <span style="color: #6272a4">// Opcional: para ver las consultas SQL</span>
<span style="color: #f8f8f2">});</span>

<span style="color: #6272a4">// Opción 2: SQLite en memoria (útil para pruebas)</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelizeMemory</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'sqlite::memory:'</span><span style="color: #f8f8f2">);</span>
</pre></div>
</div>
</div>
<ol start="3">
<li><strong>Verificar la conexión</strong>:</li>
</ol>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span> <span style="color: #f8f8f2">testSQLiteConnection</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">authenticate</span><span style="color: #f8f8f2">();</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Conexión a SQLite establecida correctamente.'</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Error al conectar con SQLite:'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">testSQLiteConnection</span><span style="color: #f8f8f2">();</span>
</pre></div>
<ol start="4">
<li><strong>Opciones adicionales para SQLite</strong>:</li>
</ol>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">({</span>
  <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'sqlite'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">storage</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'./database.sqlite'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">dialectOptions</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #6272a4">// Opciones específicas para SQLite</span>
    <span style="color: #f8f8f2">mode</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">sqlite3</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">OPEN_READWRITE</span> <span style="color: #ff79c6">|</span> <span style="color: #f8f8f2">sqlite3</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">OPEN_CREATE</span><span style="color: #f8f8f2">,</span> <span style="color: #6272a4">// Modo de apertura</span>
    <span style="color: #f8f8f2">timeout</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">30000</span><span style="color: #f8f8f2">,</span> <span style="color: #6272a4">// Tiempo de espera en ms para operaciones ocupadas</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
<h3 id="practicas-recomendadas-para-conexiones-a-bases-de-datos" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Prácticas Recomendadas para Conexiones a Bases de Datos</h3>
<ol>
<li><strong>Variables de entorno</strong>: Almacena las credenciales de conexión en variables de entorno y no en el código.</li>
</ol>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-3" onclick="toggleCodeBlock('content-3')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-3" data-collapsed="true" data-height="auto" id="code-block-9" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// Usando dotenv para cargar variables de entorno desde un archivo .env</span>
<span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'dotenv'</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">config</span><span style="color: #f8f8f2">();</span>

<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">(</span>
  <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_NAME</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_USER</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_PASSWORD</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">host</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_HOST</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_DIALECT</span> <span style="color: #6272a4">// 'mysql' o 'sqlite'</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">);</span>
</pre></div>
</div>
</div>
<ol start="2">
<li><strong>Conexiones por entorno</strong>: Configura conexiones diferentes según el entorno (desarrollo, pruebas, producción).</li>
</ol>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-4" onclick="toggleCodeBlock('content-4')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-4" data-collapsed="true" data-height="auto" id="code-block-10" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">env</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">NODE_ENV</span> <span style="color: #ff79c6">||</span> <span style="color: #bd93f9">'development'</span><span style="color: #f8f8f2">;</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">config</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">development</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'sqlite'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">storage</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'./dev-database.sqlite'</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">test</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'sqlite'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">storage</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">':memory:'</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">production</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'mysql'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">host</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_HOST</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">username</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_USER</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">password</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_PASSWORD</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">database</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_NAME</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">config</span><span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">]);</span>
</pre></div>
</div>
</div>
<ol start="3">
<li><strong>Manejo del pool de conexiones</strong>: Ajusta el pool de conexiones según las necesidades de tu aplicación.</li>
</ol>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// Para aplicaciones con alta carga (solo relevante para MySQL, no para SQLite)</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'nombre_db'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'usuario'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'contraseña'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'mysql'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">pool</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">max</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">20</span><span style="color: #f8f8f2">,</span> <span style="color: #6272a4">// Más conexiones para aplicaciones con mucho tráfico</span>
    <span style="color: #f8f8f2">min</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">5</span><span style="color: #f8f8f2">,</span>  <span style="color: #6272a4">// Mantener al menos 5 conexiones abiertas</span>
    <span style="color: #f8f8f2">acquire</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">60000</span><span style="color: #f8f8f2">,</span> <span style="color: #6272a4">// Tiempo más largo para adquirir conexión</span>
    <span style="color: #f8f8f2">idle</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">30000</span> <span style="color: #6272a4">// Más tiempo antes de cerrar conexiones inactivas</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
<ol start="4">
<li><strong>Registro (logging)</strong>: Configura el nivel de registro según tus necesidades.</li>
</ol>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-5" onclick="toggleCodeBlock('content-5')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-5" data-collapsed="true" data-height="auto" id="code-block-12" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// Registrar todas las consultas (desarrollo)</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'db'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'user'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'pass'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'mysql'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">logging</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span> <span style="color: #6272a4">// o logging: true</span>
<span style="color: #f8f8f2">});</span>

<span style="color: #6272a4">// Registrar consultas lentas (producción)</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'db'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'user'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'pass'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'mysql'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">logging</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">sql</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">timing</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">timing</span> <span style="color: #ff79c6">&amp;&amp;</span> <span style="color: #f8f8f2">timing</span> <span style="color: #ff79c6">&gt;</span> <span style="color: #ffb86c">1000</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span> <span style="color: #6272a4">// Solo registrar consultas que tomen más de 1 segundo</span>
      <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">warn</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">`Consulta lenta (</span><span style="color: #bd93f9">${</span><span style="color: #f8f8f2">timing</span><span style="color: #bd93f9">}</span><span style="color: #bd93f9">ms):`</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">sql</span><span style="color: #f8f8f2">);</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">benchmark</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span> <span style="color: #6272a4">// Habilitar medición de tiempo</span>
<span style="color: #f8f8f2">});</span>

<span style="color: #6272a4">// Desactivar registro (producción)</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'db'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'user'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'pass'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'mysql'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">logging</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
</div>
</div>
<p>Estas configuraciones te permitirán conectarte eficientemente a bases de datos MySQL y SQLite con Sequelize, ajustando los parámetros según tus necesidades específicas.</p>
<h2 id="definicion-de-modelos" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Definición de Modelos</h2>
<p>Los modelos en Sequelize representan tablas en la base de datos. </p>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-6" onclick="toggleCodeBlock('content-6')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-6" data-collapsed="true" data-height="auto" id="code-block-13" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">DataTypes</span> <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'sequelize'</span><span style="color: #f8f8f2">);</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">(</span><span style="color: #6272a4">/* ... */</span><span style="color: #f8f8f2">);</span>

<span style="color: #6272a4">// Definición de un modelo User</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">User</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">define</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'User'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #6272a4">// Definición de atributos</span>
  <span style="color: #f8f8f2">id</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">DataTypes</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">INTEGER</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">autoIncrement</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">primaryKey</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">firstName</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">DataTypes</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">STRING</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">allowNull</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">lastName</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">DataTypes</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">STRING</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">email</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">DataTypes</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">STRING</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">allowNull</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">unique</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">validate</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">isEmail</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">age</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">DataTypes</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">INTEGER</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">validate</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">min</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">0</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">isActive</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">DataTypes</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">BOOLEAN</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">defaultValue</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">},</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #6272a4">// Opciones del modelo</span>
  <span style="color: #f8f8f2">timestamps</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span><span style="color: #f8f8f2">,</span>      <span style="color: #6272a4">// Añade createdAt y updatedAt</span>
  <span style="color: #f8f8f2">tableName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'usuarios'</span><span style="color: #f8f8f2">,</span> <span style="color: #6272a4">// Nombre personalizado para la tabla</span>
  <span style="color: #f8f8f2">paranoid</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span>         <span style="color: #6272a4">// Soft delete (añade deletedAt)</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
</div>
</div>
<h3 id="tipos-de-datos-comunes" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Tipos de Datos Comunes</h3>
<p>Sequelize proporciona varios tipos de datos que corresponden a los tipos de datos de las bases de datos:</p>
<ul>
<li><code style='font-family: "Courier New", Courier, monospace'>DataTypes.STRING</code>: VARCHAR(255)</li>
<li><code style='font-family: "Courier New", Courier, monospace'>DataTypes.TEXT</code>: TEXT</li>
<li><code style='font-family: "Courier New", Courier, monospace'>DataTypes.INTEGER</code>: INTEGER</li>
<li><code style='font-family: "Courier New", Courier, monospace'>DataTypes.FLOAT</code>: FLOAT</li>
<li><code style='font-family: "Courier New", Courier, monospace'>DataTypes.BOOLEAN</code>: BOOLEAN/TINYINT</li>
<li><code style='font-family: "Courier New", Courier, monospace'>DataTypes.DATE</code>: DATETIME</li>
<li><code style='font-family: "Courier New", Courier, monospace'>DataTypes.DATEONLY</code>: DATE</li>
<li><code style='font-family: "Courier New", Courier, monospace'>DataTypes.UUID</code>: UUID</li>
<li><code style='font-family: "Courier New", Courier, monospace'>DataTypes.JSON</code>: JSON (PostgreSQL, MySQL)</li>
<li><code style='font-family: "Courier New", Courier, monospace'>DataTypes.ARRAY</code>: ARRAY (PostgreSQL)</li>
</ul>
<h2 id="sincronizacion-con-la-base-de-datos" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Sincronización con la Base de Datos</h2>
<p>Una vez definidos los modelos, es necesario sincronizarlos con la base de datos:</p>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-7" onclick="toggleCodeBlock('content-7')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-7" data-collapsed="true" data-height="auto" id="code-block-14" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// Sincronizar todos los modelos</span>
<span style="color: #6272a4">// force: true -&gt; Elimina y recrea las tablas (¡cuidado en producción!)</span>
<span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">sync</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">force</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span> <span style="color: #f8f8f2">})</span>
  <span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">then</span><span style="color: #f8f8f2">(()</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Modelos sincronizados con la base de datos'</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">});</span>

<span style="color: #6272a4">// Sincronizar un modelo específico</span>
<span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">sync</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">alter</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span> <span style="color: #f8f8f2">})</span> <span style="color: #6272a4">// alter: true -&gt; Actualiza la tabla si existe</span>
  <span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">then</span><span style="color: #f8f8f2">(()</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Modelo User sincronizado'</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">});</span>
</pre></div>
</div>
</div>
<h2 id="relaciones-entre-modelos" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Relaciones entre Modelos</h2>
<p>Sequelize soporta los tipos estándar de asociaciones. Estas relaciones son fundamentales para modelar correctamente la estructura de datos.</p>
<p><img alt="Diagrama entidad-relación de una aplicación compleja" src="E-r_Diagram.jpg" style="max-width: 100%; height: auto"/></p>
<h3 id="one-to-one-uno-a-uno" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">One-To-One (Uno a Uno)</h3>
<p>Una relación uno a uno significa que un registro en la tabla A tiene exactamente un registro correspondiente en la tabla B.</p>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">User</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">define</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'User'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span> <span style="color: #6272a4">/* ... */</span> <span style="color: #f8f8f2">});</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">Profile</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">define</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Profile'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span> <span style="color: #6272a4">/* ... */</span> <span style="color: #f8f8f2">});</span>

<span style="color: #6272a4">// Un usuario tiene un perfil</span>
<span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">hasOne</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">Profile</span><span style="color: #f8f8f2">);</span>
<span style="color: #6272a4">// Un perfil pertenece a un usuario</span>
<span style="color: #f8f8f2">Profile</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">belongsTo</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">);</span>
</pre></div>
<p>En la base de datos, esto típicamente se implementa añadiendo una clave foránea <code style='font-family: "Courier New", Courier, monospace'>UserId</code> en la tabla <code style='font-family: "Courier New", Courier, monospace'>Profiles</code>.</p>
<p><a href="https://siddharth-lakhara.medium.com/understanding-sequelize-associations-part-1-one-to-one-1-1-mapping-897ce176caf9">Más sobre relaciones de uno-a-uno</a></p>
<h3 id="one-to-many-uno-a-muchos" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">One-To-Many (Uno a Muchos)</h3>
<p>Una relación uno a muchos significa que un registro en la tabla A puede tener múltiples registros correspondientes en la tabla B.</p>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">User</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">define</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'User'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span> <span style="color: #6272a4">/* ... */</span> <span style="color: #f8f8f2">});</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">Post</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">define</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Post'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span> <span style="color: #6272a4">/* ... */</span> <span style="color: #f8f8f2">});</span>

<span style="color: #6272a4">// Un usuario tiene muchos posts</span>
<span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">hasMany</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">Post</span><span style="color: #f8f8f2">);</span>
<span style="color: #6272a4">// Un post pertenece a un usuario</span>
<span style="color: #f8f8f2">Post</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">belongsTo</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">);</span>
</pre></div>
<p>En la base de datos, esto se implementa añadiendo una clave foránea <code style='font-family: "Courier New", Courier, monospace'>UserId</code> en la tabla <code style='font-family: "Courier New", Courier, monospace'>Posts</code>.</p>
<p><a href="https://siddharth-lakhara.medium.com/understanding-sequelize-associations-part-2-one-to-many-1-n-mapping-10a7d7929a5b">Más sobre relaciones de uno-a-muchos</a></p>
<h3 id="many-to-many-muchos-a-muchos" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Many-To-Many (Muchos a Muchos)</h3>
<p>Una relación muchos a muchos significa que un registro en la tabla A puede tener múltiples registros correspondientes en la tabla B, y viceversa.</p>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">Student</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">define</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Student'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span> <span style="color: #6272a4">/* ... */</span> <span style="color: #f8f8f2">});</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">Course</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">define</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Course'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span> <span style="color: #6272a4">/* ... */</span> <span style="color: #f8f8f2">});</span>

<span style="color: #6272a4">// Un estudiante puede estar en muchos cursos</span>
<span style="color: #f8f8f2">Student</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">belongsToMany</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">Course</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">through</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'StudentCourses'</span> <span style="color: #f8f8f2">});</span>
<span style="color: #6272a4">// Un curso puede tener muchos estudiantes</span>
<span style="color: #f8f8f2">Course</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">belongsToMany</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">Student</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">through</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'StudentCourses'</span> <span style="color: #f8f8f2">});</span>
</pre></div>
<p>En la base de datos, esto se implementa creando una tabla de unión (<code style='font-family: "Courier New", Courier, monospace'>StudentCourses</code>) que contiene claves foráneas para ambas tablas (<code style='font-family: "Courier New", Courier, monospace'>StudentId</code> y <code style='font-family: "Courier New", Courier, monospace'>CourseId</code>).</p>
<p><a href="https://siddharth-lakhara.medium.com/understanding-sequelize-associations-part-3-many-to-many-n-m-mapping-3e7dcdeb78db">Más sobre relaciones muchos-a-muchos</a></p>
<h3 id="opciones-avanzadas-para-relaciones" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Opciones Avanzadas para Relaciones</h3>
<h4 id="personalizacion-de-claves-foraneas" style="color: #333; font-size: 1.1em">Personalización de Claves Foráneas</h4>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">hasMany</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">Post</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">foreignKey</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'autorId'</span><span style="color: #f8f8f2">,</span> <span style="color: #6272a4">// Nombre personalizado para la clave foránea</span>
  <span style="color: #ff79c6">as</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'articulos'</span>        <span style="color: #6272a4">// Alias para la relación</span>
<span style="color: #f8f8f2">});</span>

<span style="color: #f8f8f2">Post</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">belongsTo</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">foreignKey</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'autorId'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #ff79c6">as</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'autor'</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
<h4 id="relaciones-con-scope" style="color: #333; font-size: 1.1em">Relaciones con Scope</h4>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// Todos los comentarios donde approved = true</span>
<span style="color: #f8f8f2">Post</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">hasMany</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">Comment</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">foreignKey</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'postId'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">scope</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">approved</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #ff79c6">as</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'approvedComments'</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
<h4 id="eliminacion-en-cascada" style="color: #333; font-size: 1.1em">Eliminación en Cascada</h4>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">hasMany</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">Post</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">onDelete</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'CASCADE'</span><span style="color: #f8f8f2">,</span>  <span style="color: #6272a4">// Eliminar posts cuando se elimina el usuario</span>
  <span style="color: #f8f8f2">onUpdate</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'CASCADE'</span>   <span style="color: #6272a4">// Actualizar posts cuando se actualiza el usuario</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
<h2 id="operaciones-crud" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Operaciones CRUD</h2>
<h3 id="create-crear" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Create (Crear)</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-8" onclick="toggleCodeBlock('content-8')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-8" data-collapsed="true" data-height="auto" id="code-block-21" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// Crear un registro</span>
<span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span> <span style="color: #f8f8f2">createUser</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">jane</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">create</span><span style="color: #f8f8f2">({</span>
      <span style="color: #f8f8f2">firstName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Jane'</span><span style="color: #f8f8f2">,</span>
      <span style="color: #f8f8f2">lastName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Doe'</span><span style="color: #f8f8f2">,</span>
      <span style="color: #f8f8f2">email</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'jane.doe@example.com'</span><span style="color: #f8f8f2">,</span>
      <span style="color: #f8f8f2">age</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">25</span>
    <span style="color: #f8f8f2">});</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Usuario creado:'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">jane</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">toJSON</span><span style="color: #f8f8f2">());</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Error al crear usuario:'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
</div>
</div>
<h3 id="read-leer" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Read (Leer)</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-9" onclick="toggleCodeBlock('content-9')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-9" data-collapsed="true" data-height="auto" id="code-block-22" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// Encontrar todos los registros</span>
<span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span> <span style="color: #f8f8f2">findAllUsers</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">users</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">findAll</span><span style="color: #f8f8f2">();</span>
  <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Todos los usuarios:'</span><span style="color: #f8f8f2">,</span> <span style="color: #8be9fd; font-style: italic">JSON</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">stringify</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">users</span><span style="color: #f8f8f2">,</span> <span style="color: #ff79c6">null</span><span style="color: #f8f8f2">,</span> <span style="color: #ffb86c">2</span><span style="color: #f8f8f2">));</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #6272a4">// Encontrar un registro por ID</span>
<span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span> <span style="color: #f8f8f2">findUserById</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">user</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">findByPk</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">);</span>
  <span style="color: #ff79c6">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">user</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Usuario encontrado:'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">user</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">toJSON</span><span style="color: #f8f8f2">());</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">else</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Usuario no encontrado'</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #6272a4">// Encontrar registros con condiciones</span>
<span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span> <span style="color: #f8f8f2">findUsersByCondition</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">users</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">findAll</span><span style="color: #f8f8f2">({</span>
    <span style="color: #f8f8f2">where</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">lastName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Doe'</span><span style="color: #f8f8f2">,</span>
      <span style="color: #f8f8f2">age</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">Op</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">gte</span><span style="color: #f8f8f2">]</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">18</span> <span style="color: #6272a4">// Operador mayor o igual que</span>
      <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">},</span>
    <span style="color: #f8f8f2">attributes</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">[</span><span style="color: #bd93f9">'id'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'firstName'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'email'</span><span style="color: #f8f8f2">],</span> <span style="color: #6272a4">// Seleccionar solo ciertos campos</span>
    <span style="color: #f8f8f2">order</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">[[</span><span style="color: #bd93f9">'createdAt'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'DESC'</span><span style="color: #f8f8f2">]],</span> <span style="color: #6272a4">// Ordenar por fecha de creación descendente</span>
    <span style="color: #f8f8f2">limit</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">10</span><span style="color: #f8f8f2">,</span> <span style="color: #6272a4">// Limitar a 10 resultados</span>
    <span style="color: #f8f8f2">offset</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">0</span>  <span style="color: #6272a4">// Comenzar desde el primer resultado</span>
  <span style="color: #f8f8f2">});</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
</div>
</div>
<h3 id="update-actualizar" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Update (Actualizar)</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-10" onclick="toggleCodeBlock('content-10')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-10" data-collapsed="true" data-height="auto" id="code-block-23" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// Actualizar un registro</span>
<span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span> <span style="color: #f8f8f2">updateUser</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">updatedRows</span><span style="color: #f8f8f2">]</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">update</span><span style="color: #f8f8f2">(</span>
    <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">lastName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Smith'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">age</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">26</span> <span style="color: #f8f8f2">},</span>
    <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">where</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">id</span> <span style="color: #f8f8f2">}</span> <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">`</span><span style="color: #bd93f9">${</span><span style="color: #f8f8f2">updatedRows</span><span style="color: #bd93f9">}</span><span style="color: #bd93f9"> filas actualizadas`</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #6272a4">// Actualizar o crear un registro</span>
<span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span> <span style="color: #f8f8f2">upsertUser</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">data</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">user</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">created</span><span style="color: #f8f8f2">]</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">upsert</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">data</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">created</span> <span style="color: #ff79c6">?</span> <span style="color: #bd93f9">'Usuario creado'</span> <span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Usuario actualizado'</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
</div>
</div>
<h3 id="delete-eliminar" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Delete (Eliminar)</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-11" onclick="toggleCodeBlock('content-11')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-11" data-collapsed="true" data-height="auto" id="code-block-24" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// Eliminar registros</span>
<span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span> <span style="color: #f8f8f2">deleteUser</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">deleted</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">destroy</span><span style="color: #f8f8f2">({</span>
    <span style="color: #f8f8f2">where</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">id</span> <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">});</span>
  <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">`</span><span style="color: #bd93f9">${</span><span style="color: #f8f8f2">deleted</span><span style="color: #bd93f9">}</span><span style="color: #bd93f9"> usuarios eliminados`</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #6272a4">// Restaurar registros eliminados (con paranoid: true)</span>
<span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span> <span style="color: #f8f8f2">restoreUser</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">restore</span><span style="color: #f8f8f2">({</span>
    <span style="color: #f8f8f2">where</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">id</span> <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">});</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
</div>
</div>
<h2 id="consultas-avanzadas" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Consultas Avanzadas</h2>
<p>Sequelize permite realizar consultas complejas con operadores y funciones:</p>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-12" onclick="toggleCodeBlock('content-12')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-12" data-collapsed="true" data-height="auto" id="code-block-25" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">Op</span> <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'sequelize'</span><span style="color: #f8f8f2">);</span>

<span style="color: #6272a4">// Consulta con operadores</span>
<span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span> <span style="color: #f8f8f2">advancedQuery</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">users</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">findAll</span><span style="color: #f8f8f2">({</span>
    <span style="color: #f8f8f2">where</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">Op</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">or</span><span style="color: #f8f8f2">]</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">[</span>
        <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">age</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">Op</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">lt</span><span style="color: #f8f8f2">]</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">18</span> <span style="color: #f8f8f2">}</span> <span style="color: #f8f8f2">},</span> <span style="color: #6272a4">// age &lt; 18</span>
        <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">age</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">Op</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">gt</span><span style="color: #f8f8f2">]</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">65</span> <span style="color: #f8f8f2">}</span> <span style="color: #f8f8f2">}</span>  <span style="color: #6272a4">// age &gt; 65</span>
      <span style="color: #f8f8f2">],</span>
      <span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">Op</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">and</span><span style="color: #f8f8f2">]</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">[</span>
        <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">isActive</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span> <span style="color: #f8f8f2">},</span>
        <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">email</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">Op</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">like</span><span style="color: #f8f8f2">]</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'%@example.com'</span> <span style="color: #f8f8f2">}</span> <span style="color: #f8f8f2">}</span>
      <span style="color: #f8f8f2">]</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">});</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
</div>
</div>
<h3 id="operadores-comunes" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Operadores Comunes</h3>
<ul>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.eq</code>: Igual a</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.ne</code>: No igual a</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.gt</code>: Mayor que</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.gte</code>: Mayor o igual que</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.lt</code>: Menor que</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.lte</code>: Menor o igual que</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.in</code>: En una lista</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.notIn</code>: No en una lista</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.like</code>: Como (con comodines)</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.notLike</code>: No como</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.between</code>: Entre dos valores</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.notBetween</code>: No entre dos valores</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.and</code>: Y lógico</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.or</code>: O lógico</li>
<li><code style='font-family: "Courier New", Courier, monospace'>Op.not</code>: Negación lógica</li>
</ul>
<h2 id="transacciones" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Transacciones</h2>
<p>Las transacciones garantizan que una serie de operaciones se completen con éxito o se reviertan todas:</p>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-13" onclick="toggleCodeBlock('content-13')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-13" data-collapsed="true" data-height="auto" id="code-block-26" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span> <span style="color: #f8f8f2">transferMoney</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">fromAccountId</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">toAccountId</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">amount</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #6272a4">// Iniciar transacción</span>
  <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">t</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">transaction</span><span style="color: #f8f8f2">();</span>

  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #6272a4">// Realizar operaciones dentro de la transacción</span>
    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">Account</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">decrement</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'balance'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">by</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">amount</span><span style="color: #f8f8f2">,</span>
      <span style="color: #f8f8f2">where</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">id</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">fromAccountId</span> <span style="color: #f8f8f2">},</span>
      <span style="color: #f8f8f2">transaction</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">t</span>
    <span style="color: #f8f8f2">});</span>

    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">Account</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">increment</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'balance'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">by</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">amount</span><span style="color: #f8f8f2">,</span>
      <span style="color: #f8f8f2">where</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">id</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">toAccountId</span> <span style="color: #f8f8f2">},</span>
      <span style="color: #f8f8f2">transaction</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">t</span>
    <span style="color: #f8f8f2">});</span>

    <span style="color: #6272a4">// Confirmar transacción</span>
    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">t</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">commit</span><span style="color: #f8f8f2">();</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Transferencia completada con éxito'</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #6272a4">// Revertir transacción en caso de error</span>
    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">t</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">rollback</span><span style="color: #f8f8f2">();</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Error en la transferencia:'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
</div>
</div>
<h2 id="hooks-ganchos" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Hooks (Ganchos)</h2>
<p>Los hooks permiten ejecutar funciones en determinados momentos del ciclo de vida de los modelos:</p>
<p><img alt="Ciclo de vida de los hooks de Sequalize" src="lifecicle.png" style="max-width: 100%; height: auto"/></p>
<p>En el diagrama anterior se muestra el flujo de ejecución de los hooks durante el ciclo de vida de un modelo. Cada operación (create, update, delete) pasa por una serie de hooks que se ejecutan en un orden específico.</p>
<h3 id="implementacion-de-hooks" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Implementación de Hooks</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-14" onclick="toggleCodeBlock('content-14')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-14" data-collapsed="true" data-height="auto" id="code-block-27" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">User</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">define</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'User'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #6272a4">// ...atributos</span>
<span style="color: #f8f8f2">},</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">hooks</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">beforeCreate</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">user</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #6272a4">// Hash de contraseña antes de crear</span>
      <span style="color: #ff79c6">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">user</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">password</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">user</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">password</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">bcrypt</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">hashSync</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">user</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">password</span><span style="color: #f8f8f2">,</span> <span style="color: #ffb86c">10</span><span style="color: #f8f8f2">);</span>
      <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">},</span>
    <span style="color: #f8f8f2">afterCreate</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">user</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">`Nuevo usuario creado: </span><span style="color: #bd93f9">${</span><span style="color: #f8f8f2">user</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">firstName</span><span style="color: #bd93f9">}</span><span style="color: #bd93f9">`</span><span style="color: #f8f8f2">);</span>
    <span style="color: #f8f8f2">},</span>
    <span style="color: #f8f8f2">beforeUpdate</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">user</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #6272a4">// Lógica antes de actualizar</span>
    <span style="color: #f8f8f2">},</span>
    <span style="color: #f8f8f2">afterDestroy</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">user</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #6272a4">// Lógica después de eliminar</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
</div>
</div>
<h3 id="casos-de-uso-comunes-para-hooks" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Casos de uso comunes para hooks</h3>
<ol>
<li><strong>Encriptación de contraseñas</strong>: Encriptar contraseñas antes de guardarlas</li>
<li><strong>Normalización de datos</strong>: Formatear datos (por ejemplo, convertir emails a minúsculas)</li>
<li><strong>Generación de slugs</strong>: Crear slugs para URLs amigables</li>
<li><strong>Registro de cambios</strong>: Mantener un historial de cambios</li>
<li><strong>Notificaciones</strong>: Enviar notificaciones después de ciertas operaciones</li>
<li><strong>Validación compleja</strong>: Realizar validaciones que no se pueden expresar con los validadores estándar</li>
</ol>
<h2 id="migraciones" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Migraciones</h2>
<p>Las migraciones permiten controlar los cambios en el esquema de la base de datos de manera ordenada y versionada.</p>
<h3 id="estructura-de-un-archivo-de-migracion" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Estructura de un Archivo de Migración</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-15" onclick="toggleCodeBlock('content-15')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-15" data-collapsed="true" data-height="auto" id="code-block-28" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #bd93f9">'use strict'</span><span style="color: #f8f8f2">;</span>

<span style="color: #f8f8f2">module</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">exports</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">up</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">createTable</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Users'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">id</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">allowNull</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">autoIncrement</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">primaryKey</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">INTEGER</span>
      <span style="color: #f8f8f2">},</span>
      <span style="color: #f8f8f2">firstName</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">STRING</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">allowNull</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span>
      <span style="color: #f8f8f2">},</span>
      <span style="color: #f8f8f2">lastName</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">STRING</span>
      <span style="color: #f8f8f2">},</span>
      <span style="color: #f8f8f2">email</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">STRING</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">allowNull</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">unique</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span>
      <span style="color: #f8f8f2">},</span>
      <span style="color: #f8f8f2">createdAt</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">allowNull</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DATE</span>
      <span style="color: #f8f8f2">},</span>
      <span style="color: #f8f8f2">updatedAt</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">allowNull</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DATE</span>
      <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">});</span>
  <span style="color: #f8f8f2">},</span>

  <span style="color: #f8f8f2">down</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">dropTable</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Users'</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>
</pre></div>
</div>
</div>
<h3 id="ejecutar-migraciones" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Ejecutar Migraciones</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-16" onclick="toggleCodeBlock('content-16')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-16" data-collapsed="true" data-height="auto" id="code-block-29" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4"># Aplicar todas las migraciones pendientes</span>
npx sequelize-cli db:migrate

<span style="color: #6272a4"># Revertir la última migración</span>
npx sequelize-cli db:migrate:undo

<span style="color: #6272a4"># Revertir todas las migraciones</span>
npx sequelize-cli db:migrate:undo:all

<span style="color: #6272a4"># Revertir hasta una migración específica</span>
npx sequelize-cli db:migrate:undo:all --to XXXXXXXXXXXXXX-create-users.js
</pre></div>
</div>
</div>
<h3 id="operaciones-comunes-en-migraciones" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Operaciones Comunes en Migraciones</h3>
<ol>
<li><strong>Crear tabla</strong>:</li>
</ol>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">createTable</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'TableName'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #6272a4">// definición de columnas</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
<ol start="2">
<li><strong>Modificar tabla</strong>:</li>
</ol>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-17" onclick="toggleCodeBlock('content-17')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-17" data-collapsed="true" data-height="auto" id="code-block-31" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// Añadir columna</span>
<span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">addColumn</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Users'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'phoneNumber'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">STRING</span>
<span style="color: #f8f8f2">});</span>

<span style="color: #6272a4">// Eliminar columna</span>
<span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">removeColumn</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Users'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'phoneNumber'</span><span style="color: #f8f8f2">);</span>

<span style="color: #6272a4">// Cambiar tipo de columna</span>
<span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">changeColumn</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Users'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'email'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">STRING</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">100</span><span style="color: #f8f8f2">),</span>
  <span style="color: #f8f8f2">allowNull</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">unique</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
</div>
</div>
<ol start="3">
<li><strong>Añadir índices</strong>:</li>
</ol>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">addIndex</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Users'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">[</span><span style="color: #bd93f9">'email'</span><span style="color: #f8f8f2">,</span> <span style="color: #bd93f9">'username'</span><span style="color: #f8f8f2">]);</span>
</pre></div>
<ol start="4">
<li><strong>Crear restricciones</strong>:</li>
</ol>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-18" onclick="toggleCodeBlock('content-18')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-18" data-collapsed="true" data-height="auto" id="code-block-33" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// Añadir clave foránea</span>
<span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">addConstraint</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Posts'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">fields</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">[</span><span style="color: #bd93f9">'userId'</span><span style="color: #f8f8f2">],</span>
  <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'foreign key'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">name</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'fk_posts_user'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">references</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">table</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Users'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">field</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'id'</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">onDelete</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'cascade'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">onUpdate</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'cascade'</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
</div>
</div>
<h3 id="semillas-seeds" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Semillas (Seeds)</h3>
<p>Las semillas permiten poblar la base de datos con datos iniciales o de prueba. Ejemplo de un archivo en la carpeta <code style='font-family: "Courier New", Courier, monospace'>seeders/</code>:</p>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-19" onclick="toggleCodeBlock('content-19')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-19" data-collapsed="true" data-height="auto" id="code-block-34" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #bd93f9">'use strict'</span><span style="color: #f8f8f2">;</span>

<span style="color: #f8f8f2">module</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">exports</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">up</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">bulkInsert</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Users'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">[</span>
      <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">firstName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'John'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">lastName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Doe'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">email</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'john@example.com'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">createdAt</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">new</span> <span style="color: #8be9fd; font-style: italic">Date</span><span style="color: #f8f8f2">(),</span>
        <span style="color: #f8f8f2">updatedAt</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">new</span> <span style="color: #8be9fd; font-style: italic">Date</span><span style="color: #f8f8f2">()</span>
      <span style="color: #f8f8f2">},</span>
      <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">firstName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Jane'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">lastName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Doe'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">email</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'jane@example.com'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">createdAt</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">new</span> <span style="color: #8be9fd; font-style: italic">Date</span><span style="color: #f8f8f2">(),</span>
        <span style="color: #f8f8f2">updatedAt</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">new</span> <span style="color: #8be9fd; font-style: italic">Date</span><span style="color: #f8f8f2">()</span>
      <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">]);</span>
  <span style="color: #f8f8f2">},</span>

  <span style="color: #f8f8f2">down</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">bulkDelete</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Users'</span><span style="color: #f8f8f2">,</span> <span style="color: #ff79c6">null</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{});</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>
</pre></div>
</div>
</div>
<p>Para ejecutar las semillas:</p>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4"># Ejecutar todas las semillas</span>
npx sequelize-cli db:seed:all

<span style="color: #6272a4"># Revertir todas las semillas</span>
npx sequelize-cli db:seed:undo:all
</pre></div>
<h2 id="arquitectura-de-una-aplicacion-con-sequelize" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Arquitectura de una Aplicación con Sequelize</h2>
<p>Una arquitectura bien diseñada es fundamental para construir aplicaciones escalables y mantenibles con Sequelize. A continuación se muestra cómo se estructura típicamente una aplicación con Sequelize siguiendo patrones MVC (Modelo-Vista-Controlador).</p>
<h3 id="estructura-de-carpetas-recomendada" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Estructura de Carpetas Recomendada</h3>
<p>La siguiente estructura de carpetas es una forma organizada de implementar Sequelize en una aplicación Express:</p>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-20" onclick="toggleCodeBlock('content-20')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-20" data-collapsed="true" data-height="auto" id="code-block-36" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span>proyecto/
├── config/                  # Configuraciones
│   ├── database.js          # Configuración de la base de datos
│   └── config.json          # Configuraciones por entorno
├── migrations/              # Migraciones de la base de datos
├── models/                  # Definición de modelos
│   ├── index.js             # Exporta todos los modelos
│   ├── user.js              # Modelo de Usuario
│   └── product.js           # Modelo de Producto
├── seeders/                 # Datos iniciales (semillas)
├── controllers/             # Controladores de la aplicación
│   ├── userController.js    # Controlador para usuarios
│   └── productController.js # Controlador para productos
├── routes/                  # Rutas de la API
│   ├── userRoutes.js        # Rutas para usuarios
│   └── productRoutes.js     # Rutas para productos
├── middlewares/             # Middlewares personalizados
├── services/                # Lógica de negocio
├── utils/                   # Utilidades
└── app.js                   # Punto de entrada
</pre></div>
</div>
</div>
<h2 id="generacion-de-codigo-con-sequelize-cli" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Generación de Código con Sequelize CLI</h2>
<p>Sequelize ofrece herramientas para generar automáticamente código a través de su CLI. Esta funcionalidad puede mejorar significativamente la productividad del desarrollador.</p>
<h3 id="instalacion-de-sequelize-cli" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Instalación de Sequelize CLI</h3>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4"># Instalación global</span>
npm install -g sequelize-cli

<span style="color: #6272a4"># Instalación local (recomendada)</span>
npm install --save-dev sequelize-cli
</pre></div>
<h3 id="generacion-de-modelos-y-migraciones" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Generación de Modelos y Migraciones</h3>
<p>Sequelize CLI permite generar un modelo junto con su migración correspondiente en un solo comando:</p>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4"># Generar modelo y migración</span>
npx sequelize-cli model:generate --name User --attributes firstName:string,lastName:string,email:string
</pre></div>
<p>Este comando creará:</p>
<ol>
<li>Un archivo de modelo en <code style='font-family: "Courier New", Courier, monospace'>models/user.js</code></li>
<li>Un archivo de migración en <code style='font-family: "Courier New", Courier, monospace'>migrations/XXXXXXXXXXXXXX-create-user.js</code></li>
</ol>
<p>La migración incluirá automáticamente los campos especificados en <code style='font-family: "Courier New", Courier, monospace'>--attributes</code>, además de <code style='font-family: "Courier New", Courier, monospace'>id</code>, <code style='font-family: "Courier New", Courier, monospace'>createdAt</code> y <code style='font-family: "Courier New", Courier, monospace'>updatedAt</code>.</p>
<h3 id="generacion-de-seeders" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Generación de Seeders</h3>
<p>Sequelize CLI proporciona un comando simple para generar un nuevo archivo seeder:</p>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4"># Generar un seeder</span>
npx sequelize-cli seed:generate --name demo-users
</pre></div>
<p>Este comando crea un nuevo archivo JavaScript en la carpeta <code style='font-family: "Courier New", Courier, monospace'>seeders/</code> del proyecto. El nombre del archivo tendrá el formato:
<code style='font-family: "Courier New", Courier, monospace'>YYYYMMDDHHMMSS-demo-users.js</code> (donde YYYYMMDDHHMMSS es la fecha y hora de creación).</p>
<p>Por ejemplo: <code style='font-family: "Courier New", Courier, monospace'>20250514123456-demo-users.js</code></p>
<h3 id="estructura-del-archivo-generado" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Estructura del Archivo Generado</h3>
<p>Al ejecutar el comando, Sequelize generará un archivo con esta estructura básica:</p>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-21" onclick="toggleCodeBlock('content-21')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-21" data-collapsed="true" data-height="auto" id="code-block-40" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #bd93f9">'use strict'</span><span style="color: #f8f8f2">;</span>

<span style="color: #f8f8f2">module</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">exports</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">up</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #6272a4">/**</span>
<span style="color: #6272a4">     * Add seed commands here.</span>
<span style="color: #6272a4">     *</span>
<span style="color: #6272a4">     * Example:</span>
<span style="color: #6272a4">     * await queryInterface.bulkInsert('People', [{</span>
<span style="color: #6272a4">     *   name: 'John Doe',</span>
<span style="color: #6272a4">     *   isBetaMember: false</span>
<span style="color: #6272a4">     * }], {});</span>
<span style="color: #6272a4">    */</span>
  <span style="color: #f8f8f2">},</span>

  <span style="color: #f8f8f2">down</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #6272a4">/**</span>
<span style="color: #6272a4">     * Add commands to revert seed here.</span>
<span style="color: #6272a4">     *</span>
<span style="color: #6272a4">     * Example:</span>
<span style="color: #6272a4">     * await queryInterface.bulkDelete('People', null, {});</span>
<span style="color: #6272a4">     */</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>
</pre></div>
</div>
</div>
<p>Este archivo contiene dos funciones principales:</p>
<ol>
<li><strong>up</strong>: Contiene el código para añadir datos a la base de datos.</li>
<li><strong>down</strong>: Contiene el código para revertir los cambios (eliminar los datos añadidos).</li>
</ol>
<h3 id="completando-el-seeder" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Completando el Seeder</h3>
<p>Para que el seeder funcione, debes editar el archivo para incluir tus propios datos. Un ejemplo completo sería:</p>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-22" onclick="toggleCodeBlock('content-22')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-22" data-collapsed="true" data-height="auto" id="code-block-41" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #bd93f9">'use strict'</span><span style="color: #f8f8f2">;</span>

<span style="color: #f8f8f2">module</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">exports</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">up</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">bulkInsert</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Users'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">[</span>
      <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">firstName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'John'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">lastName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Doe'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">email</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'john@example.com'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">role</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'user'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">createdAt</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">new</span> <span style="color: #8be9fd; font-style: italic">Date</span><span style="color: #f8f8f2">(),</span>
        <span style="color: #f8f8f2">updatedAt</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">new</span> <span style="color: #8be9fd; font-style: italic">Date</span><span style="color: #f8f8f2">()</span>
      <span style="color: #f8f8f2">},</span>
      <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">firstName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Jane'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">lastName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Smith'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">email</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'jane@example.com'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">role</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'user'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">createdAt</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">new</span> <span style="color: #8be9fd; font-style: italic">Date</span><span style="color: #f8f8f2">(),</span>
        <span style="color: #f8f8f2">updatedAt</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">new</span> <span style="color: #8be9fd; font-style: italic">Date</span><span style="color: #f8f8f2">()</span>
      <span style="color: #f8f8f2">},</span>
      <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">firstName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Admin'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">lastName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'User'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">email</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'admin@example.com'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">role</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'admin'</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">createdAt</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">new</span> <span style="color: #8be9fd; font-style: italic">Date</span><span style="color: #f8f8f2">(),</span>
        <span style="color: #f8f8f2">updatedAt</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">new</span> <span style="color: #8be9fd; font-style: italic">Date</span><span style="color: #f8f8f2">()</span>
      <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">]);</span>
  <span style="color: #f8f8f2">},</span>

  <span style="color: #f8f8f2">down</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">queryInterface</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">bulkDelete</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Users'</span><span style="color: #f8f8f2">,</span> <span style="color: #ff79c6">null</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{});</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>
</pre></div>
</div>
</div>
<h3 id="configuracion-en-packagejson" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Configuración en package.json</h3>
<p>Para facilitar el uso, podemos añadir estos scripts a nuestro <code style='font-family: "Courier New", Courier, monospace'>package.json</code>:</p>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #f8f8f2">{</span><span style="color: #f8f8f2"></span>
<span style="color: #f8f8f2">  </span><span style="color: #ff79c6">"scripts"</span><span style="color: #f8f8f2">:</span><span style="color: #f8f8f2"> </span><span style="color: #f8f8f2">{</span><span style="color: #f8f8f2"></span>
<span style="color: #f8f8f2">    </span><span style="color: #ff79c6">"migrate"</span><span style="color: #f8f8f2">:</span><span style="color: #f8f8f2"> </span><span style="color: #bd93f9">"sequelize-cli db:migrate"</span><span style="color: #f8f8f2">,</span><span style="color: #f8f8f2"></span>
<span style="color: #f8f8f2">    </span><span style="color: #ff79c6">"migrate:undo"</span><span style="color: #f8f8f2">:</span><span style="color: #f8f8f2"> </span><span style="color: #bd93f9">"sequelize-cli db:migrate:undo"</span><span style="color: #f8f8f2">,</span><span style="color: #f8f8f2"></span>
<span style="color: #f8f8f2">    </span><span style="color: #ff79c6">"seed"</span><span style="color: #f8f8f2">:</span><span style="color: #f8f8f2"> </span><span style="color: #bd93f9">"sequelize-cli db:seed:all"</span><span style="color: #f8f8f2">,</span><span style="color: #f8f8f2"></span>
<span style="color: #f8f8f2">    </span><span style="color: #ff79c6">"seed:undo"</span><span style="color: #f8f8f2">:</span><span style="color: #f8f8f2"> </span><span style="color: #bd93f9">"sequelize-cli db:seed:undo:all"</span><span style="color: #f8f8f2"></span>
<span style="color: #f8f8f2">  </span><span style="color: #f8f8f2">}</span><span style="color: #f8f8f2"></span>
<span style="color: #f8f8f2">}</span><span style="color: #f8f8f2"></span>
</pre></div>
<h3 id="herramientas-de-terceros" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Herramientas de Terceros</h3>
<p>También existen paquetes de terceros que facilitan la generación de código con Sequelize:</p>
<ol>
<li>
<p><strong>sequelize-auto</strong>: Genera modelos a partir de una base de datos existente.
 <br/>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span>   npm install -g sequelize-auto
   sequelize-auto -h localhost -d database -u username -p password -x port

</pre></div>
</p>
</li>
<li>
<p><strong>sequelize-mig</strong>: Genera migraciones a partir de cambios en los modelos.
 <br/>
<div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span>   npm install -g sequelize-mig
   sequelize-mig migration:make -n <span style="color: #bd93f9">"create-users"</span>

</pre></div>
</p>
</li>
</ol>
<p>Estas herramientas pueden ayudar a generar rápidamente código boilerplate y enfocarse en la lógica de negocio.</p>
<h2 id="flujo-de-datos" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Flujo de Datos</h2>
<p>El siguiente diagrama ilustra el flujo de datos en una aplicación que utiliza Sequelize:</p>
<p><img alt="Flujo de datos en una aplicación con Sequelize" src="data_flow.png" style="max-width: 100%; height: auto"/></p>
<h2 id="patrones-de-diseno-comunes" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Patrones de Diseño Comunes</h2>
<ol>
<li><strong>Repositorio</strong>: Encapsula la lógica de acceso a datos</li>
</ol>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-23" onclick="toggleCodeBlock('content-23')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-23" data-collapsed="true" data-height="auto" id="code-block-45" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// repositories/userRepository.js</span>
<span style="color: #8be9fd; font-style: italic">class</span> <span style="color: #f8f8f2">UserRepository</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">findAll</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">options</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">{})</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">return</span> <span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">findAll</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">options</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span>

  <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">findById</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">return</span> <span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">findByPk</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span>

  <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">create</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">data</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">return</span> <span style="color: #f8f8f2">User</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">create</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">data</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span>

  <span style="color: #6272a4">// Más métodos...</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
</div>
</div>
<ol start="2">
<li><strong>Servicio</strong>: Contiene la lógica de negocio</li>
</ol>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-24" onclick="toggleCodeBlock('content-24')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-24" data-collapsed="true" data-height="auto" id="code-block-46" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// services/userService.js</span>
<span style="color: #8be9fd; font-style: italic">class</span> <span style="color: #f8f8f2">UserService</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">constructor</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">userRepository</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">this</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">userRepository</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">userRepository</span><span style="color: #f8f8f2">;</span>
  <span style="color: #f8f8f2">}</span>

  <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">registerUser</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">userData</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #6272a4">// Validaciones, reglas de negocio...</span>
    <span style="color: #ff79c6">return</span> <span style="color: #ff79c6">this</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">userRepository</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">create</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">userData</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span>

  <span style="color: #6272a4">// Más métodos...</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
</div>
</div>
<h2 id="buenas-practicas" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Buenas Prácticas</h2>
<ol>
<li><strong>Utiliza migraciones</strong>: Para mantener un control de versiones del esquema de la base de datos.</li>
<li><strong>Modulariza tus modelos</strong>: Cada modelo en su propio archivo.</li>
<li><strong>Valida datos</strong>: Aprovecha las validaciones de Sequelize.</li>
<li><strong>Usa transacciones</strong>: Para operaciones que afectan a múltiples registros.</li>
<li><strong>Maneja errores</strong>: Captura y maneja adecuadamente los errores.</li>
<li><strong>Evita consultas N+1</strong>: Utiliza eager loading (include) para cargar relaciones.</li>
<li><strong>Limita consultas</strong>: Utiliza limit, offset y scopes para consultas eficientes.</li>
<li><strong>Seguridad</strong>: Nunca confíes en la entrada del usuario sin validación.</li>
<li><strong>Testing</strong>: Prueba tus modelos y consultas.</li>
<li><strong>Documentación</strong>: Documenta tus modelos y sus relaciones.</li>
</ol>
<h2 id="implementacion-en-una-aplicacion-express" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Implementación en una Aplicación Express</h2>
<p>A continuación, veremos cómo implementar Sequelize en una aplicación Express utilizando una estructura de carpetas organizada. Transformaremos el ejemplo del modelo <code style='font-family: "Courier New", Courier, monospace'>Client</code> en memoria a un modelo Sequelize para usar en una API REST.</p>
<h3 id="configuracion-de-la-base-de-datos-configdatabasejs" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Configuración de la Base de Datos (config/database.js)</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-25" onclick="toggleCodeBlock('content-25')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-25" data-collapsed="true" data-height="auto" id="code-block-47" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// config/database.js</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">Sequelize</span> <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'sequelize'</span><span style="color: #f8f8f2">);</span>

<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">env</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">NODE_ENV</span> <span style="color: #ff79c6">||</span> <span style="color: #bd93f9">'development'</span><span style="color: #f8f8f2">;</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">config</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">development</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">database</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'db_development'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">username</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'root'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">password</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">''</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">host</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'localhost'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'mysql'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">logging</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">test</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">database</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'db_test'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">username</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'root'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">password</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">''</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">host</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'localhost'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'mysql'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">logging</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">production</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">database</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_NAME</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">username</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_USER</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">password</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_PASSWORD</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">host</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">DB_HOST</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">dialect</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'mysql'</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">logging</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">pool</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">max</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">5</span><span style="color: #f8f8f2">,</span>
      <span style="color: #f8f8f2">min</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">0</span><span style="color: #f8f8f2">,</span>
      <span style="color: #f8f8f2">acquire</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">30000</span><span style="color: #f8f8f2">,</span>
      <span style="color: #f8f8f2">idle</span><span style="color: #ff79c6">:</span> <span style="color: #ffb86c">10000</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Sequelize</span><span style="color: #f8f8f2">(</span>
  <span style="color: #f8f8f2">config</span><span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">].</span><span style="color: #f8f8f2">database</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">config</span><span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">].</span><span style="color: #f8f8f2">username</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">config</span><span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">].</span><span style="color: #f8f8f2">password</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">config</span><span style="color: #f8f8f2">[</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">]</span>
<span style="color: #f8f8f2">);</span>

<span style="color: #f8f8f2">module</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">exports</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">;</span>
</pre></div>
</div>
</div>
<h3 id="modelo-de-cliente-modelsclientjs" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Modelo de Cliente (models/client.js)</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-26" onclick="toggleCodeBlock('content-26')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-26" data-collapsed="true" data-height="auto" id="code-block-48" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// models/client.js</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">DataTypes</span> <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'sequelize'</span><span style="color: #f8f8f2">);</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'../config/database'</span><span style="color: #f8f8f2">);</span>

<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">Client</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">define</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Client'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #6272a4">// Definimos los campos de la tabla</span>
  <span style="color: #f8f8f2">id</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">DataTypes</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">INTEGER</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">primaryKey</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">autoIncrement</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">nombre</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">DataTypes</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">STRING</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">allowNull</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">validate</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">notEmpty</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">msg</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'El nombre no puede estar vacío'</span>
      <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">apellido</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">DataTypes</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">STRING</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">allowNull</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">validate</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">notEmpty</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">msg</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'El apellido no puede estar vacío'</span>
      <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">},</span>
  <span style="color: #f8f8f2">dni</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">type</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">DataTypes</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">STRING</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">allowNull</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span><span style="color: #f8f8f2">,</span>
    <span style="color: #f8f8f2">unique</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">msg</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'El DNI ya está registrado'</span>
    <span style="color: #f8f8f2">},</span>
    <span style="color: #f8f8f2">validate</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">notEmpty</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">msg</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'El DNI no puede estar vacío'</span>
      <span style="color: #f8f8f2">},</span>
      <span style="color: #f8f8f2">isNumeric</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">msg</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'El DNI debe contener solo números'</span>
      <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">},</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">tableName</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'clients'</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">timestamps</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">true</span> <span style="color: #6272a4">// Añade createdAt y updatedAt</span>
<span style="color: #f8f8f2">});</span>

<span style="color: #6272a4">// Métodos estáticos personalizados (similar al mock original)</span>
<span style="color: #f8f8f2">Client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">createClient</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">nombre</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">apellido</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">dni</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">client</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #ff79c6">this</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">create</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">nombre</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">apellido</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">dni</span> <span style="color: #f8f8f2">});</span>
    <span style="color: #ff79c6">return</span> <span style="color: #f8f8f2">client</span><span style="color: #f8f8f2">;</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">throw</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">;</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #f8f8f2">Client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">updateClient</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">nombre</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">apellido</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">dni</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">client</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #ff79c6">this</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">findByPk</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">);</span>
    <span style="color: #ff79c6">if</span> <span style="color: #f8f8f2">(</span><span style="color: #ff79c6">!</span><span style="color: #f8f8f2">client</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #ff79c6">throw</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Error</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Error: el id no existe'</span><span style="color: #f8f8f2">);</span>
    <span style="color: #f8f8f2">}</span>

    <span style="color: #ff79c6">return</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">update</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">nombre</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">apellido</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">dni</span> <span style="color: #f8f8f2">});</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">throw</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">;</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #f8f8f2">Client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">deleteClient</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">client</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #ff79c6">this</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">findByPk</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">);</span>
    <span style="color: #ff79c6">if</span> <span style="color: #f8f8f2">(</span><span style="color: #ff79c6">!</span><span style="color: #f8f8f2">client</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #ff79c6">throw</span> <span style="color: #ff79c6">new</span> <span style="color: #f8f8f2">Error</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Error: el id no existe'</span><span style="color: #f8f8f2">);</span>
    <span style="color: #f8f8f2">}</span>
    <span style="color: #ff79c6">return</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">destroy</span><span style="color: #f8f8f2">();</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">throw</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">;</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #f8f8f2">Client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">listClients</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">async</span> <span style="color: #8be9fd; font-style: italic">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">clients</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #ff79c6">this</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">findAll</span><span style="color: #f8f8f2">();</span>
    <span style="color: #ff79c6">return</span> <span style="color: #f8f8f2">clients</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">map</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">client</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #bd93f9">`</span><span style="color: #bd93f9">${</span><span style="color: #f8f8f2">client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">apellido</span><span style="color: #bd93f9">}</span><span style="color: #bd93f9">, </span><span style="color: #bd93f9">${</span><span style="color: #f8f8f2">client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">nombre</span><span style="color: #bd93f9">}</span><span style="color: #bd93f9">`</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">throw</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">;</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #f8f8f2">module</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">exports</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">Client</span><span style="color: #f8f8f2">;</span>
</pre></div>
</div>
</div>
<h3 id="indice-de-modelos-modelsindexjs" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Índice de Modelos (models/index.js)</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-27" onclick="toggleCodeBlock('content-27')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-27" data-collapsed="true" data-height="auto" id="code-block-49" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// models/index.js</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'../config/database'</span><span style="color: #f8f8f2">);</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">Client</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'./client'</span><span style="color: #f8f8f2">);</span>

<span style="color: #6272a4">// Agregar otros modelos aquí...</span>
<span style="color: #6272a4">// const OtroModelo = require('./otroModelo');</span>

<span style="color: #6272a4">// Definir relaciones entre modelos</span>
<span style="color: #6272a4">// Client.hasMany(OtroModelo);</span>
<span style="color: #6272a4">// OtroModelo.belongsTo(Client);</span>

<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">db</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">,</span>
  <span style="color: #f8f8f2">Client</span>
  <span style="color: #6272a4">// Agregar otros modelos aquí</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #f8f8f2">module</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">exports</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">db</span><span style="color: #f8f8f2">;</span>
</pre></div>
</div>
</div>
<h3 id="controlador-de-clientes-controllersclientcontrollerjs" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Controlador de Clientes (controllers/clientController.js)</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-28" onclick="toggleCodeBlock('content-28')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-28" data-collapsed="true" data-height="auto" id="code-block-50" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// controllers/clientController.js</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">Client</span> <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'../models'</span><span style="color: #f8f8f2">);</span>

<span style="color: #6272a4">// Obtener todos los clientes</span>
<span style="color: #f8f8f2">exports</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">getAllClients</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">req</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">clients</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">Client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">findAll</span><span style="color: #f8f8f2">();</span>
    <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">200</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">clients</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">500</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">message</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">message</span> <span style="color: #f8f8f2">});</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #6272a4">// Obtener un cliente por ID</span>
<span style="color: #f8f8f2">exports</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">getClientById</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">req</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">client</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">Client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">findByPk</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">req</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">params</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">);</span>
    <span style="color: #ff79c6">if</span> <span style="color: #f8f8f2">(</span><span style="color: #ff79c6">!</span><span style="color: #f8f8f2">client</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #ff79c6">return</span> <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">404</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">message</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Cliente no encontrado'</span> <span style="color: #f8f8f2">});</span>
    <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">200</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">client</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">500</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">message</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">message</span> <span style="color: #f8f8f2">});</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #6272a4">// Crear un nuevo cliente</span>
<span style="color: #f8f8f2">exports</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">createClient</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">req</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">nombre</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">apellido</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">dni</span> <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">req</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">body</span><span style="color: #f8f8f2">;</span>
    <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">client</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">Client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">createClient</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">nombre</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">apellido</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">dni</span><span style="color: #f8f8f2">);</span>
    <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">201</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">client</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">400</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">message</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">message</span> <span style="color: #f8f8f2">});</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #6272a4">// Actualizar un cliente</span>
<span style="color: #f8f8f2">exports</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">updateClient</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">req</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">nombre</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">apellido</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">dni</span> <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">req</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">body</span><span style="color: #f8f8f2">;</span>
    <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">client</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">Client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">updateClient</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">req</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">params</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">nombre</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">apellido</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">dni</span><span style="color: #f8f8f2">);</span>
    <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">200</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">client</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">message</span> <span style="color: #ff79c6">===</span> <span style="color: #bd93f9">'Error: el id no existe'</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #ff79c6">return</span> <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">404</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">message</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Cliente no encontrado'</span> <span style="color: #f8f8f2">});</span>
    <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">400</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">message</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">message</span> <span style="color: #f8f8f2">});</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #6272a4">// Eliminar un cliente</span>
<span style="color: #f8f8f2">exports</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">deleteClient</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">req</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">Client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">deleteClient</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">req</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">params</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">id</span><span style="color: #f8f8f2">);</span>
    <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">204</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">send</span><span style="color: #f8f8f2">();</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #ff79c6">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">message</span> <span style="color: #ff79c6">===</span> <span style="color: #bd93f9">'Error: el id no existe'</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #ff79c6">return</span> <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">404</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">message</span><span style="color: #ff79c6">:</span> <span style="color: #bd93f9">'Cliente no encontrado'</span> <span style="color: #f8f8f2">});</span>
    <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">500</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">message</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">message</span> <span style="color: #f8f8f2">});</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #6272a4">// Obtener lista formateada de clientes</span>
<span style="color: #f8f8f2">exports</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">getClientList</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">async</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">req</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #ff79c6">try</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">clientList</span> <span style="color: #ff79c6">=</span> <span style="color: #ff79c6">await</span> <span style="color: #f8f8f2">Client</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">listClients</span><span style="color: #f8f8f2">();</span>
    <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">200</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">clientList</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">catch</span> <span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">res</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">status</span><span style="color: #f8f8f2">(</span><span style="color: #ffb86c">500</span><span style="color: #f8f8f2">).</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">message</span><span style="color: #ff79c6">:</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">message</span> <span style="color: #f8f8f2">});</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">};</span>
</pre></div>
</div>
</div>
<h3 id="rutas-para-clientes-routesclientroutesjs" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Rutas para Clientes (routes/clientRoutes.js)</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-29" onclick="toggleCodeBlock('content-29')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-29" data-collapsed="true" data-height="auto" id="code-block-51" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// routes/clientRoutes.js</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">express</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'express'</span><span style="color: #f8f8f2">);</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">router</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">express</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">Router</span><span style="color: #f8f8f2">();</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">clientController</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'../controllers/clientController'</span><span style="color: #f8f8f2">);</span>

<span style="color: #6272a4">// Definir rutas</span>
<span style="color: #f8f8f2">router</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">get</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'/'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">clientController</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">getAllClients</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">router</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">get</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'/list'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">clientController</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">getClientList</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">router</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">get</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'/:id'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">clientController</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">getClientById</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">router</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">post</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'/'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">clientController</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">createClient</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">router</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">put</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'/:id'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">clientController</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">updateClient</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">router</span><span style="color: #f8f8f2">.</span><span style="color: #ff79c6">delete</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'/:id'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">clientController</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">deleteClient</span><span style="color: #f8f8f2">);</span>

<span style="color: #f8f8f2">module</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">exports</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">router</span><span style="color: #f8f8f2">;</span>
</pre></div>
</div>
</div>
<h3 id="aplicacion-express-appjs" style="color: #2020f0; font-size: 1.5em; margin-top: 10px; font-weight: bold">Aplicación Express (app.js)</h3>
<div style="margin: 15px 0; border-radius: 5px; overflow: hidden">
<div style="display: flex; justify-content: flex-end; background-color: #2a2a45; color: #f8f8f2; padding: 4px 8px; font-family: monospace">
<button data-target="content-30" onclick="toggleCodeBlock('content-30')" style="background-color: #3a3a55; color: #f8f8f2; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 0.85em">Expandir</button>
</div>
<div data-block-id="content-30" data-collapsed="true" data-height="auto" id="code-block-52" style="transition: max-height 0.3s ease-out; overflow: hidden; max-height: 150px !important; position: relative"><div style="background: #282a36; color: #f8f8f2; padding: 5px; border-radius: 5px; margin: 5px 0; background-color: #1a1a35 !important"><pre style='line-height: 125%; background-color: #101030; color: #d0d0d0; padding: 10px; border-radius: 5px; overflow-x: auto; font-family: Consolas, Monaco, "Andale Mono", monospace; font-size: 0.9em; margin: 10px'><span></span><span style="color: #6272a4">// app.js</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">express</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'express'</span><span style="color: #f8f8f2">);</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">sequelize</span> <span style="color: #f8f8f2">}</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'./models'</span><span style="color: #f8f8f2">);</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">clientRoutes</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">require</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'./routes/clientRoutes'</span><span style="color: #f8f8f2">);</span>

<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">app</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">express</span><span style="color: #f8f8f2">();</span>
<span style="color: #8be9fd; font-style: italic">const</span> <span style="color: #f8f8f2">PORT</span> <span style="color: #ff79c6">=</span> <span style="color: #f8f8f2">process</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">env</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">PORT</span> <span style="color: #ff79c6">||</span> <span style="color: #ffb86c">3000</span><span style="color: #f8f8f2">;</span>

<span style="color: #6272a4">// Middleware</span>
<span style="color: #f8f8f2">app</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">use</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">express</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">json</span><span style="color: #f8f8f2">());</span>

<span style="color: #6272a4">// Rutas</span>
<span style="color: #f8f8f2">app</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">use</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'/api/clients'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">clientRoutes</span><span style="color: #f8f8f2">);</span>

<span style="color: #6272a4">// Sincronizar modelos con la base de datos</span>
<span style="color: #f8f8f2">sequelize</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">sync</span><span style="color: #f8f8f2">({</span> <span style="color: #f8f8f2">force</span><span style="color: #ff79c6">:</span> <span style="color: #ff79c6">false</span> <span style="color: #f8f8f2">})</span>
  <span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">then</span><span style="color: #f8f8f2">(()</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Base de datos sincronizada'</span><span style="color: #f8f8f2">);</span>
    <span style="color: #f8f8f2">app</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">listen</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">PORT</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">log</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">`Servidor corriendo en el puerto </span><span style="color: #bd93f9">${</span><span style="color: #f8f8f2">PORT</span><span style="color: #bd93f9">}</span><span style="color: #bd93f9">`</span><span style="color: #f8f8f2">);</span>
    <span style="color: #f8f8f2">});</span>
  <span style="color: #f8f8f2">})</span>
  <span style="color: #f8f8f2">.</span><span style="color: #ff79c6">catch</span><span style="color: #f8f8f2">(</span><span style="color: #f8f8f2">error</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">console</span><span style="color: #f8f8f2">.</span><span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">(</span><span style="color: #bd93f9">'Error al sincronizar la base de datos:'</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">error</span><span style="color: #f8f8f2">);</span>
  <span style="color: #f8f8f2">});</span>
</pre></div>
</div>
</div>
<p>Este ejemplo muestra cómo transformar el modelo <code style='font-family: "Courier New", Courier, monospace'>Client</code> en memoria a un modelo Sequelize para usar en una aplicación Express. Hemos mantenido la funcionalidad del mock original (create, update, delete, list) pero implementándolo con Sequelize.</p>
<p>Los métodos estáticos personalizados (<code style='font-family: "Courier New", Courier, monospace'>createClient</code>, <code style='font-family: "Courier New", Courier, monospace'>updateClient</code>, <code style='font-family: "Courier New", Courier, monospace'>deleteClient</code>, <code style='font-family: "Courier New", Courier, monospace'>listClients</code>) proporcionan una interfaz similar al mock original, pero ahora usando la base de datos relacional a través de Sequelize.</p>
<h2 id="conclusion" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Conclusión</h2>
<p>Sequelize es una herramienta poderosa que simplifica la interacción con bases de datos relacionales en aplicaciones Node.js. Si bien tiene una curva de aprendizaje, las ventajas que ofrece en términos de productividad, mantenibilidad y seguridad hacen que valga la pena invertir tiempo en dominarla.</p>
<p>Como todo ORM, hay que ser consciente de sus limitaciones, especialmente en consultas muy complejas o con grandes volúmenes de datos donde el SQL nativo puede ser más eficiente. Sin embargo, para la mayoría de las aplicaciones, Sequelize proporciona un excelente equilibrio entre facilidad de uso y rendimiento.</p>
<h2 id="recursos-adicionales" style="color: #448; font-size: 1.8em; margin-top: 30px; margin-bottom: 10px; border-bottom: 2px solid #bbf; padding-bottom: 5px">Recursos Adicionales</h2>
<ul>
<li><a href="https://sequelize.org/master/">Documentación oficial de Sequelize</a></li>
<li><a href="https://github.com/sequelize/sequelize">Repositorio de GitHub</a></li>
<li><a href="https://sequelize.org/master/manual/migrations.html">Guía de migraciones</a></li>
<li><a href="https://sequelize.org/master/manual/validations-and-constraints.html">Validaciones en Sequelize</a></li>
<li><a href="https://sequelize.org/master/manual/hooks.html">Hooks (Callbacks)</a></li>
</ul>


<script>
    function getElementHeight(element) {
        // Clone the element to measure its natural height
        const clone = element.cloneNode(true);
        
        // Set styles to ensure accurate measurement
        clone.style.maxHeight = 'none';
        clone.style.position = 'absolute';
        clone.style.visibility = 'hidden';
        clone.style.display = 'block';
        
        // Add to DOM, measure, then remove
        document.body.appendChild(clone);
        const height = clone.scrollHeight;
        document.body.removeChild(clone);
        
        return height + 'px';
    }
    
    function toggleCodeBlock(blockId) {
        const codeBlock = document.querySelector(`[data-block-id="${blockId}"]`);
        const button = document.querySelector(`button[data-target="${blockId}"]`);
        
        if (codeBlock.getAttribute('data-collapsed') === 'true') {
            // Expand: Remove collapsed attribute and set maximum height
            codeBlock.setAttribute('data-collapsed', 'false');
            codeBlock.style.maxHeight = getElementHeight(codeBlock);
            button.textContent = "Colapsar";
        } else {
            // Collapse: Add collapsed attribute and reset height
            codeBlock.setAttribute('data-collapsed', 'true');
            codeBlock.style.maxHeight = '150px';
            button.textContent = "Expandir";
        }
    }
    
    // Set the initial state of collapsible code blocks
    document.addEventListener("DOMContentLoaded", function() {
        // Find all code blocks with data-block-id
        const codeBlocks = document.querySelectorAll('[data-block-id]');
        codeBlocks.forEach(block => {
            // Measure and store the actual height
            const actualHeight = block.scrollHeight + 'px';
            block.setAttribute('data-full-height', actualHeight);
            
            // Set initial state to collapsed
            const button = document.querySelector(`button[data-target="${block.getAttribute('data-block-id')}"]`);
            if (button) {
                block.setAttribute('data-collapsed', 'true');
                block.style.maxHeight = '150px';
                button.textContent = "Expandir";
            }
        });
    });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   parteD
  </title>
 </head>
 <body>
  <h1 id="parte-d-casos-practicos-y-modelado">
   Parte D: Casos Prácticos y Modelado
  </h1>
  <div class="toc" id="table-of-contents">
   <h2 id="contents-header">
    Tabla de contenidos
   </h2>
   <ul class="toc">
    <li class="toc">
     <a class="toc" href="#41-principios-de-modelado-de-grafos">
      4.1 Principios de modelado de grafos
     </a>
    </li>
    <li class="toc">
     <a class="toc" href="#42-patrones-comunes-de-modelado">
      4.2 Patrones comunes de modelado
     </a>
    </li>
    <li class="toc">
     <a class="toc" href="#43-proyecto-practico-sistema-de-gestion-academica">
      4.3 Proyecto práctico: Sistema de gestión académica
     </a>
    </li>
    <li class="toc">
     <a class="toc" href="#44-importacion-de-datos-desde-csv">
      4.4 Importación de datos desde CSV
     </a>
    </li>
    <li class="toc">
     <a class="toc" href="#resumen">
      Resumen
     </a>
    </li>
   </ul>
  </div>
  <div class="chapter-container">
   <h2 id="41-principios-de-modelado-de-grafos">
    4.1 Principios de modelado de grafos
   </h2>
   <h3 id="diferencias-clave-con-modelado-relacional">
    Diferencias clave con modelado relacional
   </h3>
   <table>
    <thead>
     <tr>
      <th>
       Aspecto
      </th>
      <th>
       Modelo Relacional
      </th>
      <th>
       Modelo de Grafos
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>
       <strong>
        Enfoque
       </strong>
      </td>
      <td>
       Normalización, evitar redundancia
      </td>
      <td>
       Desnormalización, optimizar consultas
      </td>
     </tr>
     <tr>
      <td>
       <strong>
        Relaciones
       </strong>
      </td>
      <td>
       Foreign keys, JOINs
      </td>
      <td>
       Relaciones directas, navigación
      </td>
     </tr>
     <tr>
      <td>
       <strong>
        Esquema
       </strong>
      </td>
      <td>
       Rígido, definido previamente
      </td>
      <td>
       Flexible, evolutivo
      </td>
     </tr>
     <tr>
      <td>
       <strong>
        Consultas
       </strong>
      </td>
      <td>
       JOINs complejos para relaciones
      </td>
      <td>
       Traversal natural
      </td>
     </tr>
     <tr>
      <td>
       <strong>
        Performance
       </strong>
      </td>
      <td>
       Degrada con JOINs complejos
      </td>
      <td>
       Constante para navegación local
      </td>
     </tr>
    </tbody>
   </table>
   <h3 id="principios-fundamentales-del-modelado-de-grafos">
    Principios fundamentales del modelado de grafos
   </h3>
   <h4 id="1-modelar-para-las-consultas-especificas">
    1.
    <strong>
     Modelar para las consultas específicas
    </strong>
   </h4>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="c1">// ❌ Modelo genérico poco eficiente</span>
<span class="k">CREATE</span><span class="w"> </span>
<span class="w">  </span><span class="p">(</span><span class="n">persona</span><span class="p">:</span><span class="n">Entidad</span><span class="w"> </span><span class="p">{</span><span class="n">tipo</span><span class="p">:</span><span class="w"> </span><span class="s">'persona'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Juan'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">empresa</span><span class="p">:</span><span class="n">Entidad</span><span class="w"> </span><span class="p">{</span><span class="n">tipo</span><span class="p">:</span><span class="w"> </span><span class="s">'empresa'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'TechCorp'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">persona</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">RELACIONADO_CON</span><span class="w"> </span><span class="p">{</span><span class="n">tipo</span><span class="p">:</span><span class="w"> </span><span class="s">'trabaja_en'</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">empresa</span><span class="p">);</span>

<span class="c1">// ✅ Modelo específico y eficiente</span>
<span class="k">CREATE</span>
<span class="w">  </span><span class="p">(</span><span class="n">juan</span><span class="p">:</span><span class="n">Persona</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Juan'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">techcorp</span><span class="p">:</span><span class="n">Empresa</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'TechCorp'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">juan</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TRABAJA_EN</span><span class="w"> </span><span class="p">{</span><span class="n">desde</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2020-01-15'</span><span class="p">),</span><span class="w"> </span><span class="n">puesto</span><span class="p">:</span><span class="w"> </span><span class="s">'Developer'</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">techcorp</span><span class="p">);</span>
</pre>
    </div>
   </div>
   <h4 id="2-desnormalizar-para-performance">
    2.
    <strong>
     Desnormalizar para performance
    </strong>
   </h4>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="c1">// En lugar de normalizar completamente, duplicar datos estratégicamente</span>
<span class="k">CREATE</span><span class="w"> </span><span class="p">(</span><span class="n">pedido</span><span class="p">:</span><span class="n">Pedido</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="m">1001</span><span class="p">,</span>
<span class="w">  </span><span class="n">fecha</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-10-01'</span><span class="p">),</span>
<span class="w">  </span><span class="n">total</span><span class="p">:</span><span class="w"> </span><span class="m">299</span><span class="p">.</span><span class="m">99</span><span class="p">,</span>
<span class="w">  </span><span class="c1">// Datos duplicados del cliente para consultas rápidas</span>
<span class="w">  </span><span class="n">cliente_nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Ana García'</span><span class="p">,</span>
<span class="w">  </span><span class="n">cliente_email</span><span class="p">:</span><span class="w"> </span><span class="s">'ana@email.com'</span><span class="p">,</span>
<span class="w">  </span><span class="n">cliente_ciudad</span><span class="p">:</span><span class="w"> </span><span class="s">'Madrid'</span>
<span class="p">})</span>
</pre>
    </div>
   </div>
   <h4 id="3-usar-etiquetas-jerarquicas">
    3.
    <strong>
     Usar etiquetas jerárquicas
    </strong>
   </h4>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="c1">// Jerarquía de etiquetas para flexibilidad</span>
<span class="k">CREATE</span><span class="w"> </span><span class="p">(</span><span class="n">ana</span><span class="p">:</span><span class="n">Persona</span><span class="p">:</span><span class="n">Empleado</span><span class="p">:</span><span class="n">Desarrolladora</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Ana'</span><span class="p">})</span>
<span class="k">CREATE</span><span class="w"> </span><span class="p">(</span><span class="n">producto</span><span class="p">:</span><span class="n">Item</span><span class="p">:</span><span class="n">Producto</span><span class="p">:</span><span class="n">Electronico</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Laptop'</span><span class="p">})</span>

<span class="c1">// Permite consultas a diferentes niveles</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Persona</span><span class="p">)</span><span class="w"> </span><span class="k">RETURN</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="w">        </span><span class="c1">// Todas las personas</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">:</span><span class="n">Empleado</span><span class="p">)</span><span class="w"> </span><span class="k">RETURN</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w">       </span><span class="c1">// Solo empleados</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">d</span><span class="p">:</span><span class="n">Desarrolladora</span><span class="p">)</span><span class="w"> </span><span class="k">RETURN</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="c1">// Solo desarrolladoras</span>
</pre>
    </div>
   </div>
  </div>
  <div class="chapter-container">
   <h2 id="42-patrones-comunes-de-modelado">
    4.2 Patrones comunes de modelado
   </h2>
   <h3 id="1-patron-entidades-conectadas">
    1. Patrón: Entidades conectadas
   </h3>
   <p>
    <strong>
     Cuándo usar:
    </strong>
    Modelar entidades del mundo real y sus relaciones naturales.
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="c1">// Ejemplo: Red social profesional</span>
<span class="k">CREATE</span><span class="w"> </span>
<span class="w">  </span><span class="p">(</span><span class="n">ana</span><span class="p">:</span><span class="n">Persona</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Ana García'</span><span class="p">,</span><span class="w"> </span><span class="n">profesion</span><span class="p">:</span><span class="w"> </span><span class="s">'Desarrolladora'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">bob</span><span class="p">:</span><span class="n">Persona</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Bob Smith'</span><span class="p">,</span><span class="w"> </span><span class="n">profesion</span><span class="p">:</span><span class="w"> </span><span class="s">'Diseñador'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">techcorp</span><span class="p">:</span><span class="n">Empresa</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'TechCorp'</span><span class="p">,</span><span class="w"> </span><span class="n">sector</span><span class="p">:</span><span class="w"> </span><span class="s">'Tecnología'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">madrid</span><span class="p">:</span><span class="n">Ciudad</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Madrid'</span><span class="p">,</span><span class="w"> </span><span class="n">pais</span><span class="p">:</span><span class="w"> </span><span class="s">'España'</span><span class="p">}),</span>
<span class="w">  </span>
<span class="w">  </span><span class="p">(</span><span class="n">ana</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TRABAJA_EN</span><span class="w"> </span><span class="p">{</span><span class="n">desde</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2020-01-15'</span><span class="p">),</span><span class="w"> </span><span class="n">puesto</span><span class="p">:</span><span class="w"> </span><span class="s">'Senior Developer'</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">techcorp</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">bob</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TRABAJA_EN</span><span class="w"> </span><span class="p">{</span><span class="n">desde</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2021-03-01'</span><span class="p">),</span><span class="w"> </span><span class="n">puesto</span><span class="p">:</span><span class="w"> </span><span class="s">'UI Designer'</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">techcorp</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">ana</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">VIVE_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">madrid</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">techcorp</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">UBICADA_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">madrid</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">ana</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">CONOCE</span><span class="w"> </span><span class="p">{</span><span class="n">desde</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2020-02-01'</span><span class="p">),</span><span class="w"> </span><span class="n">contexto</span><span class="p">:</span><span class="w"> </span><span class="s">'trabajo'</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">bob</span><span class="p">);</span>
</pre>
    </div>
   </div>
   <h3 id="2-patron-timelineeventos">
    2. Patrón: Timeline/Eventos
   </h3>
   <p>
    <strong>
     Cuándo usar:
    </strong>
    Modelar secuencias temporales, historiales, logs.
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="c1">// Ejemplo: Historial médico</span>
<span class="k">CREATE</span><span class="w"> </span>
<span class="w">  </span><span class="p">(</span><span class="n">paciente</span><span class="p">:</span><span class="n">Paciente</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'María López'</span><span class="p">,</span><span class="w"> </span><span class="n">fecha_nacimiento</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'1985-05-20'</span><span class="p">)}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">doctor</span><span class="p">:</span><span class="n">Doctor</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Dr. Martínez'</span><span class="p">,</span><span class="w"> </span><span class="n">especialidad</span><span class="p">:</span><span class="w"> </span><span class="s">'Cardiología'</span><span class="p">}),</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Consultas como eventos</span>
<span class="w">  </span><span class="p">(</span><span class="n">consulta1</span><span class="p">:</span><span class="n">Consulta</span><span class="p">:</span><span class="n">Evento</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">fecha</span><span class="p">:</span><span class="w"> </span><span class="n">datetime</span><span class="p">(</span><span class="s">'2023-09-15T10:00:00'</span><span class="p">),</span>
<span class="w">    </span><span class="n">motivo</span><span class="p">:</span><span class="w"> </span><span class="s">'Chequeo rutinario'</span><span class="p">,</span>
<span class="w">    </span><span class="n">notas</span><span class="p">:</span><span class="w"> </span><span class="s">'Presión arterial normal'</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">consulta2</span><span class="p">:</span><span class="n">Consulta</span><span class="p">:</span><span class="n">Evento</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">fecha</span><span class="p">:</span><span class="w"> </span><span class="n">datetime</span><span class="p">(</span><span class="s">'2023-10-20T15:30:00'</span><span class="p">),</span>
<span class="w">    </span><span class="n">motivo</span><span class="p">:</span><span class="w"> </span><span class="s">'Seguimiento'</span><span class="p">,</span>
<span class="w">    </span><span class="n">notas</span><span class="p">:</span><span class="w"> </span><span class="s">'Mejoría notable'</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Relaciones temporales</span>
<span class="w">  </span><span class="p">(</span><span class="n">paciente</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TUVO_CONSULTA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">consulta1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">ATENDIDA_POR</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">doctor</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">paciente</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TUVO_CONSULTA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">consulta2</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">ATENDIDA_POR</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">doctor</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">consulta1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">SEGUIDA_POR</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">consulta2</span><span class="p">);</span>

<span class="c1">// Consultar timeline</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Paciente</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'María López'</span><span class="p">})</span><span class="o">-[</span><span class="p">:</span><span class="n">TUVO_CONSULTA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">consulta</span><span class="p">:</span><span class="n">Consulta</span><span class="p">)</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">consulta</span><span class="p">.</span><span class="n">fecha</span><span class="p">,</span><span class="w"> </span><span class="n">consulta</span><span class="p">.</span><span class="n">motivo</span><span class="p">,</span><span class="w"> </span><span class="n">consulta</span><span class="p">.</span><span class="n">notas</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">consulta</span><span class="p">.</span><span class="n">fecha</span><span class="p">;</span>
</pre>
    </div>
   </div>
   <h3 id="3-patron-jerarquias-y-taxonomias">
    3. Patrón: Jerarquías y Taxonomías
   </h3>
   <p>
    <strong>
     Cuándo usar:
    </strong>
    Categorías, organigramas, estructuras de archivos.
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="c1">// Ejemplo: Estructura organizacional</span>
<span class="k">CREATE</span><span class="w"> </span>
<span class="w">  </span><span class="p">(</span><span class="n">ceo</span><span class="p">:</span><span class="n">Persona</span><span class="p">:</span><span class="n">Ejecutivo</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Carlos Ruiz'</span><span class="p">,</span><span class="w"> </span><span class="n">puesto</span><span class="p">:</span><span class="w"> </span><span class="s">'CEO'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">cto</span><span class="p">:</span><span class="n">Persona</span><span class="p">:</span><span class="n">Ejecutivo</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Ana Torres'</span><span class="p">,</span><span class="w"> </span><span class="n">puesto</span><span class="p">:</span><span class="w"> </span><span class="s">'CTO'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">lead_backend</span><span class="p">:</span><span class="n">Persona</span><span class="p">:</span><span class="n">TechLead</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Juan Pérez'</span><span class="p">,</span><span class="w"> </span><span class="n">puesto</span><span class="p">:</span><span class="w"> </span><span class="s">'Backend Lead'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">lead_frontend</span><span class="p">:</span><span class="n">Persona</span><span class="p">:</span><span class="n">TechLead</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'María Silva'</span><span class="p">,</span><span class="w"> </span><span class="n">puesto</span><span class="p">:</span><span class="w"> </span><span class="s">'Frontend Lead'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">dev1</span><span class="p">:</span><span class="n">Persona</span><span class="p">:</span><span class="n">Desarrollador</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Pedro García'</span><span class="p">,</span><span class="w"> </span><span class="n">puesto</span><span class="p">:</span><span class="w"> </span><span class="s">'Backend Developer'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">dev2</span><span class="p">:</span><span class="n">Persona</span><span class="p">:</span><span class="n">Desarrollador</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Laura Vega'</span><span class="p">,</span><span class="w"> </span><span class="n">puesto</span><span class="p">:</span><span class="w"> </span><span class="s">'Frontend Developer'</span><span class="p">}),</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Jerarquía organizacional</span>
<span class="w">  </span><span class="p">(</span><span class="n">ceo</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">SUPERVISA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">cto</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">cto</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">SUPERVISA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">lead_backend</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">cto</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">SUPERVISA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">lead_frontend</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">lead_backend</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">SUPERVISA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">dev1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">lead_frontend</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">SUPERVISA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">dev2</span><span class="p">);</span>

<span class="c1">// Consultar jerarquía completa desde CEO</span>
<span class="k">MATCH</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">ceo</span><span class="p">:</span><span class="n">Persona</span><span class="w"> </span><span class="p">{</span><span class="n">puesto</span><span class="p">:</span><span class="w"> </span><span class="s">'CEO'</span><span class="p">})</span><span class="o">-[</span><span class="p">:</span><span class="n">SUPERVISA</span><span class="p">*</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">subordinado</span><span class="p">)</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">subordinado</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">subordinado</span><span class="p">.</span><span class="n">puesto</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">nivel_jerarquico</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">nivel_jerarquico</span><span class="p">,</span><span class="w"> </span><span class="n">subordinado</span><span class="p">.</span><span class="n">nombre</span><span class="p">;</span>
</pre>
    </div>
   </div>
   <h3 id="4-patron-agregacion-y-metricas">
    4. Patrón: Agregación y Métricas
   </h3>
   <p>
    <strong>
     Cuándo usar:
    </strong>
    Dashboards, reportes, análisis de KPIs.
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="c1">// Ejemplo: Métricas de ventas</span>
<span class="k">CREATE</span><span class="w"> </span>
<span class="w">  </span><span class="c1">// Nodos de tiempo para agregación</span>
<span class="w">  </span><span class="p">(</span><span class="n">enero</span><span class="p">:</span><span class="n">Mes</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Enero'</span><span class="p">,</span><span class="w"> </span><span class="n">año</span><span class="p">:</span><span class="w"> </span><span class="m">2023</span><span class="p">,</span><span class="w"> </span><span class="n">numero</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">febrero</span><span class="p">:</span><span class="n">Mes</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Febrero'</span><span class="p">,</span><span class="w"> </span><span class="n">año</span><span class="p">:</span><span class="w"> </span><span class="m">2023</span><span class="p">,</span><span class="w"> </span><span class="n">numero</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">q1</span><span class="p">:</span><span class="n">Trimestre</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Q1'</span><span class="p">,</span><span class="w"> </span><span class="n">año</span><span class="p">:</span><span class="w"> </span><span class="m">2023</span><span class="p">,</span><span class="w"> </span><span class="n">numero</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">año2023</span><span class="p">:</span><span class="n">Año</span><span class="w"> </span><span class="p">{</span><span class="n">año</span><span class="p">:</span><span class="w"> </span><span class="m">2023</span><span class="p">}),</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Métricas agregadas</span>
<span class="w">  </span><span class="p">(</span><span class="n">metro_enero</span><span class="p">:</span><span class="n">Metrica</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ventas_total</span><span class="p">:</span><span class="w"> </span><span class="m">150000</span><span class="p">,</span>
<span class="w">    </span><span class="n">num_pedidos</span><span class="p">:</span><span class="w"> </span><span class="m">45</span><span class="p">,</span>
<span class="w">    </span><span class="n">clientes_nuevos</span><span class="p">:</span><span class="w"> </span><span class="m">12</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">metro_febrero</span><span class="p">:</span><span class="n">Metrica</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ventas_total</span><span class="p">:</span><span class="w"> </span><span class="m">180000</span><span class="p">,</span>
<span class="w">    </span><span class="n">num_pedidos</span><span class="p">:</span><span class="w"> </span><span class="m">52</span><span class="p">,</span>
<span class="w">    </span><span class="n">clientes_nuevos</span><span class="p">:</span><span class="w"> </span><span class="m">15</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Relaciones de agregación</span>
<span class="w">  </span><span class="p">(</span><span class="n">enero</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TIENE_METRICAS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">metro_enero</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">febrero</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TIENE_METRICAS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">metro_febrero</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">enero</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">PERTENECE_A</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">q1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">febrero</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">PERTENECE_A</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">q1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">q1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">PERTENECE_A</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">año2023</span><span class="p">);</span>

<span class="c1">// Consultar métricas agregadas por trimestre</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">trimestre</span><span class="p">:</span><span class="n">Trimestre</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">PERTENECE_A</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">año</span><span class="p">:</span><span class="n">Año</span><span class="w"> </span><span class="p">{</span><span class="n">año</span><span class="p">:</span><span class="w"> </span><span class="m">2023</span><span class="p">})</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">mes</span><span class="p">:</span><span class="n">Mes</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">PERTENECE_A</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">trimestre</span><span class="p">)</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">mes</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TIENE_METRICAS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">metrica</span><span class="p">:</span><span class="n">Metrica</span><span class="p">)</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">trimestre</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span>
<span class="w">       </span><span class="n">sum</span><span class="p">(</span><span class="n">metrica</span><span class="p">.</span><span class="n">ventas_total</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">ventas_trimestre</span><span class="p">,</span>
<span class="w">       </span><span class="n">sum</span><span class="p">(</span><span class="n">metrica</span><span class="p">.</span><span class="n">num_pedidos</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">pedidos_trimestre</span><span class="p">,</span>
<span class="w">       </span><span class="n">sum</span><span class="p">(</span><span class="n">metrica</span><span class="p">.</span><span class="n">clientes_nuevos</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">nuevos_clientes_trimestre</span><span class="p">;</span>
</pre>
    </div>
   </div>
   <h3 id="5-patron-recomendacion-por-filtrado-colaborativo">
    5. Patrón: Recomendación por Filtrado Colaborativo
   </h3>
   <p>
    <strong>
     Cuándo usar:
    </strong>
    Sistemas de recomendación, sugerencias personalizadas.
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="c1">// Ejemplo: Recomendación de libros</span>
<span class="k">CREATE</span><span class="w"> </span>
<span class="w">  </span><span class="p">(</span><span class="n">ana</span><span class="p">:</span><span class="n">Usuario</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Ana'</span><span class="p">,</span><span class="w"> </span><span class="n">edad</span><span class="p">:</span><span class="w"> </span><span class="m">28</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">bob</span><span class="p">:</span><span class="n">Usuario</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Bob'</span><span class="p">,</span><span class="w"> </span><span class="n">edad</span><span class="p">:</span><span class="w"> </span><span class="m">32</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">carla</span><span class="p">:</span><span class="n">Usuario</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Carla'</span><span class="p">,</span><span class="w"> </span><span class="n">edad</span><span class="p">:</span><span class="w"> </span><span class="m">26</span><span class="p">}),</span>
<span class="w">  </span>
<span class="w">  </span><span class="p">(</span><span class="n">libro1</span><span class="p">:</span><span class="n">Libro</span><span class="w"> </span><span class="p">{</span><span class="n">titulo</span><span class="p">:</span><span class="w"> </span><span class="s">'Clean Code'</span><span class="p">,</span><span class="w"> </span><span class="n">autor</span><span class="p">:</span><span class="w"> </span><span class="s">'Robert Martin'</span><span class="p">,</span><span class="w"> </span><span class="n">genero</span><span class="p">:</span><span class="w"> </span><span class="s">'Técnico'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">libro2</span><span class="p">:</span><span class="n">Libro</span><span class="w"> </span><span class="p">{</span><span class="n">titulo</span><span class="p">:</span><span class="w"> </span><span class="s">'Design Patterns'</span><span class="p">,</span><span class="w"> </span><span class="n">autor</span><span class="p">:</span><span class="w"> </span><span class="s">'Gang of Four'</span><span class="p">,</span><span class="w"> </span><span class="n">genero</span><span class="p">:</span><span class="w"> </span><span class="s">'Técnico'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">libro3</span><span class="p">:</span><span class="n">Libro</span><span class="w"> </span><span class="p">{</span><span class="n">titulo</span><span class="p">:</span><span class="w"> </span><span class="s">'The Pragmatic Programmer'</span><span class="p">,</span><span class="w"> </span><span class="n">autor</span><span class="p">:</span><span class="w"> </span><span class="s">'Hunt &amp; Thomas'</span><span class="p">,</span><span class="w"> </span><span class="n">genero</span><span class="p">:</span><span class="w"> </span><span class="s">'Técnico'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">libro4</span><span class="p">:</span><span class="n">Libro</span><span class="w"> </span><span class="p">{</span><span class="n">titulo</span><span class="p">:</span><span class="w"> </span><span class="s">'Soft Skills'</span><span class="p">,</span><span class="w"> </span><span class="n">autor</span><span class="p">:</span><span class="w"> </span><span class="s">'John Sonmez'</span><span class="p">,</span><span class="w"> </span><span class="n">genero</span><span class="p">:</span><span class="w"> </span><span class="s">'Desarrollo Personal'</span><span class="p">}),</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// Valoraciones (filtrado colaborativo)</span>
<span class="w">  </span><span class="p">(</span><span class="n">ana</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">VALORO</span><span class="w"> </span><span class="p">{</span><span class="n">puntuacion</span><span class="p">:</span><span class="w"> </span><span class="m">5</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">libro1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">ana</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">VALORO</span><span class="w"> </span><span class="p">{</span><span class="n">puntuacion</span><span class="p">:</span><span class="w"> </span><span class="m">4</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">libro2</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">bob</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">VALORO</span><span class="w"> </span><span class="p">{</span><span class="n">puntuacion</span><span class="p">:</span><span class="w"> </span><span class="m">5</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">libro1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">bob</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">VALORO</span><span class="w"> </span><span class="p">{</span><span class="n">puntuacion</span><span class="p">:</span><span class="w"> </span><span class="m">5</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">libro3</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">carla</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">VALORO</span><span class="w"> </span><span class="p">{</span><span class="n">puntuacion</span><span class="p">:</span><span class="w"> </span><span class="m">4</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">libro2</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">carla</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">VALORO</span><span class="w"> </span><span class="p">{</span><span class="n">puntuacion</span><span class="p">:</span><span class="w"> </span><span class="m">5</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">libro4</span><span class="p">);</span>

<span class="c1">// Algoritmo: Usuarios con gustos similares → Recomendaciones</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">usuario_objetivo</span><span class="p">:</span><span class="n">Usuario</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Ana'</span><span class="p">})</span><span class="o">-[</span><span class="n">v1</span><span class="p">:</span><span class="n">VALORO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">libro_comun</span><span class="p">:</span><span class="n">Libro</span><span class="p">)</span><span class="o">&lt;-[</span><span class="n">v2</span><span class="p">:</span><span class="n">VALORO</span><span class="o">]-</span><span class="p">(</span><span class="n">usuario_similar</span><span class="p">:</span><span class="n">Usuario</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">abs</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">puntuacion</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="n">puntuacion</span><span class="p">)</span><span class="w"> </span><span class="p">&lt;=</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="c1">// Valoraciones similares</span>
<span class="k">WITH</span><span class="w"> </span><span class="n">usuario_objetivo</span><span class="p">,</span><span class="w"> </span><span class="n">usuario_similar</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">libro_comun</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">libros_en_comun</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">libros_en_comun</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">1</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">usuario_similar</span><span class="p">)</span><span class="o">-[</span><span class="n">v</span><span class="p">:</span><span class="n">VALORO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">libro_recomendado</span><span class="p">:</span><span class="n">Libro</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="p">(</span><span class="n">usuario_objetivo</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">VALORO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">libro_recomendado</span><span class="p">)</span>
<span class="w">  </span><span class="n">AND</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">puntuacion</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">4</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">libro_recomendado</span><span class="p">.</span><span class="n">titulo</span><span class="p">,</span><span class="w"> </span>
<span class="w">       </span><span class="n">avg</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">puntuacion</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">valoracion_promedio</span><span class="p">,</span>
<span class="w">       </span><span class="n">count</span><span class="p">(*)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">recomendado_por</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">valoracion_promedio</span><span class="w"> </span><span class="k">DESC</span><span class="p">,</span><span class="w"> </span><span class="n">recomendado_por</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
</pre>
    </div>
   </div>
  </div>
  <div class="chapter-container">
   <h2 id="43-proyecto-practico-sistema-de-gestion-academica">
    4.3 Proyecto práctico: Sistema de gestión académica
   </h2>
   <h3 id="requisitos-del-sistema">
    Requisitos del sistema
   </h3>
   <ul>
    <li>
     Gestionar estudiantes, profesores, cursos, materias, calificaciones
    </li>
    <li>
     Prerrequisitos entre materias
    </li>
    <li>
     Horarios y aulas
    </li>
    <li>
     Sistema de calificaciones y transcripciones
    </li>
    <li>
     Análisis de rendimiento académico
    </li>
   </ul>
   <h3 id="paso-1-analisis-y-diseno-del-modelo">
    Paso 1: Análisis y diseño del modelo
   </h3>
   <p>
    <strong>
     Entidades identificadas:
    </strong>
    - Estudiante, Profesor, Materia, Curso, Aula, Semestre
- Calificación, Prerrequisito, Horario
   </p>
   <p>
    <strong>
     Relaciones principales:
    </strong>
    - Estudiante INSCRITO_EN Curso
- Profesor ENSEÑA Curso
    <br/>
    - Curso PERTENECE_A Materia
- Materia TIENE_PRERREQUISITO Materia
- Curso SE_DICTA_EN Aula
- Estudiante OBTUVO Calificación
   </p>
   <h3 id="paso-2-implementacion-del-modelo">
    Paso 2: Implementación del modelo
   </h3>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="c1">// Limpiar base de datos</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="n">DETACH</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>

<span class="c1">// Crear semestres</span>
<span class="k">CREATE</span><span class="w"> </span>
<span class="w">  </span><span class="p">(</span><span class="n">sem_2023_1</span><span class="p">:</span><span class="n">Semestre</span><span class="w"> </span><span class="p">{</span><span class="n">año</span><span class="p">:</span><span class="w"> </span><span class="m">2023</span><span class="p">,</span><span class="w"> </span><span class="n">periodo</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'2023-1'</span><span class="p">,</span><span class="w"> </span><span class="n">fecha_inicio</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-02-01'</span><span class="p">),</span><span class="w"> </span><span class="n">fecha_fin</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-06-30'</span><span class="p">)}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">sem_2023_2</span><span class="p">:</span><span class="n">Semestre</span><span class="w"> </span><span class="p">{</span><span class="n">año</span><span class="p">:</span><span class="w"> </span><span class="m">2023</span><span class="p">,</span><span class="w"> </span><span class="n">periodo</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'2023-2'</span><span class="p">,</span><span class="w"> </span><span class="n">fecha_inicio</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-08-01'</span><span class="p">),</span><span class="w"> </span><span class="n">fecha_fin</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-12-15'</span><span class="p">)}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">sem_2024_1</span><span class="p">:</span><span class="n">Semestre</span><span class="w"> </span><span class="p">{</span><span class="n">año</span><span class="p">:</span><span class="w"> </span><span class="m">2024</span><span class="p">,</span><span class="w"> </span><span class="n">periodo</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'2024-1'</span><span class="p">,</span><span class="w"> </span><span class="n">fecha_inicio</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2024-02-01'</span><span class="p">),</span><span class="w"> </span><span class="n">fecha_fin</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2024-06-30'</span><span class="p">)}),</span>

<span class="c1">// Crear aulas</span>
<span class="w">  </span><span class="p">(</span><span class="n">aula101</span><span class="p">:</span><span class="n">Aula</span><span class="w"> </span><span class="p">{</span><span class="n">numero</span><span class="p">:</span><span class="w"> </span><span class="s">'101'</span><span class="p">,</span><span class="w"> </span><span class="n">edificio</span><span class="p">:</span><span class="w"> </span><span class="s">'A'</span><span class="p">,</span><span class="w"> </span><span class="n">capacidad</span><span class="p">:</span><span class="w"> </span><span class="m">30</span><span class="p">,</span><span class="w"> </span><span class="n">tipo</span><span class="p">:</span><span class="w"> </span><span class="s">'Laboratorio'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">aula102</span><span class="p">:</span><span class="n">Aula</span><span class="w"> </span><span class="p">{</span><span class="n">numero</span><span class="p">:</span><span class="w"> </span><span class="s">'102'</span><span class="p">,</span><span class="w"> </span><span class="n">edificio</span><span class="p">:</span><span class="w"> </span><span class="s">'A'</span><span class="p">,</span><span class="w"> </span><span class="n">capacidad</span><span class="p">:</span><span class="w"> </span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="n">tipo</span><span class="p">:</span><span class="w"> </span><span class="s">'Aula Teórica'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">aula201</span><span class="p">:</span><span class="n">Aula</span><span class="w"> </span><span class="p">{</span><span class="n">numero</span><span class="p">:</span><span class="w"> </span><span class="s">'201'</span><span class="p">,</span><span class="w"> </span><span class="n">edificio</span><span class="p">:</span><span class="w"> </span><span class="s">'B'</span><span class="p">,</span><span class="w"> </span><span class="n">capacidad</span><span class="p">:</span><span class="w"> </span><span class="m">25</span><span class="p">,</span><span class="w"> </span><span class="n">tipo</span><span class="p">:</span><span class="w"> </span><span class="s">'Laboratorio'</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">aula_magna</span><span class="p">:</span><span class="n">Aula</span><span class="w"> </span><span class="p">{</span><span class="n">numero</span><span class="p">:</span><span class="w"> </span><span class="s">'Magna'</span><span class="p">,</span><span class="w"> </span><span class="n">edificio</span><span class="p">:</span><span class="w"> </span><span class="s">'C'</span><span class="p">,</span><span class="w"> </span><span class="n">capacidad</span><span class="p">:</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">tipo</span><span class="p">:</span><span class="w"> </span><span class="s">'Auditorio'</span><span class="p">}),</span>

<span class="c1">// Crear materias con prerrequisitos</span>
<span class="w">  </span><span class="p">(</span><span class="n">prog1</span><span class="p">:</span><span class="n">Materia</span><span class="w"> </span><span class="p">{</span><span class="n">codigo</span><span class="p">:</span><span class="w"> </span><span class="s">'CS101'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Programación I'</span><span class="p">,</span><span class="w"> </span><span class="n">creditos</span><span class="p">:</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">nivel</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">prog2</span><span class="p">:</span><span class="n">Materia</span><span class="w"> </span><span class="p">{</span><span class="n">codigo</span><span class="p">:</span><span class="w"> </span><span class="s">'CS102'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Programación II'</span><span class="p">,</span><span class="w"> </span><span class="n">creditos</span><span class="p">:</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">nivel</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">estructuras</span><span class="p">:</span><span class="n">Materia</span><span class="w"> </span><span class="p">{</span><span class="n">codigo</span><span class="p">:</span><span class="w"> </span><span class="s">'CS201'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Estructuras de Datos'</span><span class="p">,</span><span class="w"> </span><span class="n">creditos</span><span class="p">:</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">nivel</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">algoritmos</span><span class="p">:</span><span class="n">Materia</span><span class="w"> </span><span class="p">{</span><span class="n">codigo</span><span class="p">:</span><span class="w"> </span><span class="s">'CS301'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Algoritmos'</span><span class="p">,</span><span class="w"> </span><span class="n">creditos</span><span class="p">:</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">nivel</span><span class="p">:</span><span class="w"> </span><span class="m">4</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">bd</span><span class="p">:</span><span class="n">Materia</span><span class="w"> </span><span class="p">{</span><span class="n">codigo</span><span class="p">:</span><span class="w"> </span><span class="s">'CS202'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Bases de Datos'</span><span class="p">,</span><span class="w"> </span><span class="n">creditos</span><span class="p">:</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">nivel</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">matematicas</span><span class="p">:</span><span class="n">Materia</span><span class="w"> </span><span class="p">{</span><span class="n">codigo</span><span class="p">:</span><span class="w"> </span><span class="s">'MAT101'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Matemáticas I'</span><span class="p">,</span><span class="w"> </span><span class="n">creditos</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">nivel</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">estadistica</span><span class="p">:</span><span class="n">Materia</span><span class="w"> </span><span class="p">{</span><span class="n">codigo</span><span class="p">:</span><span class="w"> </span><span class="s">'MAT201'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Estadística'</span><span class="p">,</span><span class="w"> </span><span class="n">creditos</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">nivel</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="p">}),</span>

<span class="c1">// Establecer prerrequisitos</span>
<span class="w">  </span><span class="p">(</span><span class="n">prog2</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TIENE_PRERREQUISITO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">prog1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">estructuras</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TIENE_PRERREQUISITO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">prog2</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">algoritmos</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TIENE_PRERREQUISITO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">estructuras</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">bd</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TIENE_PRERREQUISITO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">prog2</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">estadistica</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TIENE_PRERREQUISITO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">matematicas</span><span class="p">),</span>

<span class="c1">// Crear profesores</span>
<span class="w">  </span><span class="p">(</span><span class="n">prof_garcia</span><span class="p">:</span><span class="n">Profesor</span><span class="p">:</span><span class="n">Persona</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'P001'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Dr. García'</span><span class="p">,</span><span class="w"> </span><span class="n">especialidad</span><span class="p">:</span><span class="w"> </span><span class="s">'Algoritmos'</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">años_experiencia</span><span class="p">:</span><span class="w"> </span><span class="m">15</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="s">'garcia@universidad.edu'</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">prof_martinez</span><span class="p">:</span><span class="n">Profesor</span><span class="p">:</span><span class="n">Persona</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'P002'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Dra. Martínez'</span><span class="p">,</span><span class="w"> </span><span class="n">especialidad</span><span class="p">:</span><span class="w"> </span><span class="s">'Bases de Datos'</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">años_experiencia</span><span class="p">:</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="s">'martinez@universidad.edu'</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">prof_lopez</span><span class="p">:</span><span class="n">Profesor</span><span class="p">:</span><span class="n">Persona</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'P003'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Prof. López'</span><span class="p">,</span><span class="w"> </span><span class="n">especialidad</span><span class="p">:</span><span class="w"> </span><span class="s">'Programación'</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">años_experiencia</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="s">'lopez@universidad.edu'</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">prof_chen</span><span class="p">:</span><span class="n">Profesor</span><span class="p">:</span><span class="n">Persona</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'P004'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Dr. Chen'</span><span class="p">,</span><span class="w"> </span><span class="n">especialidad</span><span class="p">:</span><span class="w"> </span><span class="s">'Matemáticas'</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">años_experiencia</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="p">:</span><span class="w"> </span><span class="s">'chen@universidad.edu'</span>
<span class="w">  </span><span class="p">}),</span>

<span class="c1">// Crear estudiantes</span>
<span class="w">  </span><span class="p">(</span><span class="n">ana</span><span class="p">:</span><span class="n">Estudiante</span><span class="p">:</span><span class="n">Persona</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'E001'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Ana García'</span><span class="p">,</span><span class="w"> </span><span class="n">carrera</span><span class="p">:</span><span class="w"> </span><span class="s">'Ingeniería en Sistemas'</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">semestre_actual</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">fecha_ingreso</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2022-02-01'</span><span class="p">),</span><span class="w"> </span><span class="n">promedio_general</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="p">.</span><span class="m">5</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">bob</span><span class="p">:</span><span class="n">Estudiante</span><span class="p">:</span><span class="n">Persona</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'E002'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Bob Johnson'</span><span class="p">,</span><span class="w"> </span><span class="n">carrera</span><span class="p">:</span><span class="w"> </span><span class="s">'Ingeniería en Sistemas'</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">semestre_actual</span><span class="p">:</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">fecha_ingreso</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2021-08-01'</span><span class="p">),</span><span class="w"> </span><span class="n">promedio_general</span><span class="p">:</span><span class="w"> </span><span class="m">9</span><span class="p">.</span><span class="m">2</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">carla</span><span class="p">:</span><span class="n">Estudiante</span><span class="p">:</span><span class="n">Persona</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'E003'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Carla López'</span><span class="p">,</span><span class="w"> </span><span class="n">carrera</span><span class="p">:</span><span class="w"> </span><span class="s">'Ingeniería en Sistemas'</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">semestre_actual</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">fecha_ingreso</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2022-08-01'</span><span class="p">),</span><span class="w"> </span><span class="n">promedio_general</span><span class="p">:</span><span class="w"> </span><span class="m">7</span><span class="p">.</span><span class="m">8</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">david</span><span class="p">:</span><span class="n">Estudiante</span><span class="p">:</span><span class="n">Persona</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'E004'</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'David Chen'</span><span class="p">,</span><span class="w"> </span><span class="n">carrera</span><span class="p">:</span><span class="w"> </span><span class="s">'Ingeniería en Sistemas'</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">semestre_actual</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">fecha_ingreso</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2024-02-01'</span><span class="p">),</span><span class="w"> </span><span class="n">promedio_general</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="p">.</span><span class="m">0</span>
<span class="w">  </span><span class="p">}),</span>

<span class="c1">// Crear cursos (instancias de materias en semestres específicos)</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_prog1_23_1</span><span class="p">:</span><span class="n">Curso</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'C001'</span><span class="p">,</span><span class="w"> </span><span class="n">seccion</span><span class="p">:</span><span class="w"> </span><span class="s">'A'</span><span class="p">,</span><span class="w"> </span><span class="n">cupo_maximo</span><span class="p">:</span><span class="w"> </span><span class="m">30</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">horario</span><span class="p">:</span><span class="w"> </span><span class="s">'Lunes 8-10, Miércoles 8-10'</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_prog2_23_1</span><span class="p">:</span><span class="n">Curso</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'C002'</span><span class="p">,</span><span class="w"> </span><span class="n">seccion</span><span class="p">:</span><span class="w"> </span><span class="s">'A'</span><span class="p">,</span><span class="w"> </span><span class="n">cupo_maximo</span><span class="p">:</span><span class="w"> </span><span class="m">25</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">horario</span><span class="p">:</span><span class="w"> </span><span class="s">'Martes 10-12, Jueves 10-12'</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_estructuras_23_2</span><span class="p">:</span><span class="n">Curso</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'C003'</span><span class="p">,</span><span class="w"> </span><span class="n">seccion</span><span class="p">:</span><span class="w"> </span><span class="s">'A'</span><span class="p">,</span><span class="w"> </span><span class="n">cupo_maximo</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">horario</span><span class="p">:</span><span class="w"> </span><span class="s">'Lunes 14-16, Miércoles 14-16'</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_bd_23_2</span><span class="p">:</span><span class="n">Curso</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'C004'</span><span class="p">,</span><span class="w"> </span><span class="n">seccion</span><span class="p">:</span><span class="w"> </span><span class="s">'A'</span><span class="p">,</span><span class="w"> </span><span class="n">cupo_maximo</span><span class="p">:</span><span class="w"> </span><span class="m">25</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">horario</span><span class="p">:</span><span class="w"> </span><span class="s">'Martes 8-10, Jueves 8-10'</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_algoritmos_24_1</span><span class="p">:</span><span class="n">Curso</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'C005'</span><span class="p">,</span><span class="w"> </span><span class="n">seccion</span><span class="p">:</span><span class="w"> </span><span class="s">'A'</span><span class="p">,</span><span class="w"> </span><span class="n">cupo_maximo</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">horario</span><span class="p">:</span><span class="w"> </span><span class="s">'Lunes 10-12, Miércoles 10-12'</span>
<span class="w">  </span><span class="p">}),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_matematicas_24_1</span><span class="p">:</span><span class="n">Curso</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">'C006'</span><span class="p">,</span><span class="w"> </span><span class="n">seccion</span><span class="p">:</span><span class="w"> </span><span class="s">'A'</span><span class="p">,</span><span class="w"> </span><span class="n">cupo_maximo</span><span class="p">:</span><span class="w"> </span><span class="m">35</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">horario</span><span class="p">:</span><span class="w"> </span><span class="s">'Martes 14-16, Jueves 14-16'</span>
<span class="w">  </span><span class="p">}),</span>

<span class="c1">// Relacionar cursos con materias y semestres</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_prog1_23_1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">prog1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_prog1_23_1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">DICTADO_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">sem_2023_1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_prog2_23_1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">prog2</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_prog2_23_1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">DICTADO_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">sem_2023_1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_estructuras_23_2</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">estructuras</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_estructuras_23_2</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">DICTADO_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">sem_2023_2</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_bd_23_2</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">bd</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_bd_23_2</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">DICTADO_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">sem_2023_2</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_algoritmos_24_1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">algoritmos</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_algoritmos_24_1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">DICTADO_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">sem_2024_1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_matematicas_24_1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">matematicas</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_matematicas_24_1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">DICTADO_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">sem_2024_1</span><span class="p">),</span>

<span class="c1">// Asignar profesores a cursos</span>
<span class="w">  </span><span class="p">(</span><span class="n">prof_lopez</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">ENSEÑA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_prog1_23_1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">prof_lopez</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">ENSEÑA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_prog2_23_1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">prof_garcia</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">ENSEÑA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_estructuras_23_2</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">prof_martinez</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">ENSEÑA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_bd_23_2</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">prof_garcia</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">ENSEÑA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_algoritmos_24_1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">prof_chen</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">ENSEÑA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_matematicas_24_1</span><span class="p">),</span>

<span class="c1">// Asignar aulas a cursos</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_prog1_23_1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">SE_DICTA_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">aula101</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_prog2_23_1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">SE_DICTA_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">aula101</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_estructuras_23_2</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">SE_DICTA_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">aula201</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_bd_23_2</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">SE_DICTA_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">aula102</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_algoritmos_24_1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">SE_DICTA_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">aula201</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">curso_matematicas_24_1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">SE_DICTA_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">aula_magna</span><span class="p">),</span>

<span class="c1">// Inscribir estudiantes en cursos</span>
<span class="w">  </span><span class="p">(</span><span class="n">ana</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSCRITO_EN</span><span class="w"> </span><span class="p">{</span><span class="n">fecha_inscripcion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-01-15'</span><span class="p">)}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_prog1_23_1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">bob</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSCRITO_EN</span><span class="w"> </span><span class="p">{</span><span class="n">fecha_inscripcion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-01-15'</span><span class="p">)}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_prog2_23_1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">carla</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSCRITO_EN</span><span class="w"> </span><span class="p">{</span><span class="n">fecha_inscripcion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-01-15'</span><span class="p">)}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_prog1_23_1</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">david</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSCRITO_EN</span><span class="w"> </span><span class="p">{</span><span class="n">fecha_inscripcion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2024-01-15'</span><span class="p">)}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_matematicas_24_1</span><span class="p">),</span>
<span class="w">  </span>
<span class="w">  </span><span class="p">(</span><span class="n">ana</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSCRITO_EN</span><span class="w"> </span><span class="p">{</span><span class="n">fecha_inscripcion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-07-15'</span><span class="p">)}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_estructuras_23_2</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">bob</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSCRITO_EN</span><span class="w"> </span><span class="p">{</span><span class="n">fecha_inscripcion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-07-15'</span><span class="p">)}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_bd_23_2</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="n">carla</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSCRITO_EN</span><span class="w"> </span><span class="p">{</span><span class="n">fecha_inscripcion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-07-15'</span><span class="p">)}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_estructuras_23_2</span><span class="p">),</span>
<span class="w">  </span>
<span class="w">  </span><span class="p">(</span><span class="n">bob</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSCRITO_EN</span><span class="w"> </span><span class="p">{</span><span class="n">fecha_inscripcion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2024-01-15'</span><span class="p">)}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_algoritmos_24_1</span><span class="p">),</span>

<span class="c1">// Crear calificaciones</span>
<span class="w">  </span><span class="p">(</span><span class="n">ana</span><span class="p">)</span><span class="err">-</span><span class="o">[</span><span class="p">:</span><span class="n">OBTUVO</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">nota_final</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="p">.</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">parcial1</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">parcial2</span><span class="p">:</span><span class="w"> </span><span class="m">9</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">trabajos</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="p">.</span><span class="m">5</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">fecha_calificacion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-06-15'</span><span class="p">),</span><span class="w"> </span><span class="n">estado</span><span class="p">:</span><span class="w"> </span><span class="s">'Aprobado'</span>
<span class="w">  </span><span class="p">}</span><span class="o">]</span><span class="err">-</span><span class="p">&gt;(</span><span class="n">curso_prog1_23_1</span><span class="p">),</span>
<span class="w">  </span>
<span class="w">  </span><span class="p">(</span><span class="n">bob</span><span class="p">)</span><span class="err">-</span><span class="o">[</span><span class="p">:</span><span class="n">OBTUVO</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">nota_final</span><span class="p">:</span><span class="w"> </span><span class="m">9</span><span class="p">.</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">parcial1</span><span class="p">:</span><span class="w"> </span><span class="m">9</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">parcial2</span><span class="p">:</span><span class="w"> </span><span class="m">9</span><span class="p">.</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">trabajos</span><span class="p">:</span><span class="w"> </span><span class="m">9</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">fecha_calificacion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-06-15'</span><span class="p">),</span><span class="w"> </span><span class="n">estado</span><span class="p">:</span><span class="w"> </span><span class="s">'Aprobado'</span>
<span class="w">  </span><span class="p">}</span><span class="o">]</span><span class="err">-</span><span class="p">&gt;(</span><span class="n">curso_prog2_23_1</span><span class="p">),</span>
<span class="w">  </span>
<span class="w">  </span><span class="p">(</span><span class="n">carla</span><span class="p">)</span><span class="err">-</span><span class="o">[</span><span class="p">:</span><span class="n">OBTUVO</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">nota_final</span><span class="p">:</span><span class="w"> </span><span class="m">7</span><span class="p">.</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="n">parcial1</span><span class="p">:</span><span class="w"> </span><span class="m">7</span><span class="p">.</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">parcial2</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">trabajos</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">fecha_calificacion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-06-15'</span><span class="p">),</span><span class="w"> </span><span class="n">estado</span><span class="p">:</span><span class="w"> </span><span class="s">'Aprobado'</span>
<span class="w">  </span><span class="p">}</span><span class="o">]</span><span class="err">-</span><span class="p">&gt;(</span><span class="n">curso_prog1_23_1</span><span class="p">),</span>
<span class="w">  </span>
<span class="w">  </span><span class="p">(</span><span class="n">ana</span><span class="p">)</span><span class="err">-</span><span class="o">[</span><span class="p">:</span><span class="n">OBTUVO</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">nota_final</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="p">.</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="n">parcial1</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="p">.</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">parcial2</span><span class="p">:</span><span class="w"> </span><span class="m">9</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">trabajos</span><span class="p">:</span><span class="w"> </span><span class="m">9</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">fecha_calificacion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-12-15'</span><span class="p">),</span><span class="w"> </span><span class="n">estado</span><span class="p">:</span><span class="w"> </span><span class="s">'Aprobado'</span>
<span class="w">  </span><span class="p">}</span><span class="o">]</span><span class="err">-</span><span class="p">&gt;(</span><span class="n">curso_estructuras_23_2</span><span class="p">),</span>
<span class="w">  </span>
<span class="w">  </span><span class="p">(</span><span class="n">bob</span><span class="p">)</span><span class="err">-</span><span class="o">[</span><span class="p">:</span><span class="n">OBTUVO</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">nota_final</span><span class="p">:</span><span class="w"> </span><span class="m">9</span><span class="p">.</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">parcial1</span><span class="p">:</span><span class="w"> </span><span class="m">9</span><span class="p">.</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">parcial2</span><span class="p">:</span><span class="w"> </span><span class="m">9</span><span class="p">.</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="n">trabajos</span><span class="p">:</span><span class="w"> </span><span class="m">9</span><span class="p">.</span><span class="m">5</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">fecha_calificacion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-12-15'</span><span class="p">),</span><span class="w"> </span><span class="n">estado</span><span class="p">:</span><span class="w"> </span><span class="s">'Aprobado'</span>
<span class="w">  </span><span class="p">}</span><span class="o">]</span><span class="err">-</span><span class="p">&gt;(</span><span class="n">curso_bd_23_2</span><span class="p">),</span>
<span class="w">  </span>
<span class="w">  </span><span class="p">(</span><span class="n">carla</span><span class="p">)</span><span class="err">-</span><span class="o">[</span><span class="p">:</span><span class="n">OBTUVO</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">nota_final</span><span class="p">:</span><span class="w"> </span><span class="m">6</span><span class="p">.</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="n">parcial1</span><span class="p">:</span><span class="w"> </span><span class="m">6</span><span class="p">.</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">parcial2</span><span class="p">:</span><span class="w"> </span><span class="m">7</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">trabajos</span><span class="p">:</span><span class="w"> </span><span class="m">7</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">fecha_calificacion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="s">'2023-12-15'</span><span class="p">),</span><span class="w"> </span><span class="n">estado</span><span class="p">:</span><span class="w"> </span><span class="s">'Aprobado'</span>
<span class="w">  </span><span class="p">}</span><span class="o">]</span><span class="err">-</span><span class="p">&gt;(</span><span class="n">curso_estructuras_23_2</span><span class="p">);</span>
</pre>
    </div>
   </div>
   <h3 id="paso-3-consultas-de-analisis-academico">
    Paso 3: Consultas de análisis académico
   </h3>
   <p>
    <strong>
     1. Transcripción académica de un estudiante:
    </strong>
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">estudiante</span><span class="p">:</span><span class="n">Estudiante</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Ana García'</span><span class="p">})</span><span class="o">-[</span><span class="n">calificacion</span><span class="p">:</span><span class="n">OBTUVO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso</span><span class="p">:</span><span class="n">Curso</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">materia</span><span class="p">:</span><span class="n">Materia</span><span class="p">)</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">curso</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">DICTADO_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">semestre</span><span class="p">:</span><span class="n">Semestre</span><span class="p">)</span>
<span class="k">RETURN</span><span class="w"> </span>
<span class="w">  </span><span class="n">semestre</span><span class="p">.</span><span class="n">año</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">año</span><span class="p">,</span>
<span class="w">  </span><span class="n">semestre</span><span class="p">.</span><span class="n">periodo</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">periodo</span><span class="p">,</span>
<span class="w">  </span><span class="n">semestre</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">semestre</span><span class="p">,</span>
<span class="w">  </span><span class="n">materia</span><span class="p">.</span><span class="n">codigo</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">codigo</span><span class="p">,</span>
<span class="w">  </span><span class="n">materia</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">materia</span><span class="p">,</span>
<span class="w">  </span><span class="n">materia</span><span class="p">.</span><span class="n">creditos</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">creditos</span><span class="p">,</span>
<span class="w">  </span><span class="n">calificacion</span><span class="p">.</span><span class="n">nota_final</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">nota</span><span class="p">,</span>
<span class="w">  </span><span class="n">calificacion</span><span class="p">.</span><span class="n">estado</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">estado</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">semestre</span><span class="p">.</span><span class="n">año</span><span class="p">,</span><span class="w"> </span><span class="n">semestre</span><span class="p">.</span><span class="n">periodo</span><span class="p">,</span><span class="w"> </span><span class="n">materia</span><span class="p">.</span><span class="n">codigo</span><span class="p">;</span>
</pre>
    </div>
   </div>
   <p>
    <strong>
     2. Análisis de rendimiento por profesor:
    </strong>
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">profesor</span><span class="p">:</span><span class="n">Profesor</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">ENSEÑA</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso</span><span class="p">:</span><span class="n">Curso</span><span class="p">)</span><span class="o">&lt;-[</span><span class="n">calificacion</span><span class="p">:</span><span class="n">OBTUVO</span><span class="o">]-</span><span class="p">(</span><span class="n">estudiante</span><span class="p">:</span><span class="n">Estudiante</span><span class="p">)</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">curso</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">materia</span><span class="p">:</span><span class="n">Materia</span><span class="p">)</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">profesor</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span>
<span class="w">       </span><span class="n">materia</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span>
<span class="w">       </span><span class="n">count</span><span class="p">(</span><span class="n">calificacion</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_estudiantes</span><span class="p">,</span>
<span class="w">       </span><span class="n">avg</span><span class="p">(</span><span class="n">calificacion</span><span class="p">.</span><span class="n">nota_final</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">promedio_curso</span><span class="p">,</span>
<span class="w">       </span><span class="n">count</span><span class="p">(</span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">calificacion</span><span class="p">.</span><span class="n">estado</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">'Aprobado'</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="k">END</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">aprobados</span><span class="p">,</span>
<span class="w">       </span><span class="n">round</span><span class="p">(</span><span class="m">100</span><span class="p">.</span><span class="m">0</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">calificacion</span><span class="p">.</span><span class="n">estado</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">'Aprobado'</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="k">END</span><span class="p">)</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">calificacion</span><span class="p">),</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">porcentaje_aprobacion</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">promedio_curso</span><span class="w"> </span><span class="k">DESC</span>
</pre>
    </div>
   </div>
   <p>
    <strong>
     3. Verificación de prerrequisitos:
    </strong>
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="c1">// Verificar si un estudiante puede inscribirse en una materia</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">estudiante</span><span class="p">:</span><span class="n">Estudiante</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Ana García'</span><span class="p">})</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">materia_objetivo</span><span class="p">:</span><span class="n">Materia</span><span class="w"> </span><span class="p">{</span><span class="n">codigo</span><span class="p">:</span><span class="w"> </span><span class="s">'CS301'</span><span class="p">})</span><span class="w">  </span><span class="c1">// Algoritmos</span>
<span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">materia_objetivo</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TIENE_PRERREQUISITO</span><span class="p">*</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">prerrequisito</span><span class="p">:</span><span class="n">Materia</span><span class="p">)</span>
<span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">estudiante</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">OBTUVO</span><span class="w"> </span><span class="p">{</span><span class="n">estado</span><span class="p">:</span><span class="w"> </span><span class="s">'Aprobado'</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_aprobado</span><span class="p">:</span><span class="n">Curso</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">materia_aprobada</span><span class="p">:</span><span class="n">Materia</span><span class="p">)</span>

<span class="k">WITH</span><span class="w"> </span><span class="n">estudiante</span><span class="p">,</span><span class="w"> </span><span class="n">materia_objetivo</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="k">collect</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">prerrequisito</span><span class="p">.</span><span class="n">codigo</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">prerrequisitos_necesarios</span><span class="p">,</span>
<span class="w">     </span><span class="k">collect</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">materia_aprobada</span><span class="p">.</span><span class="n">codigo</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">materias_aprobadas</span>

<span class="k">RETURN</span><span class="w"> </span><span class="n">estudiante</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span>
<span class="w">       </span><span class="n">materia_objetivo</span><span class="p">.</span><span class="n">codigo</span><span class="p">,</span>
<span class="w">       </span><span class="n">prerrequisitos_necesarios</span><span class="p">,</span>
<span class="w">       </span><span class="n">materias_aprobadas</span><span class="p">,</span>
<span class="w">       </span><span class="k">ALL</span><span class="p">(</span><span class="n">prereq</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">prerrequisitos_necesarios</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">prereq</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">materias_aprobadas</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">puede_inscribirse</span><span class="p">;</span>
</pre>
    </div>
   </div>
   <p>
    <strong>
     4. Planificación de horarios (detectar conflictos):
    </strong>
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">estudiante</span><span class="p">:</span><span class="n">Estudiante</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Bob Johnson'</span><span class="p">})</span><span class="o">-[</span><span class="p">:</span><span class="n">INSCRITO_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso1</span><span class="p">:</span><span class="n">Curso</span><span class="p">)</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">estudiante</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSCRITO_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso2</span><span class="p">:</span><span class="n">Curso</span><span class="p">)</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">curso1</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">DICTADO_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">semestre</span><span class="p">:</span><span class="n">Semestre</span><span class="p">)</span><span class="o">&lt;-[</span><span class="p">:</span><span class="n">DICTADO_EN</span><span class="o">]-</span><span class="p">(</span><span class="n">curso2</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">curso1</span><span class="w"> </span><span class="p">&lt;&gt;</span><span class="w"> </span><span class="n">curso2</span>
<span class="w">  </span><span class="n">AND</span><span class="w"> </span><span class="n">curso1</span><span class="p">.</span><span class="n">horario</span><span class="w"> </span><span class="n">CONTAINS</span><span class="w"> </span><span class="s">'Lunes'</span>
<span class="w">  </span><span class="n">AND</span><span class="w"> </span><span class="n">curso2</span><span class="p">.</span><span class="n">horario</span><span class="w"> </span><span class="n">CONTAINS</span><span class="w"> </span><span class="s">'Lunes'</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">estudiante</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span>
<span class="w">       </span><span class="n">curso1</span><span class="p">.</span><span class="n">horario</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">horario1</span><span class="p">,</span>
<span class="w">       </span><span class="n">curso2</span><span class="p">.</span><span class="n">horario</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">horario2</span><span class="p">,</span>
<span class="w">       </span><span class="s">'Posible conflicto de horarios'</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">alerta</span><span class="p">;</span>
</pre>
    </div>
   </div>
   <p>
    <strong>
     5. Ranking de estudiantes por promedio:
    </strong>
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">estudiante</span><span class="p">:</span><span class="n">Estudiante</span><span class="p">)</span><span class="o">-[</span><span class="n">calificacion</span><span class="p">:</span><span class="n">OBTUVO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso</span><span class="p">:</span><span class="n">Curso</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">materia</span><span class="p">:</span><span class="n">Materia</span><span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="n">estudiante</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="n">sum</span><span class="p">(</span><span class="n">calificacion</span><span class="p">.</span><span class="n">nota_final</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="n">materia</span><span class="p">.</span><span class="n">creditos</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">puntos_totales</span><span class="p">,</span>
<span class="w">     </span><span class="n">sum</span><span class="p">(</span><span class="n">materia</span><span class="p">.</span><span class="n">creditos</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">creditos_totales</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">estudiante</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span>
<span class="w">       </span><span class="n">estudiante</span><span class="p">.</span><span class="n">carrera</span><span class="p">,</span>
<span class="w">       </span><span class="n">creditos_totales</span><span class="p">,</span>
<span class="w">       </span><span class="n">round</span><span class="p">(</span><span class="n">puntos_totales</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="n">creditos_totales</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">promedio_ponderado</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">promedio_ponderado</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
</pre>
    </div>
   </div>
   <p>
    <strong>
     6. Análisis de utilización de aulas:
    </strong>
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">aula</span><span class="p">:</span><span class="n">Aula</span><span class="p">)</span><span class="o">&lt;-[</span><span class="p">:</span><span class="n">SE_DICTA_EN</span><span class="o">]-</span><span class="p">(</span><span class="n">curso</span><span class="p">:</span><span class="n">Curso</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">DICTADO_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">semestre</span><span class="p">:</span><span class="n">Semestre</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'2023-2'</span><span class="p">})</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">curso</span><span class="p">)</span><span class="o">&lt;-[</span><span class="p">:</span><span class="n">INSCRITO_EN</span><span class="o">]-</span><span class="p">(</span><span class="n">estudiante</span><span class="p">:</span><span class="n">Estudiante</span><span class="p">)</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">aula</span><span class="p">.</span><span class="n">numero</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">aula</span><span class="p">,</span>
<span class="w">       </span><span class="n">aula</span><span class="p">.</span><span class="n">edificio</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">edificio</span><span class="p">,</span>
<span class="w">       </span><span class="n">aula</span><span class="p">.</span><span class="n">capacidad</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">capacidad</span><span class="p">,</span>
<span class="w">       </span><span class="n">count</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">curso</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">cursos_programados</span><span class="p">,</span>
<span class="w">       </span><span class="n">count</span><span class="p">(</span><span class="n">estudiante</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_estudiantes</span><span class="p">,</span>
<span class="w">       </span><span class="n">round</span><span class="p">(</span><span class="m">100</span><span class="p">.</span><span class="m">0</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">estudiante</span><span class="p">)</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="p">(</span><span class="n">aula</span><span class="p">.</span><span class="n">capacidad</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">curso</span><span class="p">)),</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">porcentaje_ocupacion</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">porcentaje_ocupacion</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
</pre>
    </div>
   </div>
   <h3 id="paso-4-funciones-avanzadas-para-analisis-academico">
    Paso 4: Funciones avanzadas para análisis académico
   </h3>
   <p>
    <strong>
     1. Detección de estudiantes en riesgo académico:
    </strong>
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">estudiante</span><span class="p">:</span><span class="n">Estudiante</span><span class="p">)</span><span class="o">-[</span><span class="n">calificacion</span><span class="p">:</span><span class="n">OBTUVO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso</span><span class="p">:</span><span class="n">Curso</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">calificacion</span><span class="p">.</span><span class="n">nota_final</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">7</span><span class="p">.</span><span class="m">0</span>
<span class="k">WITH</span><span class="w"> </span><span class="n">estudiante</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">calificacion</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">materias_reprobadas</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">materias_reprobadas</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">2</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">estudiante</span><span class="p">)</span><span class="o">-[</span><span class="n">cal</span><span class="p">:</span><span class="n">OBTUVO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Curso</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">materia</span><span class="p">:</span><span class="n">Materia</span><span class="p">)</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">estudiante</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span>
<span class="w">       </span><span class="n">estudiante</span><span class="p">.</span><span class="n">carrera</span><span class="p">,</span>
<span class="w">       </span><span class="n">materias_reprobadas</span><span class="p">,</span>
<span class="w">       </span><span class="n">avg</span><span class="p">(</span><span class="n">cal</span><span class="p">.</span><span class="n">nota_final</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">promedio_actual</span><span class="p">,</span>
<span class="w">       </span><span class="s">'Estudiante en riesgo'</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">alerta</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">materias_reprobadas</span><span class="w"> </span><span class="k">DESC</span><span class="p">,</span><span class="w"> </span><span class="n">promedio_actual</span><span class="w"> </span><span class="k">ASC</span><span class="p">;</span>
</pre>
    </div>
   </div>
   <p>
    <strong>
     2. Recomendaciones de materias para el próximo semestre:
    </strong>
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">estudiante</span><span class="p">:</span><span class="n">Estudiante</span><span class="w"> </span><span class="p">{</span><span class="n">nombre</span><span class="p">:</span><span class="w"> </span><span class="s">'Ana García'</span><span class="p">})</span><span class="o">-[</span><span class="p">:</span><span class="n">OBTUVO</span><span class="w"> </span><span class="p">{</span><span class="n">estado</span><span class="p">:</span><span class="w"> </span><span class="s">'Aprobado'</span><span class="p">}</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso_aprobado</span><span class="p">:</span><span class="n">Curso</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">materia_aprobada</span><span class="p">:</span><span class="n">Materia</span><span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="n">estudiante</span><span class="p">,</span><span class="w"> </span><span class="k">collect</span><span class="p">(</span><span class="n">materia_aprobada</span><span class="p">.</span><span class="n">codigo</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">materias_completadas</span>

<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">materia_disponible</span><span class="p">:</span><span class="n">Materia</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="n">materia_disponible</span><span class="p">.</span><span class="n">codigo</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">materias_completadas</span>
<span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">materia_disponible</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">TIENE_PRERREQUISITO</span><span class="p">*</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">prerrequisito</span><span class="p">:</span><span class="n">Materia</span><span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="n">estudiante</span><span class="p">,</span><span class="w"> </span><span class="n">materia_disponible</span><span class="p">,</span><span class="w"> </span><span class="n">materias_completadas</span><span class="p">,</span>
<span class="w">     </span><span class="k">collect</span><span class="p">(</span><span class="n">prerrequisito</span><span class="p">.</span><span class="n">codigo</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">prerrequisitos_necesarios</span>

<span class="k">WHERE</span><span class="w"> </span><span class="k">ALL</span><span class="p">(</span><span class="n">prereq</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">prerrequisitos_necesarios</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">prereq</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">materias_completadas</span><span class="p">)</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">materia_disponible</span><span class="p">.</span><span class="n">codigo</span><span class="p">,</span>
<span class="w">       </span><span class="n">materia_disponible</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span>
<span class="w">       </span><span class="n">materia_disponible</span><span class="p">.</span><span class="n">creditos</span><span class="p">,</span>
<span class="w">       </span><span class="n">materia_disponible</span><span class="p">.</span><span class="n">nivel</span><span class="p">,</span>
<span class="w">       </span><span class="n">prerrequisitos_necesarios</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">materia_disponible</span><span class="p">.</span><span class="n">nivel</span><span class="p">,</span><span class="w"> </span><span class="n">materia_disponible</span><span class="p">.</span><span class="n">codigo</span><span class="p">;</span>
</pre>
    </div>
   </div>
   <p>
    <strong>
     3. Análisis de progresión académica:
    </strong>
   </p>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">estudiante</span><span class="p">:</span><span class="n">Estudiante</span><span class="p">)</span><span class="o">-[</span><span class="n">calificacion</span><span class="p">:</span><span class="n">OBTUVO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">curso</span><span class="p">:</span><span class="n">Curso</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">DICTADO_EN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">semestre</span><span class="p">:</span><span class="n">Semestre</span><span class="p">)</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">curso</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">INSTANCIA_DE</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">materia</span><span class="p">:</span><span class="n">Materia</span><span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span>
<span class="w">  </span><span class="n">estudiante</span><span class="p">,</span><span class="w"> </span>
<span class="w">  </span><span class="n">semestre</span><span class="p">,</span>
<span class="w">  </span><span class="n">count</span><span class="p">(</span><span class="n">materia</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">materias_cursadas</span><span class="p">,</span>
<span class="w">  </span><span class="n">sum</span><span class="p">(</span><span class="n">materia</span><span class="p">.</span><span class="n">creditos</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">creditos_semestre</span><span class="p">,</span>
<span class="w">  </span><span class="n">avg</span><span class="p">(</span><span class="n">calificacion</span><span class="p">.</span><span class="n">nota_final</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">promedio_semestre</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">semestre</span><span class="p">.</span><span class="n">año</span><span class="p">,</span><span class="w"> </span><span class="n">semestre</span><span class="p">.</span><span class="n">periodo</span>
<span class="k">WITH</span><span class="w"> </span><span class="n">estudiante</span><span class="p">,</span>
<span class="w">     </span><span class="k">collect</span><span class="p">({</span>
<span class="w">       </span><span class="n">semestre</span><span class="p">:</span><span class="w"> </span><span class="n">semestre</span><span class="p">,</span>
<span class="w">       </span><span class="n">materias_cursadas</span><span class="p">:</span><span class="w"> </span><span class="n">materias_cursadas</span><span class="p">,</span>
<span class="w">       </span><span class="n">creditos_semestre</span><span class="p">:</span><span class="w"> </span><span class="n">creditos_semestre</span><span class="p">,</span>
<span class="w">       </span><span class="n">promedio</span><span class="p">:</span><span class="w"> </span><span class="n">promedio_semestre</span>
<span class="w">     </span><span class="p">})</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">datos_semestres</span>
<span class="k">WITH</span><span class="w"> </span><span class="n">estudiante</span><span class="p">,</span><span class="w"> </span><span class="n">datos_semestres</span><span class="p">,</span><span class="w"> </span><span class="n">range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">(</span><span class="n">datos_semestres</span><span class="p">)</span><span class="err">-</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">idxs</span>
<span class="k">UNWIND</span><span class="w"> </span><span class="n">idxs</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">i</span>
<span class="k">WITH</span><span class="w"> </span><span class="n">estudiante</span><span class="p">,</span><span class="w"> </span><span class="n">datos_semestres</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span>
<span class="w">     </span><span class="n">datos_semestres</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">actual</span><span class="p">,</span>
<span class="w">     </span><span class="k">CASE</span><span class="w"> </span>
<span class="w">       </span><span class="k">WHEN</span><span class="w"> </span><span class="n">i</span><span class="p">=</span><span class="m">0</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="k">null</span>
<span class="w">       </span><span class="n">ELSE</span><span class="w"> </span><span class="n">datos_semestres</span><span class="o">[</span><span class="n">i</span><span class="err">-</span><span class="m">1</span><span class="o">]</span><span class="p">.</span><span class="n">promedio</span>
<span class="w">     </span><span class="k">END</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">promedio_anterior</span>
<span class="k">RETURN</span><span class="w"> </span>
<span class="w">   </span><span class="n">estudiante</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span>
<span class="w">   </span><span class="n">actual</span><span class="p">.</span><span class="n">semestre</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">semestre</span><span class="p">,</span>
<span class="w">   </span><span class="n">actual</span><span class="p">.</span><span class="n">materias_cursadas</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">materias_cursadas</span><span class="p">,</span>
<span class="w">   </span><span class="n">actual</span><span class="p">.</span><span class="n">creditos_semestre</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">creditos_semestre</span><span class="p">,</span>
<span class="w">   </span><span class="n">actual</span><span class="p">.</span><span class="n">promedio</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">promedio_semestre</span><span class="p">,</span>
<span class="w">   </span><span class="n">promedio_anterior</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">estudiante</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">actual</span><span class="p">.</span><span class="n">semestre</span><span class="p">.</span><span class="n">año</span><span class="p">,</span><span class="w"> </span><span class="n">actual</span><span class="p">.</span><span class="n">semestre</span><span class="p">.</span><span class="n">periodo</span><span class="p">;</span>
</pre>
    </div>
   </div>
  </div>
  <div class="chapter-container">
   <h2 id="44-importacion-de-datos-desde-csv">
    4.4 Importación de datos desde CSV
   </h2>
   <h3 id="preparacion-de-datos">
    Preparación de datos
   </h3>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="c1">// Ejemplo: Importar estudiantes desde CSV</span>
<span class="n">LOAD</span><span class="w"> </span><span class="n">CSV</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="n">HEADERS</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="s">'file:///estudiantes.csv'</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">row</span>
<span class="k">MERGE</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">:</span><span class="n">Estudiante</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="n">student_id</span><span class="p">})</span>
<span class="k">SET</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span>
<span class="w">    </span><span class="n">e</span><span class="p">.</span><span class="n">email</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="n">email</span><span class="p">,</span>
<span class="w">    </span><span class="n">e</span><span class="p">.</span><span class="n">carrera</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="n">carrera</span><span class="p">,</span>
<span class="w">    </span><span class="n">e</span><span class="p">.</span><span class="n">fecha_ingreso</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="n">fecha_ingreso</span><span class="p">),</span>
<span class="w">    </span><span class="n">e</span><span class="p">.</span><span class="n">semestre_actual</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">toInteger</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="n">semestre_actual</span><span class="p">);</span>

<span class="c1">// Importar calificaciones con relaciones</span>
<span class="n">LOAD</span><span class="w"> </span><span class="n">CSV</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="n">HEADERS</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="s">'file:///calificaciones.csv'</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">row</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">estudiante</span><span class="p">:</span><span class="n">Estudiante</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="n">student_id</span><span class="p">})</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">curso</span><span class="p">:</span><span class="n">Curso</span><span class="w"> </span><span class="p">{</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="n">course_id</span><span class="p">})</span>
<span class="k">MERGE</span><span class="w"> </span><span class="p">(</span><span class="n">estudiante</span><span class="p">)</span><span class="err">-</span><span class="o">[</span><span class="p">:</span><span class="n">OBTUVO</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">nota_final</span><span class="p">:</span><span class="w"> </span><span class="n">toFloat</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="n">nota_final</span><span class="p">),</span>
<span class="w">  </span><span class="n">parcial1</span><span class="p">:</span><span class="w"> </span><span class="n">toFloat</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="n">parcial1</span><span class="p">),</span>
<span class="w">  </span><span class="n">parcial2</span><span class="p">:</span><span class="w"> </span><span class="n">toFloat</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="n">parcial2</span><span class="p">),</span>
<span class="w">  </span><span class="n">trabajos</span><span class="p">:</span><span class="w"> </span><span class="n">toFloat</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="n">trabajos</span><span class="p">),</span>
<span class="w">  </span><span class="n">fecha_calificacion</span><span class="p">:</span><span class="w"> </span><span class="n">date</span><span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="n">fecha_calificacion</span><span class="p">),</span>
<span class="w">  </span><span class="n">estado</span><span class="p">:</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="n">estado</span>
<span class="p">}</span><span class="o">]</span><span class="err">-</span><span class="p">&gt;(</span><span class="n">curso</span><span class="p">);</span>
</pre>
    </div>
   </div>
   <h3 id="validacion-de-datos-importados">
    Validación de datos importados
   </h3>
   <div class="highlight language-cypher">
    <div class="collapsible-container" data-max-lines="6">
     <pre><span></span><span class="c1">// Verificar integridad de datos</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">:</span><span class="n">Estudiante</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">email</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="n">OR</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">estudiantes_sin_datos_completos</span><span class="p">;</span>

<span class="c1">// Verificar relaciones huérfanas</span>
<span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">calificacion</span><span class="p">:</span><span class="n">OBTUVO</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="n">EXISTS</span><span class="p">((:</span><span class="n">Estudiante</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">OBTUVO</span><span class="o">]-</span><span class="p">(:</span><span class="n">Curso</span><span class="p">))</span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">calificacion</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">calificaciones_huerfanas</span><span class="p">;</span>
</pre>
    </div>
   </div>
  </div>
  <div class="chapter-container">
   <h2 id="resumen">
    Resumen
   </h2>
   <p>
    En esta parte hemos aprendido:
   </p>
   <ul>
    <li>
     ✅ Principios fundamentales del modelado de grafos
    </li>
    <li>
     ✅ Patrones comunes: entidades conectadas, timeline, jerarquías, métricas
    </li>
    <li>
     ✅ Proyecto completo: Sistema de gestión académica
    </li>
    <li>
     ✅ Consultas avanzadas para análisis de datos
    </li>
    <li>
     ✅ Importación y validación de datos desde CSV
    </li>
   </ul>
  </div>
  <textarea id="css-editor" style="display:none;">pre {line-height: 125%;}

td.linenos .normal {color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;}

span.linenos {color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;}

td.linenos .special {color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px;}

span.linenos.special {color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px;}

.highlight .hll {background-color: #ffffcc;}

.highlight {background: #f8f8f8; padding: 0; border-radius: 5px; margin: 15px 0; background-color: #fef6e4 !important; border: 1px solid #f0e6d4; box-shadow: 0 1px 3px rgba(0,0,0,0.1);}

.highlight .c {color: #9a8052 !important; font-style: italic;}

/* Comment */
.highlight .err {border: 1px solid #F00;}

/* Error */
.highlight .k {color: #008000; font-weight: bold;}

/* Keyword */
.highlight .o {color: #666;}

/* Operator */
.highlight .ch {color: #3D7B7B; font-style: italic;}

/* Comment.Hashbang */
.highlight .cm {color: #3D7B7B; font-style: italic;}

/* Comment.Multiline */
.highlight .cp {color: #9C6500;}

/* Comment.Preproc */
.highlight .cpf {color: #3D7B7B; font-style: italic;}

/* Comment.PreprocFile */
.highlight .c1 {color: #3D7B7B; font-style: italic;}

/* Comment.Single */
.highlight .cs {color: #3D7B7B; font-style: italic;}

/* Comment.Special */
.highlight .gd {color: #A00000;}

/* Generic.Deleted */
.highlight .ge {font-style: italic;}

/* Generic.Emph */
.highlight .ges {font-weight: bold; font-style: italic;}

/* Generic.EmphStrong */
.highlight .gr {color: #E40000;}

/* Generic.Error */
.highlight .gh {color: #000080; font-weight: bold;}

/* Generic.Heading */
.highlight .gi {color: #008400;}

/* Generic.Inserted */
.highlight .go {color: #717171;}

/* Generic.Output */
.highlight .gp {color: #000080; font-weight: bold;}

/* Generic.Prompt */
.highlight .gs {font-weight: bold;}

/* Generic.Strong */
.highlight .gu {color: #800080; font-weight: bold;}

/* Generic.Subheading */
.highlight .gt {color: #04D;}

/* Generic.Traceback */
.highlight .kc {color: #008000; font-weight: bold;}

/* Keyword.Constant */
.highlight .kd {color: #008000; font-weight: bold;}

/* Keyword.Declaration */
.highlight .kn {color: #008000; font-weight: bold;}

/* Keyword.Namespace */
.highlight .kp {color: #008000;}

/* Keyword.Pseudo */
.highlight .kr {color: #008000; font-weight: bold;}

/* Keyword.Reserved */
.highlight .kt {color: #B00040;}

/* Keyword.Type */
.highlight .m {color: #666;}

/* Literal.Number */
.highlight .s {color: #BA2121;}

/* Literal.String */
.highlight .na {color: #687822;}

/* Name.Attribute */
.highlight .nb {color: #008000;}

/* Name.Builtin */
.highlight .nc {color: #00F; font-weight: bold;}

/* Name.Class */
.highlight .no {color: #800;}

/* Name.Constant */
.highlight .nd {color: #A2F;}

/* Name.Decorator */
.highlight .ni {color: #717171; font-weight: bold;}

/* Name.Entity */
.highlight .ne {color: #CB3F38; font-weight: bold;}

/* Name.Exception */
.highlight .nf {color: #00F;}

/* Name.Function */
.highlight .nl {color: #767600;}

/* Name.Label */
.highlight .nn {color: #00F; font-weight: bold;}

/* Name.Namespace */
.highlight .nt {color: #008000; font-weight: bold;}

/* Name.Tag */
.highlight .nv {color: #19177C;}

/* Name.Variable */
.highlight .ow {color: #A2F; font-weight: bold;}

/* Operator.Word */
.highlight .w {color: #BBB;}

/* Text.Whitespace */
.highlight .mb {color: #666;}

/* Literal.Number.Bin */
.highlight .mf {color: #666;}

/* Literal.Number.Float */
.highlight .mh {color: #666;}

/* Literal.Number.Hex */
.highlight .mi {color: #666;}

/* Literal.Number.Integer */
.highlight .mo {color: #666;}

/* Literal.Number.Oct */
.highlight .sa {color: #BA2121;}

/* Literal.String.Affix */
.highlight .sb {color: #BA2121;}

/* Literal.String.Backtick */
.highlight .sc {color: #BA2121;}

/* Literal.String.Char */
.highlight .dl {color: #BA2121;}

/* Literal.String.Delimiter */
.highlight .sd {color: #BA2121; font-style: italic;}

/* Literal.String.Doc */
.highlight .s2 {color: #BA2121;}

/* Literal.String.Double */
.highlight .se {color: #AA5D1F; font-weight: bold;}

/* Literal.String.Escape */
.highlight .sh {color: #BA2121;}

/* Literal.String.Heredoc */
.highlight .si {color: #A45A77; font-weight: bold;}

/* Literal.String.Interpol */
.highlight .sx {color: #008000;}

/* Literal.String.Other */
.highlight .sr {color: #A45A77;}

/* Literal.String.Regex */
.highlight .s1 {color: #BA2121;}

/* Literal.String.Single */
.highlight .ss {color: #19177C;}

/* Literal.String.Symbol */
.highlight .bp {color: #008000;}

/* Name.Builtin.Pseudo */
.highlight .fm {color: #00F;}

/* Name.Function.Magic */
.highlight .vc {color: #19177C;}

/* Name.Variable.Class */
.highlight .vg {color: #19177C;}

/* Name.Variable.Global */
.highlight .vi {color: #19177C;}

/* Name.Variable.Instance */
.highlight .vm {color: #19177C;}

/* Name.Variable.Magic */
.highlight .il {color: #666;}

body {font-family: Arial, sans-serif; line-height: 1.6; margin: 0 auto; padding: 20px;}

#main-title-block {background-color: #2e2e2e; color: #f0f0f0; padding: 18px; border-radius: 10px; border: 1px solid #444; box-shadow: 0 2px 5px rgba(0,0,0,0.2); font-size: 1.8em; font-weight: bold; margin-bottom: 20px; text-align: center;}

pre:not(.highlight pre) {background-color: #fef6e4; color: #2e2e2e; padding: 12px; border-radius: 5px; overflow-x: auto; border: 1px solid #f0e6d4; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin: 15px 0;}

code {font-family: "Courier New", Courier, monospace;}

.highlight pre {background: none; border: none; box-shadow: none; padding: 12px; margin: 0; border-radius: 0;}

.highlight .c1 {color: #9a8052 !important; font-style: italic;}

.highlight .cm {color: #9a8052 !important; font-style: italic;}

.highlight .k {color: #8250df !important; font-weight: normal;}

.highlight .kd {color: #8250df !important; font-weight: normal;}

.highlight .kn {color: #8250df !important; font-weight: normal;}

.highlight .s {color: #327d41 !important;}

.highlight .s1 {color: #327d41 !important;}

.highlight .s2 {color: #327d41 !important;}

.highlight .sb {color: #327d41 !important;}

.highlight .si {color: #327d41 !important;}

.highlight .m {color: #606060 !important;}

.highlight .mi {color: #606060 !important;}

.highlight .mf {color: #606060 !important;}

.highlight .o {color: #666666 !important; font-weight: normal;}

.highlight .ow {color: #666666 !important; font-weight: normal;}

.highlight .kc {color: #9a5b13 !important;}

.highlight .no {color: #9a5b13 !important;}

.highlight .nf {color: #606060 !important; font-weight: normal;}

.highlight .nb {color: #606060 !important; font-weight: normal;}

.highlight .nx {color: #606060 !important; font-weight: normal;}

.highlight .p {color: #666666 !important; font-weight: normal;}

.language-jsx .highlight .k {color: #af00db !important; font-weight: normal; background: none !important; border: none !important;}

.language-jsx .highlight .kd {color: #af00db !important; font-weight: normal; background: none !important; border: none !important;}

.language-jsx .highlight .kr {color: #af00db !important; font-weight: normal; background: none !important; border: none !important;}

.language-jsx .highlight .nx {color: #0969da !important; background: none !important; border: none !important;}

.language-jsx .highlight .nf {color: #0969da !important; background: none !important; border: none !important;}

.language-jsx .highlight .nt {color: #116329 !important; background: none !important; border: none !important; box-shadow: none !important; outline: none !important;}

.language-jsx .highlight .nc {color: #116329 !important; background: none !important; border: none !important; box-shadow: none !important; outline: none !important;}

.language-jsx .highlight .o {color: #666666 !important; background: none !important; border: none !important; box-shadow: none !important; outline: none !important;}

.language-jsx .highlight .p {color: #666666 !important; background: none !important; border: none !important; box-shadow: none !important; outline: none !important;}

.language-jsx .highlight .na {color: #0969da !important; background: none !important; border: none !important;}

.language-jsx .highlight .s {color: #0a3069 !important; background: none !important; border: none !important;}

.language-jsx .highlight .s1 {color: #0a3069 !important; background: none !important; border: none !important;}

.language-jsx .highlight .s2 {color: #0a3069 !important; background: none !important; border: none !important;}

.language-jsx .highlight .c {color: #656d76 !important; font-style: italic; background: none !important; border: none !important;}

.language-jsx .highlight .c1 {color: #656d76 !important; font-style: italic; background: none !important; border: none !important;}

.language-jsx .highlight .cm {color: #656d76 !important; font-style: italic; background: none !important; border: none !important;}

.language-jsx .highlight .m {color: #0969da !important; background: none !important; border: none !important;}

.language-jsx .highlight .mi {color: #0969da !important; background: none !important; border: none !important;}

.language-jsx .highlight .mf {color: #0969da !important; background: none !important; border: none !important;}

.language-react .highlight .k {color: #af00db !important; font-weight: normal; background: none !important; border: none !important;}

.language-react .highlight .kd {color: #af00db !important; font-weight: normal; background: none !important; border: none !important;}

.language-react .highlight .kr {color: #af00db !important; font-weight: normal; background: none !important; border: none !important;}

.language-react .highlight .nx {color: #0969da !important; background: none !important; border: none !important;}

.language-react .highlight .nf {color: #0969da !important; background: none !important; border: none !important;}

.language-react .highlight .nt {color: #116329 !important; background: none !important; border: none !important; box-shadow: none !important; outline: none !important;}

.language-react .highlight .nc {color: #116329 !important; background: none !important; border: none !important; box-shadow: none !important; outline: none !important;}

.language-react .highlight .o {color: #666666 !important; background: none !important; border: none !important; box-shadow: none !important; outline: none !important;}

.language-react .highlight .p {color: #666666 !important; background: none !important; border: none !important; box-shadow: none !important; outline: none !important;}

.language-react .highlight .na {color: #0969da !important; background: none !important; border: none !important;}

.language-react .highlight .s {color: #0a3069 !important; background: none !important; border: none !important;}

.language-react .highlight .s1 {color: #0a3069 !important; background: none !important; border: none !important;}

.language-react .highlight .s2 {color: #0a3069 !important; background: none !important; border: none !important;}

.language-react .highlight .c {color: #656d76 !important; font-style: italic; background: none !important; border: none !important;}

.language-react .highlight .c1 {color: #656d76 !important; font-style: italic; background: none !important; border: none !important;}

.language-react .highlight .cm {color: #656d76 !important; font-style: italic; background: none !important; border: none !important;}

.language-react .highlight .m {color: #0969da !important; background: none !important; border: none !important;}

.language-react .highlight .mi {color: #0969da !important; background: none !important; border: none !important;}

.language-react .highlight .mf {color: #0969da !important; background: none !important; border: none !important;}

.language-tsx .highlight .k {color: #af00db !important; font-weight: normal; background: none !important; border: none !important;}

.language-tsx .highlight .kd {color: #af00db !important; font-weight: normal; background: none !important; border: none !important;}

.language-tsx .highlight .kr {color: #af00db !important; font-weight: normal; background: none !important; border: none !important;}

.language-tsx .highlight .nx {color: #0969da !important; background: none !important; border: none !important;}

.language-tsx .highlight .nf {color: #0969da !important; background: none !important; border: none !important;}

.language-tsx .highlight .nt {color: #116329 !important; background: none !important; border: none !important; box-shadow: none !important; outline: none !important;}

.language-tsx .highlight .nc {color: #116329 !important; background: none !important; border: none !important; box-shadow: none !important; outline: none !important;}

.language-tsx .highlight .o {color: #666666 !important; background: none !important; border: none !important; box-shadow: none !important; outline: none !important;}

.language-tsx .highlight .p {color: #666666 !important; background: none !important; border: none !important; box-shadow: none !important; outline: none !important;}

.language-tsx .highlight .na {color: #0969da !important; background: none !important; border: none !important;}

.language-tsx .highlight .s {color: #0a3069 !important; background: none !important; border: none !important;}

.language-tsx .highlight .s1 {color: #0a3069 !important; background: none !important; border: none !important;}

.language-tsx .highlight .s2 {color: #0a3069 !important; background: none !important; border: none !important;}

.language-tsx .highlight .c {color: #656d76 !important; font-style: italic; background: none !important; border: none !important;}

.language-tsx .highlight .c1 {color: #656d76 !important; font-style: italic; background: none !important; border: none !important;}

.language-tsx .highlight .cm {color: #656d76 !important; font-style: italic; background: none !important; border: none !important;}

.language-tsx .highlight .m {color: #0969da !important; background: none !important; border: none !important;}

.language-tsx .highlight .mi {color: #0969da !important; background: none !important; border: none !important;}

.language-tsx .highlight .mf {color: #0969da !important; background: none !important; border: none !important;}

.language-tsx .highlight .kt {color: #0969da !important; background: none !important; border: none !important;}

.language-javascript .highlight .err {color: #116329 !important; background: none !important; border: none !important;}

.language-js .highlight .err {color: #116329 !important; background: none !important; border: none !important;}

.highlight span {background: none !important; border: none !important; box-shadow: none !important; text-decoration: none !important; outline: none !important;}

.empty-code-block {background-color: #fef6e4; color: #2e2e2e; padding: 12px; border-radius: 5px; margin: 15px 0; font-family: monospace; border: 1px solid #f0e6d4; box-shadow: 0 1px 3px rgba(0,0,0,0.1);}

.highlight-error {background-color: #fef6e4; color: #000080; padding: 12px; border-radius: 5px; margin: 15px 0; font-family: monospace; border: 1px solid #f0e6d4; box-shadow: 0 1px 3px rgba(0,0,0,0.1);}

img {max-width: 100%; height: auto;}

table {border-collapse: collapse; width: 100%;}

th {border: 1px solid #ddd; padding: 8px; background-color: #f2f2f2;}

td {border: 1px solid #ddd; padding: 8px;}

.chapter-container {background-color: #f9f9f9; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1);}

.chapter-container h2 {margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px; color: #444;}

/* Estilos para el contenedor colapsable */
.collapsible-container {position: relative; overflow: hidden; transition: max-height 0.3s ease; border-radius: 8px; margin: 0;}

.collapsible-container pre {margin: 0; line-height: 1.4;}

.collapsible-container .toggle-button {position: absolute; top: 8px; right: 8px; background: rgba(255,255,255,0.9); border: 1px solid #ccc; cursor: pointer; font-size: 16px; line-height: 1; padding: 4px 8px; border-radius: 4px; z-index: 10; box-shadow: 0 2px 4px rgba(0,0,0,0.1);}

.collapsible-container .toggle-button:hover {background: rgba(255,255,255,1);}

/* Estilos para el botón de copiar */
.collapsible-container .copy-button {position: absolute; top: 8px; width: 24px; display: flex; /* Usamos flexbox para centrar el icono/texto */
  align-items: center; justify-content: center; right: 48px; /* A 40 px a la izquierda del botón de colapsar */
  background: rgba(255,255,255,0.9); border: 1px solid #ccc; cursor: pointer; font-size: 16px; line-height: 1; padding: 4px 8px; border-radius: 4px; z-index: 10; box-shadow: 0 2px 4px rgba(0,0,0,0.1);}

.collapsible-container .copy-button:hover {background: rgba(255,255,255,1);}

.collapsible-container .fade-overlay {position: absolute; bottom: -1px; left: 0; right: 0; height: 42px; background: linear-gradient(
    to bottom, 
    rgba(255,249,229,0), 
    rgba(255,249,229,1)
  ); pointer-events: none; z-index: 5; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px;}

.collapsible-container .ellipsis {position: absolute; bottom: 8px; width: 100%; text-align: center; color: #888; font-size: 18px; font-weight: bold; z-index: 6;}

.collapsible-container.expanded .fade-overlay {display: none;}

.collapsible-container.expanded .ellipsis {display: none;}

/* Estilos para la tabla de contenidos */

/* Contenedor principal */
#table-of-contents {background-color: #f0f0ff; border-radius: 8px; padding: 20px 30px; margin: 20px 0; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); font-family: Arial, sans-serif; border: 1px solid #d0d0ff;}

/* Título de la tabla de contenidos */
#contents-header {text-align: center; color: #585b9e; font-size: 24px; margin-top: 10px; margin-bottom: 20px; font-weight: 500; padding-bottom: 15px;}

/* Listas */
ul.toc {list-style-type: none; padding-left: 20px; margin: 0;}

/* Elementos de la lista */
li.toc {margin: 10px 0; line-height: 1.5; color: #585b9e;}

/* Enlaces */
a.toc {text-decoration: none; color: #585b9e; transition: color 0.2s, padding-left 0.2s; display: inline-block;}

/* Efecto hover en los enlaces */
a.toc:hover {color: #3333cc; padding-left: 3px; font-weight: 500; text-decoration: none;}

/* Diferentes niveles de indentación */
li.toc li.toc {margin-left: 15px;}

li.toc li.toc li.toc {margin-left: 25px;}

/* Hacer que los enlaces de primer nivel tengan un poco más de peso */
ul.toc &gt; li.toc &gt; a.toc {font-weight: 500;}

/* Línea decorativa sobre la tabla de contenidos */
#table-of-contents:before {content: ""; display: block; height: 0px; background-color: #d0d0ff; margin-bottom: 15px;}</textarea>
  <script>
   document.addEventListener('DOMContentLoaded', function() {
    var cssCode = document.getElementById('css-editor').value;
    var style = document.createElement('style');
    style.textContent = cssCode;
    document.head.appendChild(style);
});
  </script>
  <script>
   document.addEventListener('DOMContentLoaded', function() {
    // Aplicar estilo con retraso de 100ms para superar posibles hojas de estilo heredadas
    setTimeout(function() {
        document.querySelectorAll('.toggle-button').forEach(btn => {
            btn.style.setProperty('color', 'black', 'important');
            if (!btn.textContent.trim()) {
                btn.textContent = '+';
            }
        });
        document.querySelectorAll('.copy-button').forEach(btn => {
            btn.style.setProperty('color', 'black', 'important');
        });
    }, 1000);
});
  </script>
  <script>
   document.addEventListener('DOMContentLoaded', function() {
(function() {
  function initCollapsibles() {
    // Esperar un poco para que los estilos se apliquen
    setTimeout(() => {
      document.querySelectorAll('.collapsible-container').forEach(container => {
        const pre = container.querySelector('pre');
        if (!pre) return;
        
        const maxLines = parseInt(container.dataset.maxLines, 10) || 6;
        
        // Crear un elemento temporal para medir line-height
        const tempSpan = document.createElement('span');
        tempSpan.style.visibility = 'hidden';
        tempSpan.style.position = 'absolute';
        tempSpan.style.fontSize = getComputedStyle(pre).fontSize;
        tempSpan.style.fontFamily = getComputedStyle(pre).fontFamily;
        tempSpan.style.lineHeight = '1.4';
        tempSpan.textContent = 'M';
        document.body.appendChild(tempSpan);
        
        const lineHeight = tempSpan.offsetHeight;
        document.body.removeChild(tempSpan);
        
        const fullHeight = pre.scrollHeight;
        const collapsedHeight = Math.ceil(lineHeight * maxLines);
        
        console.log('Debug:', {
          maxLines,
          lineHeight,
          fullHeight,
          collapsedHeight,
          shouldCollapse: fullHeight > collapsedHeight + 10
        });
        
        // Solo colapsar si realmente es necesario
        if (fullHeight <= collapsedHeight + 10) {
          return;
        }

        // Estado inicial: colapsado
        container.style.maxHeight = collapsedHeight + 'px';
        container.classList.add('collapsed');

         // === Aquí agregamos primero el botón de "copiar" ===
        const copyBtn = document.createElement('button');
        copyBtn.className = 'copy-button';
        copyBtn.innerHTML = '📋';
        copyBtn.title = 'Copiar código';
        container.appendChild(copyBtn);

        // Evento para copiar el texto del <pre> al portapapeles
        copyBtn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          // Copiar el contenido de 'pre'
          const codeText = pre.innerText;
          navigator.clipboard.writeText(codeText).then(() => {
            // Opcional: retroalimentación breve (por ejemplo cambiar texto o color)
            copyBtn.textContent = '✔';
            setTimeout(() => { copyBtn.innerHTML = '📋'; }, 1000);
          }).catch(err => {
            console.error('Error al copiar al portapapeles:', err);
          });
        });

        // Crear botón
        const btn = document.createElement('button');
        btn.className = 'toggle-button';
        btn.textContent = '+';
        btn.title = 'Expandir/Colapsar código';
        container.appendChild(btn);

        // Crear overlay y ellipsis
        const overlay = document.createElement('div');
        overlay.className = 'fade-overlay';
        container.appendChild(overlay);
        
        const ell = document.createElement('div');
        ell.className = 'ellipsis';
        ell.textContent = '...';
        container.appendChild(ell);

        // Evento toggle
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          
          const isCollapsed = container.classList.contains('collapsed');
          
          if (isCollapsed) {
            // Expandir
            container.style.maxHeight = fullHeight + 20 + 'px';
            container.classList.remove('collapsed');
            container.classList.add('expanded');
            btn.textContent = '−';
          } else {
            // Colapsar
            container.style.maxHeight = collapsedHeight + 'px';
            container.classList.add('collapsed');
            container.classList.remove('expanded');
            btn.textContent = '+';
          }
        });
      });
    }, 100); // Esperar 100ms para que se apliquen los estilos
  }
  
  // Múltiples puntos de inicialización para mayor compatibilidad
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCollapsibles);
  } else {
    initCollapsibles();
  }
  
  // También inicializar en window.load por si acaso
  window.addEventListener('load', initCollapsibles);
})();
});
  </script>
 </body>
</html>
